function ImgInfo(t){this.pageW=t.pageW,this.pageH=t.pageH,this.pageScale=this.pageH/this.pageW};function WxScale(t){this.moveData={ifStart:!1,startX:1,startY:1},this.scaleData={ifStart:!1,startDist:1},this.init(t),this.bindEvent()};var ValineInfo={el:'#valine-container',appId:'Q2bHyXTTgsOb8xLvM5alr0Ma-gzGzoHsz',appKey:'atA8fJGmIQ01DBem3fx5a3rL',notify:true,verify:false,avatar:'monsterid',visitor:true,placeholder:'如果你有什么宝贵意见, 就留在这里吧 ,如果有特别紧急的事情请发送到我邮箱: 574986060@qq.com'};ImgInfo.prototype={constructor:ImgInfo,reset:function(t){this.img=t;var i=this.img.getBoundingClientRect();this.scale=i.height/i.width,this.ifFullByHeight=this.scale>this.pageScale,this.ifFullByHeight?this.setHeight(this.pageH):this.setWidth(this.pageW),this.startAnitScale=.2},setWidth:function(t){this.w=t,this.h=this.w*this.scale,this.x=(this.pageW-this.w)/2,this.y=(this.pageH-this.h)/2},setHeight:function(t){this.h=this.pageH,this.w=this.h/this.scale,this.y=0,this.x=(this.pageW-this.w)/2},endScale:function(){this.w>this.pageW||this.h>this.pageH||(this.ifFullByHeight?this.setHeight(this.pageH):this.setWidth(this.pageW))},moveX:function(t){this.x>0||this.x+this.w<this.pageW?this.x+=t/5:this.x+=t},moveY:function(t){this.h<=this.pageH||(this.h>this.pageH&&this.y>0||this.h>this.pageH&&this.y+this.h<this.pageH?this.y+=t/5:this.y+=t)},move:function(t,i){this.moveX(t),this.moveY(i)},endMove:function(){this.x>0?this.x=this.ifFullByHeight&&this.w<this.pageW?(this.pageW-this.w)/2:0:this.x+this.w<this.pageW&&(this.x=this.ifFullByHeight&&this.w<this.pageW?(this.pageW-this.w)/2:this.pageW-this.w),this.h>this.pageH&&this.y>0?this.y=0:this.h>this.pageH&&this.y+this.h<this.pageH&&(this.y=this.pageH-this.h)},startAnit:function(t){var i=this;if(this.startAnitScale+=.05,this.startAnitDraw(t),this.startAnitScale>=1)return this.startAnitScale=1,this.startAnitDraw(t),void(this.startAnitScale=.2);requestAnimationFrame(function(){i.startAnit(t)})},startAnitDraw:function(t){t.clearRect(0,0,this.pageW,this.pageH),t.save();var i=this.w*this.startAnitScale,s=this.h*this.startAnitScale;t.translate((this.pageW-i)/2,(this.pageH-s)/2),t.beginPath(),t.drawImage(this.img,0,0,i,s),t.closePath(),t.restore()},draw:function(t){t.clearRect(0,0,this.pageW,this.pageH),t.save(),t.beginPath(),t.drawImage(this.img,this.x,this.y,this.w,this.h),t.closePath(),t.restore()}},WxScale.prototype={constructor:WxScale,init:function(t){this.fullPage=t.fullPage,this.canvas=t.canvas,this.fullPage.style.display="block";var i=this.canvas.getBoundingClientRect();this.w=this.canvas.width=i.width,this.h=this.canvas.height=i.height,this.ctx=canvas.getContext("2d"),this.img=new ImgInfo({pageW:this.w,pageH:this.h}),this.fullPage.style.display="none"},start:function(t){this.fullPage.style.display="block",this.img.reset(t),this.img.startAnit(this.ctx)},bindEvent:function(){var t=this;this.fullPage.addEventListener("touchstart",function(i){t.touchstart(i)},!1),this.fullPage.addEventListener("touchmove",function(i){t.touchmove(i)},!1),this.fullPage.addEventListener("touchend",function(i){t.touchend(i)},!1),this.fullPage.addEventListener("click",function(){this.style.display="none"},!1)},touchstart:function(t){1==t.touches.length?(this.moveData.ifStart=!0,this.moveData.startX=t.touches[0].pageX,this.moveData.startY=t.touches[0].pageY):t.touches.length>=2&&(this.scaleData.ifStart=!0,this.scaleData.startDist=this.getDistance(t.touches[0],t.touches[1]),this.imgBaseWidth=this.img.w)},touchmove:function(t){if(t.preventDefault(),this.moveData.ifStart&&1==t.touches.length){var i=t.touches[0].pageX-this.moveData.startX,s=t.touches[0].pageY-this.moveData.startY;this.moveData.startX=t.touches[0].pageX,this.moveData.startY=t.touches[0].pageY,this.img.move(i,s)}else if(this.scaleData.ifStart&&t.touches.length>=2){var h=(this.getDistance(t.touches[0],t.touches[1])/this.scaleData.startDist).toFixed(2);this.img.setWidth(this.imgBaseWidth*h)}this.img.draw(this.ctx)},touchend:function(t){this.scaleData.ifStart?(this.scaleData.ifStart=!1,this.moveData.ifStart=!1,this.img.endScale(),this.img.draw(this.ctx)):this.moveData.ifStart&&(this.moveData.ifStart=!1,this.img.endMove(),this.img.draw(this.ctx))},getDistance:function(t,i){var s=i.pageX-t.pageX,h=i.pageY-t.pageY;return Math.sqrt(s*s+h*h)}};function cajax(url){var xhr=new XMLHttpRequest();xhr.open('PUT',"https://avoscloud.com/1.1/classes/BlogCounter/"+url+"?new=true&where=%7B%7D",true);xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");xhr.setRequestHeader("Accept","*/*");xhr.setRequestHeader("x-lc-id","Q2bHyXTTgsOb8xLvM5alr0Ma-gzGzoHsz");xhr.setRequestHeader("x-lc-sign","b5d619fb8196154c4a7809d8042cde38,1586086603248");xhr.setRequestHeader("x-lc-session","ce5slwkczzkfgxf88l9huptar");var body=`{"count":{"__op":"Increment","amount":1}}`;xhr.send(body);xhr.onreadystatechange=function(){if(xhr.readyState==4)callback()};function callback(){if(xhr.status==200){var result=JSON.parse(xhr.responseText).count;document.getElementById("count-page").innerText=result}else{document.getElementById("count-page").innerText="123"}}}window.onload=function(){cajax("5e89c8868a84ab008cdbd254")};function btn_toggle() { document.getElementById("hn").classList.contains("no-js") ? document.getElementById("hn").classList.remove("no-js") : document.getElementById("hn").classList.add("no-js") }
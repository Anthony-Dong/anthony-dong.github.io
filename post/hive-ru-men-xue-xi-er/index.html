<!DOCTYPE html>
<html lang="en">
<head>
	<link rel="shortcut icon"href="https://anthony-dong.github.io/favicon.ico"type="image/x-icon"/><meta name="viewport"content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/><meta name="apple-mobile-web-app-capable"content="yes"/><meta name="apple-mobile-web-app-status-bar-style"content="black"/><meta name="format-detection"content="telephone=no"/><meta name="renderer"content="webkit"/><meta name="description"content="Anthony-Dongçš„ä¸ªäººåšå®¢"/><meta charset="UTF-8"/><title>HIVE - å…¥é—¨å­¦ä¹ äºŒ | Anthony-Dong</title><link href="https://anthony-dong.github.io/styles/main.css"type="text/css"rel="stylesheet"/><script src="https://anthony-dong.github.io/media/js/magnify.min.js"></script>
	<link rel="canonical" href="https://anthony-dong.github.io/post/hive-ru-men-xue-xi-er/" />
</head>
<body>
	<div class="progress"></div><style>.progress{background:linear-gradient(to right,#87ceeb var(--scroll),transparent 0);background-repeat:no-repeat;position:fixed;width:100%;height:4px;z-index:1}</style><div class="darkmode-background"></div><div class="darkmode-layer"></div>
<noscript><p class="warn" >æœ¬é¡µé¢éœ€è¦æµè§ˆå™¨æ”¯æŒï¼ˆå¯ç”¨ï¼‰JavaScript</p></noscript><div class="header"><div class="logo_title"><div class="title animated fadeInDown"><a href="https://anthony-dong.github.io"><img alt="logo" style="display:inline-block;" src="https://anthony-dong.github.io/images/avatar.png"/></a><h1 title="Anthony-Dong" class="weaklink shift"><a  href="/">Anthony-Dong</a></h1>

<div class="navbar weaklink">
<div class="normal_nav">
<div class="bitcron_nav_container"><div class="bitcron_nav"><div class="bitcron_nav"><div style="display:flex;justify-content:center;"><nav class="mixed_site_nav_wrap site_nav_wrap"><ul class="mixed_site_nav site_nav sm sm-base">	<li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >é¦–é¡µ</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >å½’æ¡£</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/tags" class="selected active current nav__item" >æ ‡ç­¾</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >å…³äº</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/link" class="selected active current nav__item" >å‹é“¾</a></li></ul></nav>
<div style="float:right;margin-top:1em"><form id="gridea-search-form" data-update="1578893743252" action="/search/index.html"><input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="Search..."></form></div>
<div style="margin-left:0.5em;margin-top:1.2em"><input id="switch_default" onclick="mobileBtn()" type="checkbox" class="switch_default"><label for="switch_default" class="toggleBtn"></label></div></div>
<div class="clear clear_nav_inline_end"></div></div></div><div class="clear clear_nav_end"></div></div></div><div class="hamberger" href="javascript:void(0)" onclick="btn_toggle();"><i class="iconfont icon-category"></i></div></div></div></div>
<div id="hn" class="no-js hidden_nav animated fadeInDown"><div class="bitcron_nav_container"><div class="bitcron_nav"><nav class="mixed_site_nav_wrap site_nav_wrap"><ul class="mixed_site_nav site_nav sm sm-base">	<li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >é¦–é¡µ</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >å½’æ¡£</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/tags" class="selected active current nav__item" >æ ‡ç­¾</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >å…³äº</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/link" class="selected active current nav__item" >å‹é“¾</a></li></ul><div class="clear clear_nav_inline_end"></div></nav></div><div class="clear clear_nav_end"></div></div>
<div style="display:flex;justify-content:center;inline-block;text-align:center;margin-top:7%"><div><form id="gridea-search-form-1" data-update="1614223342286" action="/search/index.html"><input class="search-input" autocomplete="off" spellcheck="false" name="q"  placeholder="Search..." /></form></div><div style="margin-left:0.5em"><input id="switch_default_h" onclick="mobileBtn()" type="checkbox" class="switch_default"><label for="switch_default" class="toggleBtn"></label></div></div>
</div></div>
<script>function enableDarkmode(){document.body.classList.add("darkmode"),document.getElementById("switch_default").checked=1,document.getElementById("switch_default_h").checked=1}function removeDarkmode(){document.body.classList.remove("darkmode"),document.getElementById("switch_default").checked=0,document.getElementById("switch_default_h").checked=0}function getCookie(a){var b,c=new RegExp("(^| )"+a+"=([^;]*)(;|$)");return(b=document.cookie.match(c))?unescape(b[2]):null}cookie=getCookie("darkmode"),"enable"==cookie&&enableDarkmode(),window.matchMedia("(prefers-color-scheme: dark)").matches&&"disable"!==cookie&&(enableDarkmode(),document.cookie="darkmode=enable; path=/");var mobileBtn=function(){1==document.getElementById("switch_default").checked?(enableDarkmode(),document.cookie="darkmode=enable; path=/"):(removeDarkmode(),document.cookie="darkmode=disable; path=/")};</script>

	<div class="main">
		<div class="main-inner">
			<div class="content">
				<article class="post">
					<script src='https://anthony-dong.github.io/media/js/Valine.min.js'></script><style>.v .vlist .vcard .vh .vmeta .vat{font-size:.8125em;color:#9d7873;cursor:pointer;float:right}.v .vlist .vcard .vhead .vsys{display:none}</style ><script type="text/javascript">new Valine(ValineInfo)</script>
					<h2 class="post_title sm_margin"><a>HIVE - å…¥é—¨å­¦ä¹ äºŒ</a></h2>
					<script>
						function lan() {
							if (document.getElementById("lan").innerText == "ç¹") {
								var s = document.getElementById("tongwenlet_cn");
								if (s != null) {
									document.body.removeChild(s)
								}
								var s = document.createElement("script");
								s.language = "javascript";
								s.type = "text/javascript";
								s.src = "https://cdn.jsdelivr.net/gh/qyxtim/Static@1.1/bookmarklet_tw.js";
								s.id = "tongwenlet_cn";
								document.body.appendChild(s);
								document.getElementById("lan").innerHTML = "ç®€"
							} else {
								if (document.getElementById("lan").innerText == "ç°¡") {
									var s = document.getElementById("tongwenlet_cn");
									if (s != null) {
										document.body.removeChild(s)
									}
									var s = document.createElement("script");
									s.language = "javascript";
									s.type = "text/javascript";
									s.src = "https://cdn.jsdelivr.net/gh/qyxtim/Static@1.1/bookmarklet_cn.js";
									s.id = "tongwenlet_cn";
									document.body.appendChild(s);
									document.getElementById("lan").innerHTML = "ç¹"
								}
							}
						};
					</script>
					<section class="post_details"><i class="iconfont icon-calendar"></i><span style="margin-right:15px">
							2019-11-23</span><i class="iconfont icon-browse"></i>
							<span class="leancloud_visitors" style="margin-right:15px" id="/post/hive-ru-men-xue-xi-er/">views <i class="leancloud-visitors-count" style="font-style: normal"></i></span>
							<span class="weaklink" style="margin-right:15px"><i class="iconfont icon-category"></i> <a
								href="https://anthony-dong.github.io/tag/YZlAYWOZz21/"
								class="tag">å¤§æ•°æ®</a></span><i class="iconfont icon-caret-down"></i><span
							style="margin-right:15px">3099å­—</span><i
							class="iconfont icon-naozhong"></i><span
							style="margin-right:15px">14 min read</span><a id="lan"
							href="javascript:void(0);" onclick="lan();" title="è°ƒæ•´ç®€ç¹ä½“" style="margin-right:15px;">ç¹</a>
						</section>

						<div style="display:flex">
							<div class="md_block" id="md_block">
								<div class="round-shape-one"></div>
								<blockquote>
<p>DDL : (Data Definition Language)  æ•°æ®å®šä¹‰è¯­è¨€ , æ¯”å¦‚ create alter drop truncate ,è¿™äº›è¯­å¥</p>
<p>DML : (Data Manipulation Language) æ•°æ®æ“ä½œè¯­è¨€   å…¶å®å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„ CRUD æ“ä½œ</p>
<p>DCL : (Data Control Language)  æ•°æ®æ§åˆ¶è¯­è¨€  , æ¯”å¦‚ä¸€äº›äº‹åŠ¡æ“ä½œ  ,æ•°æ®åº“æƒé™ä¹‹ç±»çš„</p>
<p>æˆ‘ä»¬çš„é‡ç‚¹ä¸»è¦æ˜¯å‰ä¸¤ä¸ª</p>
</blockquote>
<h2 id="ddlè¯­å¥">DDLè¯­å¥</h2>
<h3 id="1-æ•°æ®åº“åˆ›å»ºè¯­å¥">1. æ•°æ®åº“åˆ›å»ºè¯­å¥</h3>
<pre><code class="language-sql">CREATE DATABASE [IF NOT EXISTS] database_name
[COMMENT database_comment]
[LOCATION hdfs_path]
[WITH DBPROPERTIES (property_name=property_value, ...)];
</code></pre>
<p>ä½¿ç”¨ :</p>
<pre><code class="language-shell">1. åˆ›å»ºæ•°æ®åº“è¯­å¥ , æŒ‡å®šä½ç½®åœ¨ hdfs ä¸Šçš„ /test ç›®å½•ä¸‹
create database test2 location '/test2';

create database if not exists test;

2. åˆ é™¤æ•°æ®åº“
drop database test;

åˆ é™¤éç©ºæ•°æ®åº“
drop database test cascade;

3.æŸ¥è¯¢
show databases;
show databases like 'test*'

4.æŸ¥è¯¢ä¿¡æ¯
desc database test;
desc database extended test;

hive&gt; desc database default;
OK
default	Default Hive database	hdfs://hadoop1:9000/user/hive/warehouse	public	ROLE	
Time taken: 0.055 seconds, Fetched: 1 row(s)

5.ä¿®æ”¹æ•°æ®åº“å±æ€§æ“ä½œ
alter database db_hive set dbproperties('createtime'='20170830');
</code></pre>
<h3 id="2-è¡¨åˆ›å»ºè¯­å¥">2. è¡¨åˆ›å»ºè¯­å¥</h3>
<pre><code class="language-sql">CREATE [EXTERNAL] TABLE [IF NOT EXISTS] table_name //external å¤–éƒ¨è¡¨`EXTERNAL_TABLE`,åˆ é™¤è¡¨æ—¶åªä¼šåˆ é™¤å…ƒä¿¡æ¯,ä¸ä¼šåˆ é™¤æ•°æ®. é»˜è®¤æ˜¯ç®¡ç†è¡¨`MANAGED_TABLE`
[(col_name data_type [COMMENT col_comment], ...)] //å­—æ®µå±æ€§
[COMMENT table_comment] //æ·»åŠ æ³¨é‡Š
[PARTITIONED BY (col_name data_type [COMMENT col_comment], ...)] 
[CLUSTERED BY (col_name, col_name, ...) 
[SORTED BY (col_name [ASC|DESC], ...)] INTO num_buckets BUCKETS] 
[ROW FORMAT row_format] 
[STORED AS file_format]  // sequencefile(äºŒè¿›åˆ¶) textfile(æ–‡æœ¬) rcfile(åˆ—å¼å­˜å‚¨)
[LOCATION hdfs_path]  // HDFS ä¸Šçš„ä½ç½®
[TBLPROPERTIES (property_name=property_value, ...)]
[AS select_statement]  // æ ¹æ®æŸ¥è¯¢ç»“æœåˆ›å»ºè¡¨ æˆ–è€…ç”¨likeå¯ä»¥å¤åˆ¶è¡¨ç»“æ„,ä½†æ˜¯ä¸å¤åˆ¶æ•°æ®
</code></pre>
<p>ä½¿ç”¨ :</p>
<pre><code class="language-shell">1. åˆ›å»ºè¡¨ 
// å­—æ®µ id å’Œ name  , åˆ—åˆ†éš”ç¬¦ `\t` åˆ†å‰²å¼€ , å­˜å‚¨æ ¼å¼ä¸º textfile , è·¯å¾„æ˜¯ `/user/hive/warehouse/student2`
create table if not exists student2(
id int, name string
)
row format delimited fields terminated by '\t'
stored as textfile
location '/user/hive/warehouse/student2';

2. æ ¹æ®æŸ¥è¯¢ç»“æœåˆ›å»ºè¡¨ , æ­¤æ—¶æ‰§è¡Œmr ,åŒæ—¶ä¹Ÿæ–°å»ºäº†ä¸€ä¸ªè¡¨ ,, ä¹Ÿå°±æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ ,åŒæ—¶æŠŠæ•°æ®ä¹Ÿæ‹·è´è¿‡å»äº†
create table if not exists student3 as select id, name from student;

3. æ ¹æ®å·²ç»å­˜åœ¨çš„è¡¨ç»“æ„åˆ›å»ºè¡¨ , æ­¤æ—¶ä¹Ÿæ˜¯æ–°å»ºäº†ä¸€ä¸ªè¡¨ , ä¹Ÿå°±æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹
create table if not exists student4 like student;

4. æŸ¥è¯¢è¡¨ç±»å‹
desc formatted student2
Table Type:             MANAGED_TABLE  

6. æŸ¥è¯¢å»ºè¡¨è¯­å¥
show create table student;

7. åˆ é™¤è¡¨
drop table student;

8.ä¿®æ”¹è¡¨ä¸ºå¤–éƒ¨è¡¨
alter table student set tblproperties('EXTERNAL'='TRUE');

9. æŸ¥çœ‹å±æ€§
desc formatted student2;
</code></pre>
<h4 id="æ’å…¥æ•°æ®-æœ¬åœ°hdfsæ–‡ä»¶æ’å…¥">æ’å…¥æ•°æ® - æœ¬åœ°/HDFSæ–‡ä»¶æ’å…¥</h4>
<pre><code class="language-shell">1. åˆ›å»ºä¸€å¼ è¡¨
create table stu3(id int , name string) row format delimited fields terminated by '\t';

2. åˆ›å»ºæ–‡ä»¶
[admin@hadoop1 data]$ cat stu3.txt 
1	xiaoli
2	xiaowang
3	xiaoming

3.ä¸Šä¼ åˆ°stu3 è¡¨ä¸­ 
load data  local inpath '/opt/software/apache-hive-1.2.1-bin/data/stu3.txt' into table stu3;

4.æŸ¥è¯¢
hive&gt; select * from stu3;
OK
1	xiaoli
2	xiaowang
3	xiaoming
</code></pre>
<p>æŸ¥çœ‹HDFS , å‘ç°è§„å¾‹ ............</p>
<figure data-type="image" tabindex="1"><img src="https://tyut.oss-accelerate.aliyuncs.com/image/2019-11-21/4ad88603-641d-418e-aa38-955cbe928db4.jpg?x-oss-process=style/template01" alt="" loading="lazy"></figure>
<p>æˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹æˆ‘ä»¬çš„å»ºè¡¨è¯­å¥ , å‘ç°<code>/user/hive/warehouse/stu3</code> å°±æ˜¯åœ¨è¿™é‡Œ , æ‰€ä»¥ä»–å…¶å®åšçš„å°±æ˜¯å°†ä½ çš„<code>stu3.txt</code> æ–‡ä»¶é€šè¿‡HDFSä¸Šä¼ åˆ°äº†è¿™é‡Œ</p>
<pre><code class="language-shell">hive&gt; show create table stu3;
OK
CREATE TABLE `stu3`(
  `id` int, 
  `name` string)
ROW FORMAT DELIMITED 
  FIELDS TERMINATED BY '\t' 
STORED AS INPUTFORMAT 
  'org.apache.hadoop.mapred.TextInputFormat' 
OUTPUTFORMAT 
  'org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat'
LOCATION
  'hdfs://hadoop1:9000/user/hive/warehouse/stu3'
TBLPROPERTIES (
  'COLUMN_STATS_ACCURATE'='true', 
  'numFiles'='1', 
  'totalSize'='31', 
  'transient_lastDdlTime'='1574342187')
Time taken: 0.257 seconds, Fetched: 16 row(s)
</code></pre>
<p>å› æ­¤æˆ‘ä»¬æ­¤æ—¶å¯ä»¥å°† æˆ‘ä»¬æœ¬åœ°çš„æ–‡ä»¶ ç›´æ¥ä»¥å»ºè¡¨è§„åˆ™çš„æ–¹å¼,é€šè¿‡HDFSä¸Šä¼ åˆ°<code>/user/hive/warehouse/stu3</code> ç›®å½•ä¸‹é¢,</p>
<pre><code class="language-shell">[admin@hadoop1 data]$ cat stu3_2.txt 
4	anthony
5	flex
6	xiaofan

[admin@hadoop1 data]$ hadoop fs -put stu3_2.txt /user/hive/warehouse/stu3

hive&gt; select * from stu3;
OK
1	xiaoli
2	xiaowang
3	xiaoming
4	anthony
5	flex
6	xiaofan
</code></pre>
<p>å‘ç°å®Œå…¨ OK , æ­¤æ—¶æˆ‘ä»¬æƒ³ ,æˆ‘ä»¬å¯ä»¥è®© HDFS ä¸Šçš„æ–‡ä»¶ åŠ è½½åˆ°<code>stu3</code>è¿™å¼ è¡¨ä¸­ , æ­¤æ—¶</p>
<pre><code class="language-java">1. ä¸Šä¼ åˆ° HDFS 
[admin@hadoop1 data]$ cp stu3.txt stu4.txt
[admin@hadoop1 data]$ ls
1.txt  stu3_2.txt  stu3.txt  stu4.txt  stu.txt
[admin@hadoop1 data]$ hadoop fs -put stu4.txt /
    
2. å°†HDFS ä¸Šçš„'/stu4.txt' åŠ è½½åˆ° è¡¨stu3ä¸­
hive&gt; load data inpath '/stu4.txt' into table stu3;
Loading data to table default.stu3
Table default.stu3 stats: [numFiles=3, totalSize=89]
OK
Time taken: 0.392 seconds

3. æŸ¥è¯¢ä¸€ä¸‹
hive&gt; select * from stu3;
OK
1	xiaoli
2	xiaowang
3	xiaoming
4	anthony
5	flex
6	xiaofan
1	xiaoli
2	xiaowang
3	xiaoming
Time taken: 0.138 seconds, Fetched: 9 row(s)    
</code></pre>
<p>æŸ¥çœ‹ä¸€ä¸‹ HDFS :</p>
<figure data-type="image" tabindex="2"><img src="https://tyut.oss-accelerate.aliyuncs.com/image/2019-11-21/4079531a-6b16-4d0a-8e08-83b94d096db6.jpg?x-oss-process=style/template01" alt="" loading="lazy"></figure>
<p>æŸ¥çœ‹ä¸€ä¸‹æºæ–‡ä»¶ å‘ç°æ˜¯ç§»åŠ¨åˆ°äº† stu3 ç›®å½•ä¸‹é¢  ,ä½†æ˜¯å…¶å®æ˜¯æ”¹äº†NameNodeçš„å…ƒæ•°æ®ä¿¡æ¯ ....</p>
<figure data-type="image" tabindex="3"><img src="https://tyut.oss-accelerate.aliyuncs.com/image/2019-11-21/88392e80-3b57-4ba6-a57b-1db3847cfdf3.jpg?x-oss-process=style/template01" alt="" loading="lazy"></figure>
<h3 id="3-åˆ†åŒºè¡¨">3. åˆ†åŒºè¡¨</h3>
<blockquote>
<p>åˆ†åŒºç±»ä¼¼äºç´¢å¼• , å¯ä»¥æé«˜æŸ¥è¯¢é€Ÿåº¦ , å› ä¸ºæ¯ä¸€ä¸ªåˆ†åŒºå°±æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ , å¤šçº§åˆ†åŒºä¹Ÿæ˜¯å¤šçº§æ–‡ä»¶å¤¹,è¿™äº›éƒ½ä¿å­˜åœ¨æ•°æ®åº“çš„å…ƒä¿¡æ¯ä¸­</p>
</blockquote>
<p>å»ºè¡¨è¯­å¥</p>
<pre><code class="language-sql">hive (default)&gt; create table dept_partition(
deptno int, dname string, loc string
)
partitioned by (month string) //åˆ†åŒºè§„åˆ™,å¯ä»¥æœ‰å¤šä¸ª,ç”¨','åˆ†å¼€å°±è¡Œäº†
row format delimited fields terminated by '\t'
location '/hive/dept_partition';
</code></pre>
<p>æ’å…¥æ•°æ® ..</p>
<pre><code class="language-sql">load data inpath '/hive/dept.txt' into table default.dept_partition partition(month='201709');
</code></pre>
<p>æŸ¥è¯¢è¯­å¥ :</p>
<pre><code class="language-sql">select * from dept_partition where month='201709';
</code></pre>
<p>å¢åŠ åˆ†åŒº</p>
<pre><code class="language-sql">alter table dept_partition add partition(month='201706') ;

alter table dept_partition add partition(month='201705') partition(month='201704');
</code></pre>
<p>åˆ é™¤åˆ†åŒº</p>
<pre><code class="language-sql"> alter table dept_partition drop partition (month='201704');
 
 alter table dept_partition drop partition (month='201705'), partition (month='201706');
</code></pre>
<p>æŸ¥çœ‹åˆ†åŒº</p>
<pre><code class="language-sql">show partitions dept_partition;
</code></pre>
<p>åˆ›å»ºå¤šçº§åˆ†åŒº :</p>
<pre><code class="language-sql">hive (default)&gt; create table dept_partition2(
               deptno int, dname string, loc string
               )
               partitioned by (month string, day string)
               row format delimited fields terminated by '\t';    
</code></pre>
<p>æ·»åŠ æ•°æ®:</p>
<pre><code class="language-sql">hive (default)&gt; load data local inpath '/opt/module/datas/dept.txt' into table default.dept_partition2 partition(month='201709', day='13');
</code></pre>
<p>æŸ¥è¯¢</p>
<pre><code class="language-sql">select * from dept_partition2 where month='201709' and day='13';
</code></pre>
<p>ç›´æ¥ä¸Šä¼ åˆ°HDFS ä¸Š</p>
<ol>
<li>ä¸Šä¼ åä¿®å¤æ•°æ®</li>
</ol>
<pre><code class="language-sql"> msck repair table dept_partition2;
</code></pre>
<ol start="2">
<li>ä¸Šä¼ åæ·»åŠ åˆ†åŒº</li>
</ol>
<pre><code class="language-sql"> alter table dept_partition2 add partition(month='201709',day='11');
</code></pre>
<ol start="3">
<li>æ·»åŠ æ•°æ®ç›´æ¥</li>
</ol>
<pre><code class="language-sql">load data local inpath '/opt/module/datas/dept.txt' into table dept_partition2 partition(month='201709',day='10');
</code></pre>
<h3 id="4-ä¿®æ”¹è¡¨">4. ä¿®æ”¹è¡¨</h3>
<ol>
<li>ä¿®æ”¹è¡¨çš„åå­—</li>
</ol>
<pre><code class="language-sql">alter table table_name rename to new_table_name ; 
</code></pre>
<ol start="2">
<li>æ·»åŠ åˆ—</li>
</ol>
<pre><code class="language-sql">alter table table_name add columns(deptdesc string);
</code></pre>
<ol start="3">
<li>æ›´æ–°åˆ—</li>
</ol>
<pre><code class="language-sql">alter table dept_partition change column deptdesc desc int;
</code></pre>
<h2 id="dml-è¯­å¥">DML è¯­å¥</h2>
<h3 id="1-æ·»åŠ æ•°æ®">1. æ·»åŠ æ•°æ®</h3>
<pre><code class="language-sql">load data [local] inpath '/opt/module/datas/student.txt' [overwrite] into table student [partition (partcol1=val1,â€¦)];

ï¼ˆ1ï¼‰load data:è¡¨ç¤ºåŠ è½½æ•°æ®
ï¼ˆ2ï¼‰local:è¡¨ç¤ºä»æœ¬åœ°åŠ è½½æ•°æ®åˆ°hiveè¡¨ï¼›ä¸å†™åˆ™ä»HDFSåŠ è½½æ•°æ®
ï¼ˆ3ï¼‰inpath:è¡¨ç¤ºåŠ è½½æ•°æ®çš„è·¯å¾„
ï¼ˆ4ï¼‰overwrite:è¡¨ç¤ºè¦†ç›–è¡¨ä¸­å·²æœ‰æ•°æ®ï¼Œå¦åˆ™è¡¨ç¤ºè¿½åŠ 
ï¼ˆ5ï¼‰into table:è¡¨ç¤ºåŠ è½½åˆ°å“ªå¼ è¡¨
ï¼ˆ6ï¼‰student:è¡¨ç¤ºå…·ä½“çš„è¡¨
ï¼ˆ7ï¼‰partition:è¡¨ç¤ºä¸Šä¼ åˆ°æŒ‡å®šåˆ†åŒº

 create table student(id int, name string) stored as textfile partitioned by (month string) row format delimited fields terminated by '\t' location '/hive/student';
</code></pre>
<h3 id="2-æ’å…¥è¯­å¥">2. æ’å…¥è¯­å¥</h3>
<pre><code class="language-sql">1. åŸºæœ¬æ’å…¥
insert into table  student partition(month='201709') values(1,'wangwu'),(2,â€™zhaoliuâ€™);

2. æ ¹æ®æŸ¥è¯¢ç»“æœè¦†ç›–
insert overwrite table student partition(month='201708') select id, name from student where month='201709';

3. åˆ›å»ºè¡¨
create table if not exists student3 as select id, name from student;


</code></pre>
<h3 id="3-æŸ¥è¯¢è¯­å¥">3. æŸ¥è¯¢è¯­å¥</h3>
<ol>
<li>æ”¯æŒ as</li>
</ol>
<pre><code class="language-sql">select ename AS name, deptno dn from emp;
</code></pre>
<ol start="2">
<li>æ”¯æŒè¿ç®—ç¬¦æ“ä½œ</li>
</ol>
<pre><code class="language-sql">select sal +1 from emp;
</code></pre>
<ol start="3">
<li>æ”¯æŒå¸¸è§çš„èšåˆå‡½æ•°æ“ä½œ</li>
</ol>
<pre><code class="language-sql">count(*)
max(sal)
min(sal)
 sum(sal)
 avg(sal)
</code></pre>
<ol start="4">
<li>æ”¯æŒ limitè¯­å¥</li>
</ol>
<pre><code class="language-sql">select * from emp limit 5;
</code></pre>
<ol start="5">
<li>æ”¯æŒwhere</li>
</ol>
<pre><code class="language-sql">select * from emp where sal &gt;1000;
</code></pre>
<ol start="6">
<li>æ¯”è¾ƒç¬¦</li>
</ol>
<table>
<thead>
<tr>
<th>æ“ä½œç¬¦</th>
<th>æ”¯æŒçš„æ•°æ®ç±»å‹</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>A=B</td>
<td>åŸºæœ¬æ•°æ®ç±»å‹</td>
<td>å¦‚æœAç­‰äºBåˆ™è¿”å›TRUEï¼Œåä¹‹è¿”å›FALSE</td>
</tr>
<tr>
<td>A&lt;=&gt;B</td>
<td>åŸºæœ¬æ•°æ®ç±»å‹</td>
<td>å¦‚æœAå’ŒBéƒ½ä¸ºNULLï¼Œåˆ™è¿”å›TRUEï¼Œå…¶ä»–çš„å’Œç­‰å·ï¼ˆ=ï¼‰æ“ä½œç¬¦çš„ç»“æœä¸€è‡´ï¼Œå¦‚æœä»»ä¸€ä¸ºNULLåˆ™ç»“æœä¸ºNULL</td>
</tr>
<tr>
<td>A&lt;&gt;B,   A!=B</td>
<td>åŸºæœ¬æ•°æ®ç±»å‹</td>
<td>Aæˆ–è€…Bä¸ºNULLåˆ™è¿”å›NULLï¼›å¦‚æœAä¸ç­‰äºBï¼Œåˆ™è¿”å›TRUEï¼Œåä¹‹è¿”å›FALSE</td>
</tr>
<tr>
<td>A&lt;B</td>
<td>åŸºæœ¬æ•°æ®ç±»å‹</td>
<td>Aæˆ–è€…Bä¸ºNULLï¼Œåˆ™è¿”å›NULLï¼›å¦‚æœAå°äºBï¼Œåˆ™è¿”å›TRUEï¼Œåä¹‹è¿”å›FALSE</td>
</tr>
<tr>
<td>A&lt;=B</td>
<td>åŸºæœ¬æ•°æ®ç±»å‹</td>
<td>Aæˆ–è€…Bä¸ºNULLï¼Œåˆ™è¿”å›NULLï¼›å¦‚æœAå°äºç­‰äºBï¼Œåˆ™è¿”å›TRUEï¼Œåä¹‹è¿”å›FALSE</td>
</tr>
<tr>
<td>A&gt;B</td>
<td>åŸºæœ¬æ•°æ®ç±»å‹</td>
<td>Aæˆ–è€…Bä¸ºNULLï¼Œåˆ™è¿”å›NULLï¼›å¦‚æœAå¤§äºBï¼Œåˆ™è¿”å›TRUEï¼Œåä¹‹è¿”å›FALSE</td>
</tr>
<tr>
<td>A&gt;=B</td>
<td>åŸºæœ¬æ•°æ®ç±»å‹</td>
<td>Aæˆ–è€…Bä¸ºNULLï¼Œåˆ™è¿”å›NULLï¼›å¦‚æœAå¤§äºç­‰äºBï¼Œåˆ™è¿”å›TRUEï¼Œåä¹‹è¿”å›FALSE</td>
</tr>
<tr>
<td>A [NOT] BETWEEN B AND C</td>
<td>åŸºæœ¬æ•°æ®ç±»å‹</td>
<td>å¦‚æœAï¼ŒBæˆ–è€…Cä»»ä¸€ä¸ºNULLï¼Œåˆ™ç»“æœä¸ºNULLã€‚å¦‚æœAçš„å€¼å¤§äºç­‰äºBè€Œä¸”å°äºæˆ–ç­‰äºCï¼Œåˆ™ç»“æœä¸ºTRUEï¼Œåä¹‹ä¸ºFALSEã€‚å¦‚æœä½¿ç”¨NOTå…³é”®å­—åˆ™å¯è¾¾åˆ°ç›¸åçš„æ•ˆæœã€‚</td>
</tr>
<tr>
<td>A IS NULL</td>
<td>æ‰€æœ‰æ•°æ®ç±»å‹</td>
<td>å¦‚æœAç­‰äºNULLï¼Œåˆ™è¿”å›TRUEï¼Œåä¹‹è¿”å›FALSE</td>
</tr>
<tr>
<td>A IS NOT   NULL</td>
<td>æ‰€æœ‰æ•°æ®ç±»å‹</td>
<td>å¦‚æœAä¸ç­‰äºNULLï¼Œåˆ™è¿”å›TRUEï¼Œåä¹‹è¿”å›FALSE</td>
</tr>
<tr>
<td>IN(æ•°å€¼1, æ•°å€¼2)</td>
<td>æ‰€æœ‰æ•°æ®ç±»å‹</td>
<td>ä½¿ç”¨ INè¿ç®—æ˜¾ç¤ºåˆ—è¡¨ä¸­çš„å€¼</td>
</tr>
<tr>
<td>A [NOT]   LIKE B</td>
<td>STRING ç±»å‹</td>
<td>Bæ˜¯ä¸€ä¸ªSQLä¸‹çš„ç®€å•æ­£åˆ™è¡¨è¾¾å¼ï¼Œä¹Ÿå«é€šé…ç¬¦æ¨¡å¼ï¼Œå¦‚æœAä¸å…¶åŒ¹é…çš„è¯ï¼Œåˆ™è¿”å›TRUEï¼›åä¹‹è¿”å›FALSEã€‚Bçš„è¡¨è¾¾å¼è¯´æ˜å¦‚ä¸‹ï¼šâ€˜x%â€™è¡¨ç¤ºAå¿…é¡»ä»¥å­—æ¯â€˜xâ€™å¼€å¤´ï¼Œâ€˜%xâ€™è¡¨ç¤ºAå¿…é¡»ä»¥å­—æ¯â€™xâ€™ç»“å°¾ï¼Œè€Œâ€˜%x%â€™è¡¨ç¤ºAåŒ…å«æœ‰å­—æ¯â€™xâ€™,å¯ä»¥ä½äºå¼€å¤´ï¼Œç»“å°¾æˆ–è€…å­—ç¬¦ä¸²ä¸­é—´ã€‚å¦‚æœä½¿ç”¨NOTå…³é”®å­—åˆ™å¯è¾¾åˆ°ç›¸åçš„æ•ˆæœã€‚</td>
</tr>
<tr>
<td>A RLIKE B, A REGEXP B</td>
<td>STRING ç±»å‹</td>
<td>Bæ˜¯åŸºäºjavaçš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¦‚æœAä¸å…¶åŒ¹é…ï¼Œåˆ™è¿”å›TRUEï¼›åä¹‹è¿”å›FALSEã€‚åŒ¹é…ä½¿ç”¨çš„æ˜¯JDKä¸­çš„æ­£åˆ™è¡¨è¾¾å¼æ¥å£å®ç°çš„ï¼Œå› ä¸ºæ­£åˆ™ä¹Ÿä¾æ®å…¶ä¸­çš„è§„åˆ™ã€‚ä¾‹å¦‚ï¼Œæ­£åˆ™è¡¨è¾¾å¼å¿…é¡»å’Œæ•´ä¸ªå­—ç¬¦ä¸²Aç›¸åŒ¹é…ï¼Œè€Œä¸æ˜¯åªéœ€ä¸å…¶å­—ç¬¦ä¸²åŒ¹é…ã€‚</td>
</tr>
</tbody>
</table>
<pre><code class="language-sql"> select * from emp where sal LIKE '2%';
 select * from emp where sal LIKE '_2%';
 select * from emp where sal RLIKE '[2]';
</code></pre>
<ol start="7">
<li>é€»è¾‘è¿ç®—ç¬¦</li>
</ol>
<table>
<thead>
<tr>
<th>æ“ä½œç¬¦</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>AND</td>
<td>é€»è¾‘å¹¶</td>
</tr>
<tr>
<td>OR</td>
<td>é€»è¾‘æˆ–</td>
</tr>
<tr>
<td>NOT</td>
<td>é€»è¾‘å¦</td>
</tr>
</tbody>
</table>
<pre><code class="language-sql">select * from emp where sal&gt;1000 and deptno=30;
select * from emp where sal&gt;1000 or deptno=30;
select * from emp where deptno not IN (30, 20);
</code></pre>
<ol start="8">
<li>æ’åº</li>
</ol>
<p><strong>Order By</strong>ï¼šå…¨å±€æ’åºï¼Œåªæœ‰ä¸€ä¸ªReducer ,</p>
<pre><code class="language-sql">select * from emp order by sal desc;
</code></pre>
<p><strong>Sort By</strong>ï¼šå¯¹äºå¤§è§„æ¨¡çš„æ•°æ®é›†order byçš„æ•ˆç‡éå¸¸ä½ã€‚åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå¹¶ä¸éœ€è¦å…¨å±€æ’åºï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨<strong>sort by</strong>ã€‚Sort byä¸ºæ¯ä¸ªreduceräº§ç”Ÿä¸€ä¸ªæ’åºæ–‡ä»¶ã€‚æ¯ä¸ªReducerå†…éƒ¨è¿›è¡Œæ’åºï¼Œå¯¹å…¨å±€ç»“æœé›†æ¥è¯´ä¸æ˜¯æ’åºã€‚</p>
<pre><code class="language-sql">è®¾ç½®reduceæ•°é‡
set mapreduce.job.reduces=3;

æŸ¥çœ‹æ•°é‡
set mapreduce.job.reduces;

select * from emp sort by deptno desc;
</code></pre>
<p><strong>Distribute By</strong>ï¼š åœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦æ§åˆ¶æŸä¸ªç‰¹å®šè¡Œåº”è¯¥åˆ°å“ªä¸ªreducerï¼Œé€šå¸¸æ˜¯ä¸ºäº†è¿›è¡Œåç»­çš„èšé›†æ“ä½œã€‚<strong>distribute by</strong> å­å¥å¯ä»¥åšè¿™ä»¶äº‹ã€‚<strong>distribute by</strong>ç±»ä¼¼MRä¸­partitionï¼ˆè‡ªå®šä¹‰åˆ†åŒºï¼‰ï¼Œè¿›è¡Œåˆ†åŒºï¼Œç»“åˆsort byä½¿ç”¨ã€‚</p>
<pre><code class="language-sql">hive (default)&gt; set mapreduce.job.reduces=3;
hive (default)&gt; insert overwrite local directory '/opt/module/datas/distribute-result' select * from emp distribute by deptno sort by empno desc;
</code></pre>
<p>æ³¨æ„ï¼š</p>
<p>1ï¼  distribute byçš„åˆ†åŒºè§„åˆ™æ˜¯æ ¹æ®åˆ†åŒºå­—æ®µçš„hashç ä¸reduceçš„ä¸ªæ•°è¿›è¡Œæ¨¡é™¤åï¼Œä½™æ•°ç›¸åŒçš„åˆ†åˆ°ä¸€ä¸ªåŒºã€‚</p>
<p>2ï¼  Hiveè¦æ±‚DISTRIBUTE BYè¯­å¥è¦å†™åœ¨SORT BYè¯­å¥ä¹‹å‰ã€‚</p>
<h3 id="4-join-æ“ä½œ">4. join æ“ä½œ</h3>
<blockquote>
<p>â€‹	Hiveæ”¯æŒé€šå¸¸çš„SQL JOINè¯­å¥ï¼Œä½†æ˜¯åªæ”¯æŒç­‰å€¼è¿æ¥ï¼Œä¸æ”¯æŒéç­‰å€¼è¿æ¥ã€‚</p>
<p>ï¼ˆ1ï¼‰ä½¿ç”¨åˆ«åå¯ä»¥ç®€åŒ–æŸ¥è¯¢ã€‚</p>
<p>ï¼ˆ2ï¼‰ä½¿ç”¨è¡¨åå‰ç¼€å¯ä»¥æé«˜æ‰§è¡Œæ•ˆç‡ã€‚</p>
</blockquote>
<pre><code class="language-sql">select e.empno, e.ename, d.deptno, d.dname from emp e join dept d on e.deptno = d.deptno;
</code></pre>
<h4 id="å¤šè¡¨">å¤šè¡¨</h4>
<pre><code class="language-sql">hive (default)&gt;SELECT e.ename, d.dname, l.loc_name
FROM   emp e 
JOIN   dept d
ON     d.deptno = e.deptno 
JOIN   location l
ON     d.loc = l.loc;
</code></pre>
<p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ<strong>Hiveä¼šå¯¹æ¯å¯¹JOINè¿æ¥å¯¹è±¡å¯åŠ¨ä¸€ä¸ªMapReduceä»»åŠ¡</strong>ã€‚æœ¬ä¾‹ä¸­ä¼šé¦–å…ˆå¯åŠ¨ä¸€ä¸ªMapReduce jobå¯¹è¡¨eå’Œè¡¨dè¿›è¡Œè¿æ¥æ“ä½œï¼Œç„¶åä¼šå†å¯åŠ¨ä¸€ä¸ªMapReduce jobå°†ç¬¬ä¸€ä¸ªMapReduce jobçš„è¾“å‡ºå’Œè¡¨l;è¿›è¡Œè¿æ¥æ“ä½œã€‚</p>
<p>æ³¨æ„ï¼šä¸ºä»€ä¹ˆä¸æ˜¯è¡¨då’Œè¡¨lå…ˆè¿›è¡Œè¿æ¥æ“ä½œå‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºHiveæ€»æ˜¯æŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºæ‰§è¡Œçš„ã€‚</p>
<p>ä¼˜åŒ–ï¼šå½“å¯¹3ä¸ªæˆ–è€…æ›´å¤šè¡¨è¿›è¡Œjoinè¿æ¥æ—¶ï¼Œå¦‚æœæ¯ä¸ªonå­å¥éƒ½ä½¿ç”¨ç›¸åŒçš„è¿æ¥é”®çš„è¯ï¼Œé‚£ä¹ˆåªä¼šäº§ç”Ÿä¸€ä¸ªMapReduce jobã€‚</p>
<p><strong>hive joinç›®å‰ä¸æ”¯æŒåœ¨onå­å¥ä¸­ä½¿ç”¨è°“è¯or</strong></p>
<h3 id="5-åˆ†æ¡¶">5. åˆ†æ¡¶</h3>
<blockquote>
<p>â€‹	Hiveçš„åˆ†æ¡¶é‡‡ç”¨å¯¹åˆ†æ¡¶å­—æ®µçš„å€¼è¿›è¡Œå“ˆå¸Œï¼Œç„¶åé™¤ä»¥æ¡¶çš„ä¸ªæ•°æ±‚ä½™çš„æ–¹å¼å†³å®šè¯¥æ¡è®°å½•å­˜æ”¾åœ¨å“ªä¸ªæ¡¶å½“ä¸­</p>
</blockquote>
<pre><code class="language-sql">create table stu_buck(id int, name string)
clustered by(id) 
into 4 buckets
row format delimited fields terminated by '\t';

desc formatted stu_buck;

å¿…é¡»è®¾ç½®å‰ä¸¤éƒ¨
set hive.enforce.bucketing=true;

set mapreduce.job.reduces=1;

insert into table stu_buck select id, name from stu;
</code></pre>
<h4 id="åˆ†æ¡¶æŠ½æ ·æŸ¥è¯¢">åˆ†æ¡¶æŠ½æ ·æŸ¥è¯¢</h4>
<p>å¯¹äºéå¸¸å¤§çš„æ•°æ®é›†ï¼Œæœ‰æ—¶ç”¨æˆ·éœ€è¦ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªå…·æœ‰ä»£è¡¨æ€§çš„æŸ¥è¯¢ç»“æœè€Œä¸æ˜¯å…¨éƒ¨ç»“æœã€‚Hiveå¯ä»¥é€šè¿‡å¯¹è¡¨è¿›è¡ŒæŠ½æ ·æ¥æ»¡è¶³è¿™ä¸ªéœ€æ±‚ã€‚</p>
<pre><code class="language-sql">select * from stu_buck tablesample(bucket 1 out of 4 on id);
</code></pre>
<p>tablesampleæ˜¯æŠ½æ ·è¯­å¥ï¼Œè¯­æ³•ï¼šTABLESAMPLE(BUCKET x OUT OF y)</p>
<p>xè¡¨ç¤ºä»å“ªä¸ªbucketå¼€å§‹æŠ½å–ï¼Œå¦‚æœéœ€è¦å–å¤šä¸ªåˆ†åŒºï¼Œä»¥åçš„åˆ†åŒºå·ä¸ºå½“å‰åˆ†åŒºå·åŠ ä¸Šy ,xçš„å€¼å¿…é¡»å°äºç­‰äºyçš„å€¼ ,</p>
<p>yå¿…é¡»æ˜¯tableæ€»bucketæ•°çš„å€æ•°æˆ–è€…å› å­ã€‚</p>

								<span id="footnote"></span>
								<div id="warn"></div>
							</div>
							<div class="toc-container"><ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#ddl%E8%AF%AD%E5%8F%A5">DDLè¯­å¥</a>
<ul>
<li><a href="#1-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%9B%E5%BB%BA%E8%AF%AD%E5%8F%A5">1. æ•°æ®åº“åˆ›å»ºè¯­å¥</a></li>
<li><a href="#2-%E8%A1%A8%E5%88%9B%E5%BB%BA%E8%AF%AD%E5%8F%A5">2. è¡¨åˆ›å»ºè¯­å¥</a>
<ul>
<li><a href="#%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE-%E6%9C%AC%E5%9C%B0hdfs%E6%96%87%E4%BB%B6%E6%8F%92%E5%85%A5">æ’å…¥æ•°æ® - æœ¬åœ°/HDFSæ–‡ä»¶æ’å…¥</a></li>
</ul>
</li>
<li><a href="#3-%E5%88%86%E5%8C%BA%E8%A1%A8">3. åˆ†åŒºè¡¨</a></li>
<li><a href="#4-%E4%BF%AE%E6%94%B9%E8%A1%A8">4. ä¿®æ”¹è¡¨</a></li>
</ul>
</li>
<li><a href="#dml-%E8%AF%AD%E5%8F%A5">DML è¯­å¥</a>
<ul>
<li><a href="#1-%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE">1. æ·»åŠ æ•°æ®</a></li>
<li><a href="#2-%E6%8F%92%E5%85%A5%E8%AF%AD%E5%8F%A5">2. æ’å…¥è¯­å¥</a></li>
<li><a href="#3-%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5">3. æŸ¥è¯¢è¯­å¥</a></li>
<li><a href="#4-join-%E6%93%8D%E4%BD%9C">4. join æ“ä½œ</a>
<ul>
<li><a href="#%E5%A4%9A%E8%A1%A8">å¤šè¡¨</a></li>
</ul>
</li>
<li><a href="#5-%E5%88%86%E6%A1%B6">5. åˆ†æ¡¶</a>
<ul>
<li><a href="#%E5%88%86%E6%A1%B6%E6%8A%BD%E6%A0%B7%E6%9F%A5%E8%AF%A2">åˆ†æ¡¶æŠ½æ ·æŸ¥è¯¢</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
						</div>
						<div id="fullPage"><canvas id="canvas"></canvas></div>
				</article>
				<div id="eof"><span>EOF</span></div>
				<div class="round-shape-one"></div>
				<section>
					<div class="doc_comments">
							<div id="valine-container"></div>
					</div>
				</section>
			</div>
		</div>
	</div>
	<script>
		"use strict";
		! function () {
			for (var n = document.getElementsByTagName("pre"), e = n.length, s = 0; s < e; s++) {
				n[s].innerHTML = '<span class="line-number"></span>' + n[s].innerHTML + '<span class="cl"></span>';
				for (var a = n[s].innerHTML.split(/\n/).length, r = 0; r < a - 1; r++) {
					n[s].getElementsByTagName("span")[0].innerHTML += "<span>" + (r + 1) + "</span>"
				}
			}
		}();
		let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");
		window.addEventListener("scroll", event => {
			let fromTop = window.scrollY;
			mainNavLinks.forEach((link, index) => {
				let section = document.getElementById(decodeURI(link.hash).substring(1));
				let nextSection = null
				if (mainNavLinks[index + 1]) {
					nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(
						1));
				}
				if (section.offsetTop <= fromTop) {
					if (nextSection) {
						if (nextSection.offsetTop > fromTop) {
							link.classList.add("currentToc");
						} else {
							link.classList.remove("currentToc");
						}
					} else {
						link.classList.add("currentToc");
					}
				} else {
					link.classList.remove("currentToc");
				}
			});
		});
		var list = document.querySelectorAll(".katex");
		for (var i = 0; i < list.length; i++) {
			list[i].style.display = "unset"
		};
		var h = document.documentElement,
			b = document.body,
			st = "scrollTop",
			sh = "scrollHeight",
			progress = document.querySelector(".progress"),
			scroll;
		document.addEventListener("scroll", function () {
			scroll = (h[st] || b[st]) / ((h[sh] || b[sh]) - h.clientHeight) * 100;
			progress.style.setProperty("--scroll", scroll + "%")
		});
		var wxScale = new WxScale({
			fullPage: document.querySelector("#fullPage"),
			canvas: document.querySelector("#canvas")
		});
		var imgBox = document.querySelectorAll("#md_block img");
		for (var i = 0; i < imgBox.length; i++) {
			imgBox[i].onclick = function (e) {
				wxScale.start(this)
			}
		};
	</script>
	<style>
		#magnifyImg {
			position: fixed;
			left: 0;
			top: 0;
			text-align: center;
			width: 100%;
			display: none;
			z-index: 9999
		}

		#magnifyImg img {
			object-fit: contain;
			background: #eaecef;
			padding: 15px;
			border-radius: 10px;
			height: auto;
			width: auto;
			vertical-align: middle
		}
	</style>
	<a id="scrollUp"href="#top"style="position: fixed; z-index: 2147483647; display: block;"></a><div class="footer animated fadeInDown"><div class="site_footer"><div class="mysocials"><div class="my_socials"><a href="https://github.com/Anthony-Dong"title="github"><i class="iconfont icon-github"></i></a><a href="fanhaodong516@gmail.com"title="envelope"><i class="iconfont icon-envelope"></i></a></div></div><div class="copyright"id="copyright">You Are My Everything. <a href="mailto:574986060@qq.com" target="blank">Send Email</a>CopyrightÂ©2018-2020<a href="https://anthony-dong.github.io"style="margin:0;">Serence</a>.</div><span style="display: inline;margin-right:15px;">ğŸ‘<strong><span id="count-page">168271</span></strong></span><span id="busuanzi_container_page_pv"style="display: inline;"><span>ğŸ“š<strong>186</strong>posts</span></div></div><script>console.log("\n %c \u26a1Anthony-Dong's Blog:https://anthony-dong.gitee.io ,Github:https://github.com/Anthony-Dong ,Email:574986060@qq.com ,æœ‰äº‹æƒ…æ¬¢è¿è”ç³». \n\n","color: #ffffff; background: rgba(49, 49, 49, 0.85); padding:5px 0;border-radius:5px;",);</script>
	<script type="text/javascript" async src="https://anthony-dong.github.io/media/js/prism.js"></script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
	<link rel="shortcut icon"href="https://anthony-dong.github.io/favicon.ico"type="image/x-icon"/><meta name="viewport"content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/><meta name="apple-mobile-web-app-capable"content="yes"/><meta name="apple-mobile-web-app-status-bar-style"content="black"/><meta name="format-detection"content="telephone=no"/><meta name="renderer"content="webkit"/><meta name="description"content="Anthony-Dongçš„ä¸ªäººåšå®¢"/><meta charset="UTF-8"/><title>SpringBoot - Endpointå¼€å‘ | Anthony-Dong</title><link href="https://anthony-dong.github.io/styles/main.css"type="text/css"rel="stylesheet"/><script src="https://anthony-dong.github.io/media/js/magnify.min.js"></script>
	<link rel="canonical" href="https://anthony-dong.github.io/post/spring-endpoint-kai-fa/" />
</head>
<body>
	<div class="progress"></div><style>.progress{background:linear-gradient(to right,#87ceeb var(--scroll),transparent 0);background-repeat:no-repeat;position:fixed;width:100%;height:4px;z-index:1}</style><div class="darkmode-background"></div><div class="darkmode-layer"></div>
<noscript><p class="warn" >æœ¬é¡µé¢éœ€è¦æµè§ˆå™¨æ”¯æŒï¼ˆå¯ç”¨ï¼‰JavaScript</p></noscript><div class="header"><div class="logo_title"><div class="title animated fadeInDown"><a href="https://anthony-dong.github.io"><img alt="logo" style="display:inline-block;" src="https://anthony-dong.github.io/images/avatar.png"/></a><h1 title="Anthony-Dong" class="weaklink shift"><a  href="/">Anthony-Dong</a></h1>

<div class="navbar weaklink">
<div class="normal_nav">
<div class="bitcron_nav_container"><div class="bitcron_nav"><div class="bitcron_nav"><div style="display:flex;justify-content:center;"><nav class="mixed_site_nav_wrap site_nav_wrap"><ul class="mixed_site_nav site_nav sm sm-base">	<li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >é¦–é¡µ</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >å½’æ¡£</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/tags" class="selected active current nav__item" >æ ‡ç­¾</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >å…³äº</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/link" class="selected active current nav__item" >å‹é“¾</a></li></ul></nav>
<div style="float:right;margin-top:1em"><form id="gridea-search-form" data-update="1578893743252" action="/search/index.html"><input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="Search..."></form></div>
<div style="margin-left:0.5em;margin-top:1.2em"><input id="switch_default" onclick="mobileBtn()" type="checkbox" class="switch_default"><label for="switch_default" class="toggleBtn"></label></div></div>
<div class="clear clear_nav_inline_end"></div></div></div><div class="clear clear_nav_end"></div></div></div><div class="hamberger" href="javascript:void(0)" onclick="btn_toggle();"><i class="iconfont icon-category"></i></div></div></div></div>
<div id="hn" class="no-js hidden_nav animated fadeInDown"><div class="bitcron_nav_container"><div class="bitcron_nav"><nav class="mixed_site_nav_wrap site_nav_wrap"><ul class="mixed_site_nav site_nav sm sm-base">	<li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >é¦–é¡µ</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >å½’æ¡£</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/tags" class="selected active current nav__item" >æ ‡ç­¾</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >å…³äº</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/link" class="selected active current nav__item" >å‹é“¾</a></li></ul><div class="clear clear_nav_inline_end"></div></nav></div><div class="clear clear_nav_end"></div></div>
<div style="display:flex;justify-content:center;inline-block;text-align:center;margin-top:7%"><div><form id="gridea-search-form-1" data-update="1614223342286" action="/search/index.html"><input class="search-input" autocomplete="off" spellcheck="false" name="q"  placeholder="Search..." /></form></div><div style="margin-left:0.5em"><input id="switch_default_h" onclick="mobileBtn()" type="checkbox" class="switch_default"><label for="switch_default" class="toggleBtn"></label></div></div>
</div></div>
<script>function enableDarkmode(){document.body.classList.add("darkmode"),document.getElementById("switch_default").checked=1,document.getElementById("switch_default_h").checked=1}function removeDarkmode(){document.body.classList.remove("darkmode"),document.getElementById("switch_default").checked=0,document.getElementById("switch_default_h").checked=0}function getCookie(a){var b,c=new RegExp("(^| )"+a+"=([^;]*)(;|$)");return(b=document.cookie.match(c))?unescape(b[2]):null}cookie=getCookie("darkmode"),"enable"==cookie&&enableDarkmode(),window.matchMedia("(prefers-color-scheme: dark)").matches&&"disable"!==cookie&&(enableDarkmode(),document.cookie="darkmode=enable; path=/");var mobileBtn=function(){1==document.getElementById("switch_default").checked?(enableDarkmode(),document.cookie="darkmode=enable; path=/"):(removeDarkmode(),document.cookie="darkmode=disable; path=/")};</script>

	<div class="main">
		<div class="main-inner">
			<div class="content">
				<article class="post">
					<script src='https://anthony-dong.github.io/media/js/Valine.min.js'></script><style>.v .vlist .vcard .vh .vmeta .vat{font-size:.8125em;color:#9d7873;cursor:pointer;float:right}.v .vlist .vcard .vhead .vsys{display:none}</style ><script type="text/javascript">new Valine(ValineInfo)</script>
					<h2 class="post_title sm_margin"><a>SpringBoot - Endpointå¼€å‘</a></h2>
					<script>
						function lan() {
							if (document.getElementById("lan").innerText == "ç¹") {
								var s = document.getElementById("tongwenlet_cn");
								if (s != null) {
									document.body.removeChild(s)
								}
								var s = document.createElement("script");
								s.language = "javascript";
								s.type = "text/javascript";
								s.src = "https://cdn.jsdelivr.net/gh/qyxtim/Static@1.1/bookmarklet_tw.js";
								s.id = "tongwenlet_cn";
								document.body.appendChild(s);
								document.getElementById("lan").innerHTML = "ç®€"
							} else {
								if (document.getElementById("lan").innerText == "ç°¡") {
									var s = document.getElementById("tongwenlet_cn");
									if (s != null) {
										document.body.removeChild(s)
									}
									var s = document.createElement("script");
									s.language = "javascript";
									s.type = "text/javascript";
									s.src = "https://cdn.jsdelivr.net/gh/qyxtim/Static@1.1/bookmarklet_cn.js";
									s.id = "tongwenlet_cn";
									document.body.appendChild(s);
									document.getElementById("lan").innerHTML = "ç¹"
								}
							}
						};
					</script>
					<section class="post_details"><i class="iconfont icon-calendar"></i><span style="margin-right:15px">
							2019-12-18</span><i class="iconfont icon-browse"></i>
							<span class="leancloud_visitors" style="margin-right:15px" id="/post/spring-endpoint-kai-fa/">views <i class="leancloud-visitors-count" style="font-style: normal"></i></span>
							<span class="weaklink" style="margin-right:15px"><i class="iconfont icon-category"></i> <a
								href="https://anthony-dong.github.io/tag/30KjDURvPf/"
								class="tag">spring</a></span><i class="iconfont icon-caret-down"></i><span
							style="margin-right:15px">1208å­—</span><i
							class="iconfont icon-naozhong"></i><span
							style="margin-right:15px">7 min read</span><a id="lan"
							href="javascript:void(0);" onclick="lan();" title="è°ƒæ•´ç®€ç¹ä½“" style="margin-right:15px;">ç¹</a>
						</section>

						<div style="display:flex">
							<div class="md_block" id="md_block">
								<div class="round-shape-one"></div>
								<blockquote>
<p>â€‹	Identifies a type as being an actuator endpoint that provides information about the running application. Endpoints can be exposed over a variety of technologies including JMX and HTTP.</p>
<p>â€‹	Endpointå¯ä»¥ç»™æä¾›ä¸€äº›ä¿¡æ¯å…³äºrunning application, Endpointå¯ä»¥é€šè¿‡JMX å’ŒHTTPæŠ€æœ¯æ¥æš´éœ² ,</p>
<p>â€‹	é‡ç‚¹å°±æ˜¯ä¸€ä¸ªæ˜¯JMX å’ŒHTPPæŠ€æœ¯, è¿˜æœ‰ä»–å¯ä»¥æä¾›ä¸€äº›ä¿¡æ¯å…³äºJAVAè¿›ç¨‹, æ‰€ä»¥å¯ä»¥ç§°ä½œä¸ºè¿ç»´å·¥å…·</p>
</blockquote>
<h2 id="1-spring-è‡ªå®šä¹‰-endpoint">1. Spring è‡ªå®šä¹‰ Endpoint</h2>
<p>ç”³æ˜ä¸€ä¸ªEndpointéœ€è¦Beanä¸Šæ³¨å…¥<code>org.springframework.boot.actuate.endpoint.annotation.Endpoint</code> è¿™ä¸ªæ³¨è§£, å…¶å®è¿˜æœ‰ä¸€ä¸ª <code>JmxEndpoint</code></p>
<blockquote>
<p>â€‹	Most @Endpoint classes will declare one or more @ReadOperation, @WriteOperation, @DeleteOperation annotated methods which will be automatically adapted to the exposing technology (JMX, Spring MVC, Spring WebFlux, Jersey etc.).</p>
<p>â€‹	@Endpoint represents the lowest common denominator for endpoints and intentionally limits the sorts of operation methods that may be defined in order to support the broadest possible range of exposure technologies. If you need deeper support for a specific technology you can either write an endpoint that is filtered to a certain technology, or provide extension for the broader endpoint.</p>
</blockquote>
<p>é¦–å…ˆéœ€è¦åŠ å…¥ä¾èµ–</p>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p>å…¶æ¬¡é…ç½®åŠ å…¥</p>
<pre><code class="language-properties">management.endpoints.web.exposure.include=*
management.endpoint.health.show-details=always
</code></pre>
<p>Endpoint ç±» :</p>
<pre><code class="language-java">@Endpoint(id = &quot;nacos-config&quot;)
public class NacosConfigEndpoint {

    private static final Map&lt;String, Object&gt; MAP = new HashMap&lt;&gt;();

	// å¯¹åº”ç€ GET æ–¹æ³• , æ³¨æ„æ–¹æ³•ååˆ«é‡å¤,ä¼šæŠ›å‡ºå¼‚å¸¸
    @ReadOperation
    public Map&lt;String, Object&gt; get() {
        MAP.clear();
        MAP.put(&quot;GET&quot;, &quot;hello world&quot;);
        return MAP;

    }

    // å¯¹åº”ç€ POST æ–¹æ³•
    // @Selector ç›¸å½“äº @PathVariable
    @WriteOperation
    public Map&lt;String, Object&gt; post(@Selector String name) {
        MAP.clear();
        MAP.put(&quot;POST&quot;,name);
        return MAP;
    }

    // å¯¹åº”ç€ DELETE æ–¹æ³•
    @DeleteOperation
    public Map&lt;String, Object&gt; delete(@Selector String name) {
        MAP.clear();
        MAP.put(&quot;DELETE&quot;,name);
        return MAP;
    }
}
</code></pre>
<p>é…ç½®ç±» :</p>
<pre><code class="language-java">@Configuration
public class NacosConfigEndpointAutoConfiguration {

    @Bean
    @ConditionalOnMissingBean
    @ConditionalOnEnabledEndpoint
    public NacosConfigEndpoint nacosEndpoint() {
        return new NacosConfigEndpoint();
    }
}
</code></pre>
<p>å¯åŠ¨ æ—¥å¿—ä¼šå‘ç°æ³¨å†Œè¿›å»äº†,</p>
<pre><code class="language-java">2019-12-18 17:19:25.497  INFO 5572 --- [           main] s.b.a.e.w.s.WebMvcEndpointHandlerMapping : Mapped &quot;{[/actuator/nacos-config],methods=[GET],produces=[application/vnd.spring-boot.actuator.v2+json || application/json]}&quot; onto public java.lang.Object org.springframework.boot.actuate.endpoint.web.servlet.AbstractWebMvcEndpointHandlerMapping$OperationHandler.handle(javax.servlet.http.HttpServletRequest,java.util.Map&lt;java.lang.String, java.lang.String&gt;)
2019-12-18 17:19:25.497  INFO 5572 --- [           main] s.b.a.e.w.s.WebMvcEndpointHandlerMapping : Mapped &quot;{[/actuator/nacos-config/{name}],methods=[DELETE],produces=[application/vnd.spring-boot.actuator.v2+json || application/json]}&quot; onto public java.lang.Object org.springframework.boot.actuate.endpoint.web.servlet.AbstractWebMvcEndpointHandlerMapping$OperationHandler.handle(javax.servlet.http.HttpServletRequest,java.util.Map&lt;java.lang.String, java.lang.String&gt;)
2019-12-18 17:19:25.498  INFO 5572 --- [           main] s.b.a.e.w.s.WebMvcEndpointHandlerMapping : Mapped &quot;{[/actuator/nacos-config/{name}],methods=[POST],produces=[application/vnd.spring-boot.actuator.v2+json || application/json]}&quot; onto public java.lang.Object org.springframework.boot.actuate.endpoint.web.servlet.AbstractWebMvcEndpointHandlerMapping$OperationHandler.handle(javax.servlet.http.HttpServletRequest,java.util.Map&lt;java.lang.String, java.lang.String&gt;)

</code></pre>
<p>ç„¶åæµ‹è¯•æ¥å£</p>
<figure data-type="image" tabindex="1"><img src="https://tyut.oss-accelerate.aliyuncs.com/image/2019-12-18/240db8b8-e606-49cd-96d2-b7ee3e6a47cf.jpg?x-oss-process=style/template01" alt="" loading="lazy"></figure>
<p>æµ‹è¯•ç»“æœ å¾ˆæ˜¾ç„¶æ˜¯åŒ¹é…çš„</p>
<p>æœ€åä¸€ä¸ªé—®é¢˜ ,ä»€ä¹ˆæ˜¯JMXå“‡ , æˆ‘ä»¬ä¸Šé¢ç”¨çš„æ˜¯HTTPè¯·æ±‚å“‡, ä¸‹é¢è¿™ä¸ªå°±æ˜¯ ,å¯ä»¥é€šè¿‡jconsoleå·¥å…·æ‰“å¼€å¯ä»¥çœ‹åˆ°.</p>
<figure data-type="image" tabindex="2"><img src="https://tyut.oss-accelerate.aliyuncs.com/image/2019-12-18/fef92706-1dc8-42a6-b277-c0770eb6cee5.jpg?x-oss-process=style/template01" alt="" loading="lazy"></figure>
<h2 id="2-controllerendpoint-æ›´åŠ æ–¹ä¾¿">2. ControllerEndpoint æ›´åŠ æ–¹ä¾¿</h2>
<p><code>org.springframework.boot.actuate.endpoint.web.annotation.ControllerEndpoint</code> æˆ‘ä»¬ä¸Šè¿°çš„éƒ½æ˜¯ä½¿ç”¨æˆ‘ä»¬ä¸è®¤è¯†çš„æ³¨è§£, å¼€å‘ä¸å‹å¥½, è¿™ä¸ªæä¾›äº† , ä½†æ˜¯è¿™ä¸ªä¸ä¼šæä¾›JMX , æ‰€ä»¥ä¸èƒ½ä½¿ç”¨jconsole ç®¡ç†</p>
<blockquote>
<p>â€‹	Identifies a type as being an endpoint that is only exposed over Spring MVC or Spring WebFlux. Mapped methods must be annotated with @GetMapping, @PostMapping, @DeleteMapping, etc annotations rather than @ReadOperation, @WriteOperation, @DeleteOperation.</p>
</blockquote>
<p>æµ‹è¯•ç±»</p>
<pre><code class="language-java">@ControllerEndpoint(id = &quot;web-mvc&quot;, enableByDefault = true)
public class WebMVCControllerEndpoint {

    @ResponseBody
    @GetMapping(&quot;/get/{id}&quot;)
    public List&lt;String&gt; get(@PathVariable(&quot;id&quot;) String id) {
        return Arrays.asList(&quot;hello &quot;, id, &quot; !&quot;);
    }
}
</code></pre>
<p>åŠ å…¥é…ç½®</p>
<pre><code class="language-java">@Configuration
public class NacosConfigEndpointAutoConfiguration {

    @Bean
    @ConditionalOnMissingBean
    @ConditionalOnEnabledEndpoint
    public NacosConfigEndpoint nacosEndpoint() {
        return new NacosConfigEndpoint();
    }

    @Bean
    @ConditionalOnMissingBean
    @ConditionalOnEnabledEndpoint
    public WebMVCControllerEndpoint webMVCControllerEndpoint() {
        return new WebMVCControllerEndpoint();
    }

}
</code></pre>
<p>å†æ¬¡å¯åŠ¨</p>
<h2 id="2-java-è‡ªå®šä¹‰-jmx">2. Java è‡ªå®šä¹‰ JMX</h2>
<blockquote>
<p>â€‹	JMXï¼ˆJava Management Extensionsï¼Œå³Javaç®¡ç†æ‰©å±•ï¼‰æ˜¯ä¸€ä¸ªä¸ºåº”ç”¨ç¨‹åºã€è®¾å¤‡ã€ç³»ç»Ÿç­‰<a href="https://baike.baidu.com/item/%E6%A4%8D%E5%85%A5/7958584">æ¤å…¥</a>ç®¡ç†åŠŸèƒ½çš„æ¡†æ¶ã€‚JMXå¯ä»¥è·¨è¶Šä¸€ç³»åˆ—å¼‚æ„æ“ä½œç³»ç»Ÿå¹³å°ã€<a href="https://baike.baidu.com/item/%E7%B3%BB%E7%BB%9F%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/6842760">ç³»ç»Ÿä½“ç³»ç»“æ„</a>å’Œ<a href="https://baike.baidu.com/item/%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE/332131">ç½‘ç»œä¼ è¾“åè®®</a>ï¼Œçµæ´»çš„å¼€å‘æ— ç¼é›†æˆçš„ç³»ç»Ÿã€ç½‘ç»œå’ŒæœåŠ¡ç®¡ç†åº”ç”¨ã€‚</p>
</blockquote>
<p>æˆ‘ç®€å•copyäº†ä¸€ä»½demo</p>
<pre><code class="language-java">public interface HelloMBean {

    void echo(String msg);

    String getName();

    void setName(String name);
}
</code></pre>
<pre><code class="language-java">/*
 * è¯¥ç±»åç§°å¿…é¡»ä¸å®ç°çš„æ¥å£çš„å‰ç¼€ä¿æŒä¸€è‡´ï¼ˆå³MBeanå‰é¢çš„åç§°
 */
public class Hello implements HelloMBean {

    private String name;

    @Override
    public void echo(String msg) {
        System.out.println(&quot;name : &quot; + name + &quot; , echo : &quot; + msg);
    }

    @Override
    public String getName() {
        return this.name;
    }

    @Override
    public void setName(String name) {
        this.name = name;
    }
}
</code></pre>
<p>å¯åŠ¨ç±»</p>
<pre><code class="language-java">public class HelloAgent {
    public static void main(String[] args) throws JMException, Exception {

        // 1. é€šè¿‡å·¥å‚ç±»è·å–Mbean Serverï¼Œç”¨æ¥åšMbeançš„å®¹å™¨
        MBeanServer server = ManagementFactory.getPlatformMBeanServer();

        // 2. åŸŸå:name=Mbeanåç§°
        ObjectName helloName = new ObjectName(&quot;jmxBean:name=hello&quot;);

        //2. æœ€åå°†Helloè¿™ä¸ªç±»æ³¨å†Œåˆ°MbeanServerä¸­ï¼Œæ³¨å…¥éœ€è¦åˆ›å»ºä¸€ä¸ªObjectNameç±»
        server.registerMBean(new Hello(), helloName);

        System.in.read();
    }
}
</code></pre>
<p>æœ€åç”¨CMDæ‰§è¡Œä¸€ä¸‹ , jconsole , ç„¶åç”±äºæˆ‘ä»¬ä¸Šé¢æä¾›äº† getNameå’ŒsetNameæ–¹æ³•æ‰€ä»¥, æ­¤æ—¶æ˜¯å¯ä»¥è¾“å…¥å€¼çš„,ä½ æ¥å£ä¸­æ²¡æœ‰æä¾›,æ˜¯ä¸å¯ä»¥å±•ç¤ºå€¼çš„.æˆ–ä¿®æ”¹å€¼çš„</p>
<figure data-type="image" tabindex="3"><img src="https://tyut.oss-accelerate.aliyuncs.com/image/2019-12-18/b228821d-4bce-4a75-9dfc-600457b4d7c6.jpg?x-oss-process=style/template01" alt="" loading="lazy"></figure>
<p>æˆ‘ä»¬è°ƒç”¨ echoæ–¹æ³•, å¯ä»¥å¾€æ–¹æ³•ä¸­è¾“å…¥å‚æ•°</p>
<figure data-type="image" tabindex="4"><img src="https://tyut.oss-accelerate.aliyuncs.com/image/2019-12-18/c156edb6-2f97-41fd-b9d1-1abb57d01c8a.jpg?x-oss-process=style/template01" alt="" loading="lazy"></figure>
<p>æ­¤æ—¶æˆ‘ä»¬çœ‹æˆ‘ä»¬çš„è¾“å‡ºç»“æœ :</p>
<figure data-type="image" tabindex="5"><img src="https://tyut.oss-accelerate.aliyuncs.com/image/2019-12-18/6fc4c382-b736-40e7-a255-16ecccae33fa.jpg?x-oss-process=style/template01" alt="" loading="lazy"></figure>
<p>æ˜¯ä¸æ˜¯æˆåŠŸè°ƒç”¨æˆåŠŸäº† , è¿™å°±æ˜¯ JMX ,å…¶ä»–çš„è¯¦ç»†ä½¿ç”¨å°±ç™¾åº¦å§, åŸºæœ¬æµç¨‹å°±æ˜¯è¿™ä¸ª</p>

								<span id="footnote"></span>
								<div id="warn"></div>
							</div>
							<div class="toc-container"><ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#1-spring-%E8%87%AA%E5%AE%9A%E4%B9%89-endpoint">1. Spring è‡ªå®šä¹‰ Endpoint</a></li>
<li><a href="#2-controllerendpoint-%E6%9B%B4%E5%8A%A0%E6%96%B9%E4%BE%BF">2. ControllerEndpoint æ›´åŠ æ–¹ä¾¿</a></li>
<li><a href="#2-java-%E8%87%AA%E5%AE%9A%E4%B9%89-jmx">2. Java è‡ªå®šä¹‰ JMX</a></li>
</ul>
</li>
</ul>
</div>
						</div>
						<div id="fullPage"><canvas id="canvas"></canvas></div>
				</article>
				<div id="eof"><span>EOF</span></div>
				<div class="round-shape-one"></div>
				<section>
					<div class="doc_comments">
							<div id="valine-container"></div>
					</div>
				</section>
			</div>
		</div>
	</div>
	<script>
		"use strict";
		! function () {
			for (var n = document.getElementsByTagName("pre"), e = n.length, s = 0; s < e; s++) {
				n[s].innerHTML = '<span class="line-number"></span>' + n[s].innerHTML + '<span class="cl"></span>';
				for (var a = n[s].innerHTML.split(/\n/).length, r = 0; r < a - 1; r++) {
					n[s].getElementsByTagName("span")[0].innerHTML += "<span>" + (r + 1) + "</span>"
				}
			}
		}();
		let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");
		window.addEventListener("scroll", event => {
			let fromTop = window.scrollY;
			mainNavLinks.forEach((link, index) => {
				let section = document.getElementById(decodeURI(link.hash).substring(1));
				let nextSection = null
				if (mainNavLinks[index + 1]) {
					nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(
						1));
				}
				if (section.offsetTop <= fromTop) {
					if (nextSection) {
						if (nextSection.offsetTop > fromTop) {
							link.classList.add("currentToc");
						} else {
							link.classList.remove("currentToc");
						}
					} else {
						link.classList.add("currentToc");
					}
				} else {
					link.classList.remove("currentToc");
				}
			});
		});
		var list = document.querySelectorAll(".katex");
		for (var i = 0; i < list.length; i++) {
			list[i].style.display = "unset"
		};
		var h = document.documentElement,
			b = document.body,
			st = "scrollTop",
			sh = "scrollHeight",
			progress = document.querySelector(".progress"),
			scroll;
		document.addEventListener("scroll", function () {
			scroll = (h[st] || b[st]) / ((h[sh] || b[sh]) - h.clientHeight) * 100;
			progress.style.setProperty("--scroll", scroll + "%")
		});
		var wxScale = new WxScale({
			fullPage: document.querySelector("#fullPage"),
			canvas: document.querySelector("#canvas")
		});
		var imgBox = document.querySelectorAll("#md_block img");
		for (var i = 0; i < imgBox.length; i++) {
			imgBox[i].onclick = function (e) {
				wxScale.start(this)
			}
		};
	</script>
	<style>
		#magnifyImg {
			position: fixed;
			left: 0;
			top: 0;
			text-align: center;
			width: 100%;
			display: none;
			z-index: 9999
		}

		#magnifyImg img {
			object-fit: contain;
			background: #eaecef;
			padding: 15px;
			border-radius: 10px;
			height: auto;
			width: auto;
			vertical-align: middle
		}
	</style>
	<a id="scrollUp"href="#top"style="position: fixed; z-index: 2147483647; display: block;"></a><div class="footer animated fadeInDown"><div class="site_footer"><div class="mysocials"><div class="my_socials"><a href="https://github.com/Anthony-Dong"title="github"><i class="iconfont icon-github"></i></a><a href="fanhaodong516@gmail.com"title="envelope"><i class="iconfont icon-envelope"></i></a></div></div><div class="copyright"id="copyright">You Are My Everything. <a href="mailto:574986060@qq.com" target="blank">Send Email</a>CopyrightÂ©2018-2020<a href="https://anthony-dong.github.io"style="margin:0;">Serence</a>.</div><span style="display: inline;margin-right:15px;">ğŸ‘<strong><span id="count-page">168271</span></strong></span><span id="busuanzi_container_page_pv"style="display: inline;"><span>ğŸ“š<strong>186</strong>posts</span></div></div><script>console.log("\n %c \u26a1Anthony-Dong's Blog:https://anthony-dong.gitee.io ,Github:https://github.com/Anthony-Dong ,Email:574986060@qq.com ,æœ‰äº‹æƒ…æ¬¢è¿è”ç³». \n\n","color: #ffffff; background: rgba(49, 49, 49, 0.85); padding:5px 0;border-radius:5px;",);</script>
	<script type="text/javascript" async src="https://anthony-dong.github.io/media/js/prism.js"></script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
	<link rel="shortcut icon"href="https://anthony-dong.github.io/favicon.ico"type="image/x-icon"/><meta name="viewport"content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/><meta name="apple-mobile-web-app-capable"content="yes"/><meta name="apple-mobile-web-app-status-bar-style"content="black"/><meta name="format-detection"content="telephone=no"/><meta name="renderer"content="webkit"/><meta name="description"content="Anthony-Dong的个人博客"/><meta charset="UTF-8"/><title>MySQL - 基本语法 | Anthony-Dong</title><link href="https://anthony-dong.github.io/styles/main.css"type="text/css"rel="stylesheet"/><script src="https://anthony-dong.github.io/media/js/magnify.min.js"></script>
	<link rel="canonical" href="https://anthony-dong.github.io/post/mysql-xue-xi/" />
</head>
<body>
	<div class="progress"></div><style>.progress{background:linear-gradient(to right,#87ceeb var(--scroll),transparent 0);background-repeat:no-repeat;position:fixed;width:100%;height:4px;z-index:1}</style><div class="darkmode-background"></div><div class="darkmode-layer"></div>
<noscript><p class="warn" >本页面需要浏览器支持（启用）JavaScript</p></noscript><div class="header"><div class="logo_title"><div class="title animated fadeInDown"><a href="https://anthony-dong.github.io"><img alt="logo" style="display:inline-block;" src="https://anthony-dong.github.io/images/avatar.png"/></a><h1 title="Anthony-Dong" class="weaklink shift"><a  href="/">Anthony-Dong</a></h1>

<div class="navbar weaklink">
<div class="normal_nav">
<div class="bitcron_nav_container"><div class="bitcron_nav"><div class="bitcron_nav"><div style="display:flex;justify-content:center;"><nav class="mixed_site_nav_wrap site_nav_wrap"><ul class="mixed_site_nav site_nav sm sm-base">	<li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >首页</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >归档</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/tags" class="selected active current nav__item" >标签</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >关于</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/link" class="selected active current nav__item" >友链</a></li></ul></nav>
<div style="float:right;margin-top:1em"><form id="gridea-search-form" data-update="1578893743252" action="/search/index.html"><input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="Search..."></form></div>
<div style="margin-left:0.5em;margin-top:1.2em"><input id="switch_default" onclick="mobileBtn()" type="checkbox" class="switch_default"><label for="switch_default" class="toggleBtn"></label></div></div>
<div class="clear clear_nav_inline_end"></div></div></div><div class="clear clear_nav_end"></div></div></div><div class="hamberger" href="javascript:void(0)" onclick="btn_toggle();"><i class="iconfont icon-category"></i></div></div></div></div>
<div id="hn" class="no-js hidden_nav animated fadeInDown"><div class="bitcron_nav_container"><div class="bitcron_nav"><nav class="mixed_site_nav_wrap site_nav_wrap"><ul class="mixed_site_nav site_nav sm sm-base">	<li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >首页</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >归档</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/tags" class="selected active current nav__item" >标签</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >关于</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/link" class="selected active current nav__item" >友链</a></li></ul><div class="clear clear_nav_inline_end"></div></nav></div><div class="clear clear_nav_end"></div></div>
<div style="display:flex;justify-content:center;inline-block;text-align:center;margin-top:7%"><div><form id="gridea-search-form-1" data-update="1614223360682" action="/search/index.html"><input class="search-input" autocomplete="off" spellcheck="false" name="q"  placeholder="Search..." /></form></div><div style="margin-left:0.5em"><input id="switch_default_h" onclick="mobileBtn()" type="checkbox" class="switch_default"><label for="switch_default" class="toggleBtn"></label></div></div>
</div></div>
<script>function enableDarkmode(){document.body.classList.add("darkmode"),document.getElementById("switch_default").checked=1,document.getElementById("switch_default_h").checked=1}function removeDarkmode(){document.body.classList.remove("darkmode"),document.getElementById("switch_default").checked=0,document.getElementById("switch_default_h").checked=0}function getCookie(a){var b,c=new RegExp("(^| )"+a+"=([^;]*)(;|$)");return(b=document.cookie.match(c))?unescape(b[2]):null}cookie=getCookie("darkmode"),"enable"==cookie&&enableDarkmode(),window.matchMedia("(prefers-color-scheme: dark)").matches&&"disable"!==cookie&&(enableDarkmode(),document.cookie="darkmode=enable; path=/");var mobileBtn=function(){1==document.getElementById("switch_default").checked?(enableDarkmode(),document.cookie="darkmode=enable; path=/"):(removeDarkmode(),document.cookie="darkmode=disable; path=/")};</script>

	<div class="main">
		<div class="main-inner">
			<div class="content">
				<article class="post">
					<script src='https://anthony-dong.github.io/media/js/Valine.min.js'></script><style>.v .vlist .vcard .vh .vmeta .vat{font-size:.8125em;color:#9d7873;cursor:pointer;float:right}.v .vlist .vcard .vhead .vsys{display:none}</style ><script type="text/javascript">new Valine(ValineInfo)</script>
					<h2 class="post_title sm_margin"><a>MySQL - 基本语法</a></h2>
					<script>
						function lan() {
							if (document.getElementById("lan").innerText == "繁") {
								var s = document.getElementById("tongwenlet_cn");
								if (s != null) {
									document.body.removeChild(s)
								}
								var s = document.createElement("script");
								s.language = "javascript";
								s.type = "text/javascript";
								s.src = "https://cdn.jsdelivr.net/gh/qyxtim/Static@1.1/bookmarklet_tw.js";
								s.id = "tongwenlet_cn";
								document.body.appendChild(s);
								document.getElementById("lan").innerHTML = "简"
							} else {
								if (document.getElementById("lan").innerText == "簡") {
									var s = document.getElementById("tongwenlet_cn");
									if (s != null) {
										document.body.removeChild(s)
									}
									var s = document.createElement("script");
									s.language = "javascript";
									s.type = "text/javascript";
									s.src = "https://cdn.jsdelivr.net/gh/qyxtim/Static@1.1/bookmarklet_cn.js";
									s.id = "tongwenlet_cn";
									document.body.appendChild(s);
									document.getElementById("lan").innerHTML = "繁"
								}
							}
						};
					</script>
					<section class="post_details"><i class="iconfont icon-calendar"></i><span style="margin-right:15px">
							2019-09-10</span><i class="iconfont icon-browse"></i>
							<span class="leancloud_visitors" style="margin-right:15px" id="/post/mysql-xue-xi/">views <i class="leancloud-visitors-count" style="font-style: normal"></i></span>
							<span class="weaklink" style="margin-right:15px"><i class="iconfont icon-category"></i> <a
								href="https://anthony-dong.github.io/tag/ECQCi6IDpNB/"
								class="tag">数据库</a></span><i class="iconfont icon-caret-down"></i><span
							style="margin-right:15px">6072字</span><i
							class="iconfont icon-naozhong"></i><span
							style="margin-right:15px">29 min read</span><a id="lan"
							href="javascript:void(0);" onclick="lan();" title="调整简繁体" style="margin-right:15px;">繁</a>
						</section>

						<div style="display:flex">
							<div class="md_block" id="md_block">
								<div class="round-shape-one"></div>
								<h2 id="1-mysql-语法分类">1. MySQL 语法分类</h2>
<h3 id="1sql92-这个可以淘汰">1.sql92 (这个可以淘汰)</h3>
<h3 id="2sql99学习这个">2.sql99(学习这个)</h3>
<h3 id="3区别-下面来个练习">3.区别 下面来个练习</h3>
<pre><code class="language-sql">1. sql92的
SELECT ename,dname  FROM ept AS e , dept AS d WHERE e.dept_id=d.id
其中&quot;,&quot;就是笛卡尔积在sql92中

2. sql99的 需要 一个关键字 &quot;join&quot;  来实现笛卡尔积  (内连接 的 等值连接)
SELECT
	e.ename,
	d.dname
FROM
	ept e
JOIN dept d ON e.dept_id = d.id

只是省略了 inner 这个关键字

SELECT
	e.ename,
	d.dname
FROM
	ept e
INNER JOIN dept d ON e.dept_id = d.id
</code></pre>
<ul>
<li>区别1  实现笛卡尔积的方式不同 一个是 &quot;,  和 where条件&quot;  一个是 &quot;join 和 on 条件&quot;</li>
</ul>
<h2 id="2-mysql-查询语句执行循序">2. MySQL  查询语句执行循序</h2>
<figure data-type="image" tabindex="1"><img src="https://tyut.oss-cn-beijing.aliyuncs.com/image/2019-11-01/46448cf7-cabd-4a93-bbeb-eac333dc6d5a.jpg" alt="" loading="lazy"></figure>
<h2 id="3-join-表的连接">3. Join 表的连接</h2>
<h3 id="1-内连接jioninner-jion">1. 内连接(jion/inner jion)</h3>
<ul>
<li>
<p>等值连接(连接条件是 a.filed=b.filed)</p>
<pre><code class="language-sql">1. 需求 : 根据员工表的部门名称id查询出部门表中部门名称

2.查询出 员工表的员工名称和部门id
mysql&gt; select ename,dept_id from ept;
+-------+---------+
| ename | dept_id |
+-------+---------+
| 小明  |       1 |
| 小王  |       2 |
| 小李  |       3 |
| 小钱  |       2 |
+-------+---------

3. 查询出了 部门表中部门名称和部门id
mysql&gt; select id , dname from dept;
+----+-------+
| id | dname |
+----+-------+
|  1 | 运维  |
|  2 | 开发  |
|  3 | 产品  |
|  4 | 前端  |
+----+-------+

4. 我们可以将两个表连接起来 然后 第一章标的dept_id=B表的id 就好了,这就是等值连接
SELECT
	e.ename,
	d.dname
FROM
	ept e
INNER JOIN dept d ON e.dept_id = d.id

+-------+-------+
| ename | dname |
+-------+-------+
| 小明  | 运维  |
| 小王  | 开发  |
| 小李  | 产品  |
| 小钱  | 开发  |
+-------+-------+
</code></pre>
</li>
<li>
<p>非等值连接 (连接条件不是等值)</p>
<pre><code class="language-sql">SELECT
	e.ename,e.salary,s.level
FROM
	ept e
INNER JOIN
	salary_level s
ON
	e.salary BETWEEN s.salary-449 AND s.salary
</code></pre>
</li>
<li>
<p>自连接(自己连自己)   把两次查询的结果当做单独的表</p>
<figure data-type="image" tabindex="2"><img src="https://tyut.oss-cn-beijing.aliyuncs.com/image/2019-09-03/cef2c59f-27ce-4f70-a61d-728757c287ce.png?x-oss-process=style/template01" alt="" loading="lazy"></figure>
<pre><code class="language-sql">mysql&gt; select ename,p_id from ept;
+-------+------+
| ename | p_id |
+-------+------+
| 小明  | NULL |
| 小王  |    1 |
| 小李  |    2 |
| 小钱  |    1 |
+-------+------+

mysql&gt; select id , ename from ept;
+----+-------+
| id | ename |
+----+-------+
|  1 | 小明  |
|  2 | 小王  |
|  3 | 小李  |
|  4 | 小钱  |
+----+-------+

我们可以看成  第一个表为 A表 ;第二个表为B表;只要A表的 p_id 等于 B 表的 id  就可以实现了


SELECT
	a.ename,
	b.ename as leader_name
FROM
	ept a
INNER JOIN ept b ON a.p_id = b.id

+-------+-------------+
| ename | leader_name |
+-------+-------------+
| 小王  | 小明        |
| 小钱  | 小明        |
| 小李  | 小王        |
+-------+-------------+
</code></pre>
</li>
</ul>
<h3 id="2-外连接left-join-right-outer-join">2. 外连接(left join / right outer join)</h3>
<ul>
<li>
<p>什么是外连接?</p>
<blockquote>
<p>​	我们不难发现 我们在等值连接中只会取到A和B表都符合条件的内容;这就是内连接</p>
<p>有的时候我们需要 我们也要查询出B表中应该有的数据但是没匹配的数据</p>
<p>所以区分 内外连接的关键字是 left 和 right</p>
</blockquote>
</li>
<li>
<p>左外连接(LEFT JOIN/LEFT OUTER JOIN)</p>
<pre><code class="language-sql">同上面 内连接那个需求,我们需要显示出没有领导的员工

SELECT
	a.ename,
	b.ename AS leader_name
FROM
	ept a
LEFT JOIN ept b ON a.p_id = b.id

+-------+-------------+
| ename | leader_name |
+-------+-------------+
| 小王  | 小明        |
| 小钱  | 小明        |
| 小李  | 小王        |
| 小明  | NULL        |
+-------+-------------+
</code></pre>
</li>
<li>
<p>右外连接(right JOIN/right OUTER JOIN)</p>
<pre><code class="language-shell">1. 需求: 查询出部门对应的员工姓名,没有的也要显示

2.查询出 员工表的员工名称和部门id
mysql&gt; select ename,dept_id from ept;
+-------+---------+
| ename | dept_id |
+-------+---------+
| 小明  |       1 |
| 小王  |       2 |
| 小李  |       3 |
| 小钱  |       2 |
+-------+---------

3. 查询出了 部门表中部门名称和部门id
mysql&gt; select id , dname from dept;
+----+-------+
| id | dname |
+----+-------+
|  1 | 运维  |
|  2 | 开发  |
|  3 | 产品  |
|  4 | 前端  |
+----+-------+

4. 我们就需要 B表全部显示;就算不匹配的

SELECT
	d.dname,
	e.ename
FROM
	dept d
LEFT JOIN ept e ON d.id = e.dept_id

+-------+-------+
| dname | ename |
+-------+-------+
| 运维  | 小明  |
| 开发  | 小王  |
| 产品  | 小李  |
| 开发  | 小钱  |
| 前端  | NULL  |
+-------+-------+

所以 不难看出来 我们的需求实现了;就算是前端么有人,但是他也全部显示了;

5. 其中关于左和右 是建立在 join 这个词 左边还是右边的 你的表在join这个词左边就是左连接
</code></pre>
<h3 id="3-全连接">3. 全连接</h3>
<pre><code class="language-sql">1. 需求 我们需要 查询出每个员工对应的领导名称,以及每个员工对应的部门名称,以及每个员工对应的薪水等级
2. 三张表结构
mysql&gt; select * from ept ;
+----+-------+---------+---------+------+
| id | ename | salary  | dept_id | p_id |
+----+-------+---------+---------+------+
|  1 | 小明  | 1800.00 |       1 | NULL |
|  2 | 小王  | 1200.00 |       2 |    1 |
|  3 | 小李  | 2500.00 |       3 |    2 |
|  4 | 小钱  | 2000.00 |       2 |    1 |
+----+-------+---------+---------+------+

mysql&gt; select * from dept ;
+----+-------+
| id | dname |
+----+-------+
|  1 | 运维  |
|  2 | 开发  |
|  3 | 产品  |
|  4 | 前端  |
+----+-------+

mysql&gt; select * from salary_level;
+----+--------+-------+
| id | salary | level |
+----+--------+-------+
|  1 |   2500 |     1 |
|  2 |   2000 |     2 |
|  3 |   1500 |     3 |
|  4 |   1000 |     4 |
+----+--------+-------+


3. 我们需要 a表连接a表  a表连接b表  a表连接c表 

select 
a.ename,b.ename as leader_name,c.dname as dept,d.level as level
from ept a
left join ept b
on a.p_id=b.id
join dept c
on a.dept_id=c.id
join salary_level d
on a.salary between d.salary and d.salary+499;

+-------+-------------+------+-------+
| ename | leader_name | dept | level |
+-------+-------------+------+-------+
| 小李  | 小王        | 产品 |     1 |
| 小钱  | 小明        | 开发 |     2 |
| 小明  | NULL        | 运维 |     3 |
| 小王  | 小明        | 开发 |     4 |
+-------+-------------+------+-------+

</code></pre>
</li>
</ul>
<h2 id="4-子查询">4.  子查询</h2>
<h3 id="1-其实-就是把-子查询当做-一个-条件参数">1. 其实 就是把 子查询当做 一个 条件参数</h3>
<pre><code class="language-sql">1. 需求 查询出员工表中薪水大于平均薪水的员工的姓名和薪水
2. 查询emp 表 情况
mysql&gt; select * from emp;
+-------+--------+-----------+------+------------+---------+---------+--------+
| EMPNO | ENAME  | JOB       | MGR  | HIREDATE   | SAL     | COMM    | DEPTNO |
+-------+--------+-----------+------+------------+---------+---------+--------+
|  7396 | SMITH  | CLERK     | 7902 | 1980-12-17 |  800.00 |    NULL |     20 |
|  7499 | ALLEN  | SALESMAN  | 7698 | 1981-02-20 | 1600.00 |  300.00 |     30 |
|  7521 | WARD   | SALESMAN  | 7698 | 1981-02-22 | 1250.00 |  500.00 |     30 |
|  7566 | JONES  | MANAGER   | 7839 | 1981-04-02 | 2975.00 |    NULL |     20 |
|  7654 | MARTIN | SALESMAN  | 7698 | 1981-09-28 | 1250.00 | 1400.00 |     30 |
|  7698 | BLAKE  | MANAGER   | 7839 | 1981-05-01 | 2850.00 |    NULL |     30 |
|  7782 | CLARK  | MANAGER   | 7839 | 1981-06-09 | 2450.00 |    NULL |     20 |
|  7788 | SCOTT  | ANALYST   | 7566 | 1987-04-19 | 3000.00 |    NULL |     20 |
|  7839 | KING   | PRESIDENT | NULL | 1981-11-17 | 5000.00 |    NULL |     10 |
|  7844 | TURNER | SALESMAN  | 7698 | 1981-09-08 | 1500.00 |    0.00 |     30 |
|  7876 | ADAMS  | CLERK     | 7788 | 1987-05-23 | 1100.00 |    NULL |     20 |
|  7900 | JAMES  | CLERK     | 7698 | 1981-12-03 |  950.00 |    NULL |     30 |
|  7902 | FORD   | ANALYST   | 7566 | 1981-12-03 | 3000.00 |    NULL |     20 |
|  7934 | MILLER | CLERK     | 7782 | 1982-01-23 | 1300.00 |    NULL |     10 |
+-------+--------+-----------+------+------------+---------+---------+--------+

3. 就是嵌套查询

SELECT
	a.ENAME,
	a.SAL
FROM
	emp a
WHERE
	a.SAL &gt; (
		SELECT
			AVG(emp.SAL) AS avgsal
		FROM
			emp
	)

+-------+---------+
| ENAME | SAL     |
+-------+---------+
| JONES | 2975.00 |
| BLAKE | 2850.00 |
| CLARK | 2450.00 |
| SCOTT | 3000.00 |
| KING  | 5000.00 |
| FORD  | 3000.00 |
+-------+---------+
	
</code></pre>
<hr>
<h3 id="2-就是把子查询-当做-一个-临时表">2.  就是把子查询 当做 一个 临时表</h3>
<pre><code class="language-sql">1. 需求  找出每个部门的平均薪水,并且显示出每个部门的薪水等级

2. 分析 找出每个部门的平均薪水 就需要 先按部门分组,然后求出每个部门的平均薪水

SELECT
	e.DEPTNO as DEPTNO,
	AVG(e.SAL) AS avgsal
FROM
	emp e
GROUP BY
	e.DEPTNO
+--------+-------------+
| DEPTNO | avgsal      |
+--------+-------------+
|     10 | 3150.000000 |
|     20 | 2220.833333 |
|     30 | 1566.666667 |
+--------+-------------+

3.查看薪水表
mysql&gt; select * from salgrade;
+-------+-------+-------+
| GRADE | LOSAL | HISAL |
+-------+-------+-------+
|     1 |   700 |  1200 |
|     2 |  1201 |  1400 |
|     3 |  1401 |  2000 |
|     4 |  2001 |  3000 |
|     5 |  3001 |  9999 |
+-------+-------+-------+
4. 我们应该把 表1当做 a表  表二当做 b表 此时做连接
select  a.DEPTNO,b.GRADE
from a
join b
on a.avgsal between b.LOSAL and b.HISAL

此时我们是不是 可以改写一下 

SELECT
	a.DEPTNO,
	a.avgsal,
	b.GRADE
FROM
	(
		SELECT
			e.DEPTNO AS DEPTNO,
			AVG(e.SAL) AS avgsal
		FROM
			emp e
		GROUP BY
			e.DEPTNO
	) a
JOIN salgrade b 
ON a.avgsal BETWEEN b.LOSAL AND b.HISAL;

+--------+-------------+-------+
| DEPTNO | avgsal      | GRADE |
+--------+-------------+-------+
|     10 | 3150.000000 |     5 |
|     20 | 2220.833333 |     4 |
|     30 | 1566.666667 |     3 |
+--------+-------------+-------+
</code></pre>
<h2 id="5-union-表的连接">5. union 表的连接</h2>
<p>1.使用场景 : 连接两个一样的表;</p>
<pre><code class="language-sql">1. 查询出工作为 &quot;CLERK&quot; 和 &quot;SALESMAN&quot;的 员工姓名

2. 第一种实现结果 
SELECT
	ename,
	job
FROM
	emp
WHERE
	JOB = &quot;CLERK&quot;
OR JOB = &quot;ANALYST&quot;

3. 第二种实现
SELECT
	ename,
	job
FROM
	emp
WHERE
	job IN ('CLERK', 'ANALYST')

4. 第三种实现

SELECT
	ename,
	job
FROM
	emp
WHERE
	job = &quot;CLERK&quot;
UNION
	SELECT
		ename,
		job
	FROM
		emp
	WHERE
		job = &quot;ANALYST&quot;

+--------+---------+
| ename  | job     |
+--------+---------+
| SMITH  | CLERK   |
| ADAMS  | CLERK   |
| JAMES  | CLERK   |
| MILLER | CLERK   |
| SCOTT  | ANALYST |
| FORD   | ANALYST |
+--------+---------+

显然 union  必须 要求两个组合的 表 必须 字段长度相同 ;而且 有意义点的就是 两个表 字段含义一样
</code></pre>
<h2 id="6-constraint-表的约束">6. constraint 表的约束</h2>
<blockquote>
<p>非空约束 <strong>not null</strong></p>
<p>唯一性约束 , 不可重复   <strong>unique</strong></p>
<p>给约束起别名  <strong>constraint</strong>  name</p>
<p>联合约束主键约束   primary key  与 not no unique 的效果相同  ,</p>
<p>还可以添加索引 ,每张表必须有主键,不然就是无效表</p>
<p>主键值不能修改的单一主键联合主键(但是 一张表只能有一个主键,,只有两个一样时才会出现主键不同)自然主键业务主键自增主键值   auto_increment   只要你一旦使用过 , 就不能重复使用外键约束 foreign key 外简约束外键字段外键值</p>
</blockquote>
<pre><code class="language-sql">drop table if exists t_user;

create table t_user(
	id int(2) not null,
    name varchar(10) unique,
    email varchar(20),
    phone varchar(15),
    cd_card char(18) not no unique,
    constraint t_user_email_phone_unique unique(email,phone),
    primary key(id,name) 
)



constraint  英文单词 翻译叫  约束   一般写法就是 constraint + 一个字段名 +条件

如果我们给一个表添加外键约束
子 ----- 父
constraint t_student_classes_fk foreign key(classno)  references t_class(cno)

子表的数据也就是 外键值可以为空 ,称为孤儿数据
父表中的引用字段必须具有唯一性
创建表要先创建父表再创建子表
</code></pre>
<h2 id="7-cascade-级联操作">7. cascade 级联操作</h2>
<pre><code class="language-sql">1.级联删除 on delete cascade  (当我删除 父表(引用表)中的数据时,子表中的相关数据也要被删除   )
cascade 意思是 级联 ,瀑布

2.给学生表添加一个级联删除 
alter table student drop foreign key t_student_classes_fk;

alter table stadent add constraint t_student_classes_fk foreign key(classno) 
reference t_class(cno) on delete cascade; 


3.级联更新  on update cascade (更新父表,子表中引用的字段也要被更新)

alter table student add constraint t_class_student_fk foreign key(classno)
reference t_class(cno) on update cascade


* 注意就是 更新和删除建立在外键之上

</code></pre>
<h2 id="8-transaction-事务">8. transaction 事务</h2>
<p>mysql数据库中 在操作数据库时 是 设置的自动提交事务</p>
<p>你可以 根据 	<code>show variables like '%commit%'</code>;  看到</p>
<pre><code class="language-sql">mysql&gt; show variables like '%commit%';
+-----------------------------------------+-------+
| Variable_name                           | Value |
+-----------------------------------------+-------+
| autocommit                              | ON    |
| binlog_group_commit_sync_delay          | 0     |
| binlog_group_commit_sync_no_delay_count | 0     |
| binlog_order_commits                    | ON    |
| innodb_api_bk_commit_interval           | 5     |
| innodb_commit_concurrency               | 0     |
| innodb_flush_log_at_trx_commit          | 1     |
| slave_preserve_commit_order             | OFF   |
+-----------------------------------------+-------+
8 rows in set, 1 warning (0.00 sec)
</code></pre>
<ol>
<li>
<p>开启事务</p>
<pre><code class="language-sql">1.手动开启事务
start transaction ;
2. 执行 DML语句
inset into student (name) values ('小王');
3.手动提交
commit;




4.如果我们关闭事务  set autocommit=off
执行 DML语句

然后 commit;




</code></pre>
</li>
<li>
<p>mysql的四种 隔离级别</p>
<pre><code class="language-sql">1. 查看当前会话的隔离级别  
mysql&gt; select @@tx_isolation;
+-----------------+
| @@tx_isolation  |
+-----------------+
| REPEATABLE-READ |
+-----------------+
1 row in set, 1 warning (0.00 sec)

2. 查看当前 全局的隔离级别
mysql&gt; select @@global.tx_isolation;
+-----------------------+
| @@global.tx_isolation |
+-----------------------+
| REPEATABLE-READ       |
+-----------------------+
1 row in set, 1 warning (0.00 sec)


修改全局的隔离级别
set global transaction isolation level read committed


3. 读未提交(read uncommitted) : 就是当A选择开启事务,执行了一条DML语句,此时未提交;然后B也开起了事务去读取数据,结果读取到了A修改后的数据,这条数据 为 脏读;

4. 读已提交(read committed) : 就是A选择开起了事务,然后执行了一条DML语句,此时开着事务的B无法看到A执行后的结果,当A提交后,此时开着事务的B 就能看到 commit后的数据; 此时出现的现象叫做 不可重复读;

5. 可重复读(repeatable read) : 就是A,B开启着事务,A提交的数据,B无法获取到 ;此时这种现象叫做幻象读;保证了B的数据开启事务时刻数据的一致性

6. 串行化(serializable): 同一时刻操作数据库的只有一个人;但是可以多人开启事务;只能等待第一个人提交事务或者回滚事务,另外一个人才能执行数据库操作;


</code></pre>
</li>
</ol>
<h2 id="9-index-索引">9. index 索引</h2>
<ol>
<li>
<p>主键索引 ,添加主键会自动添加主键索引</p>
</li>
<li>
<p>外键索引,</p>
</li>
<li>
<p>索引检索方式</p>
<ul>
<li>全表扫描</li>
<li>索引检索</li>
</ul>
</li>
<li>
<p>很少使用 dml操作时,适合添加索引</p>
</li>
<li>
<p>经常出现在where语句中</p>
</li>
<li>
<p>创建索引</p>
<pre><code class="language-sql">create index tudent_name_index on student(name);


查看索引
show index from table_name


删除索引
drop index  tudent_name_index on student;
</code></pre>
</li>
<li>
<p>索引也要被存储在文件中</p>
</li>
</ol>
<h2 id="10-view-视图">10. view 视图</h2>
<ol>
<li>
<p>创建视图</p>
<pre><code class="language-sql">1. create view student_view as select * from student

2. 当我们 show create view student_view时

mysql&gt; show create view dept_view;

| View      | Create View                                                                                                                                           
| dept_view | CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `dept_view` AS select `dept`.`DEPTNO` AS `DEPTNO`,`dept`.`DNAME` AS `DNAME`,`dept`.`LOC` AS `LOC` from `dept` | gbk                  | gbk_chinese_ci 


我们可以发现 他只是 在原有的表上创建了一个 select 语句


3. 删除视图
drop view dept_view;
或
drop view if exists dept_view;
</code></pre>
</li>
<li>
<p>索引 视图 和 原表中的数据 是个影子关系</p>
</li>
<li>
<p>视图的作用</p>
<ul>
<li>
<p>隐藏表的细节 比如  <code>create view dept_view as select depton as a ,dname as b from dept</code> 我们会发现 我们拿到的表 只有 a , b 字段  只能考 字段操作</p>
</li>
<li>
<p>类似与 创建临时表,提高查询效率,以及可用性,</p>
<pre><code class="language-sql">create  view  emp_dept as
select a.ename,b.dname
from emp a
join dept b
on a.deptno=b.deptno


然后直接 
select* from emp_dept;

这个可以提高检索效率和重复利用率
</code></pre>
</li>
</ul>
</li>
</ol>
<h2 id="11-mysql-存储引擎">11. MySQL 存储引擎</h2>
<h3 id="1mysql有9种存储引擎">1.mysql有9种存储引擎</h3>
<pre><code class="language-sql">mysql&gt; show engines ;
+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+
| Engine             | Support | Comment                                                        | Transactions | XA   | Savepoints |
+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+
| InnoDB             | DEFAULT | Supports transactions, row-level locking, and foreign keys     | YES          | YES  | YES        |
| MRG_MYISAM         | YES     | Collection of identical MyISAM tables                          | NO           | NO   | NO         |
| MEMORY             | YES     | Hash based, stored in memory, useful for temporary tables      | NO           | NO   | NO         |
| BLACKHOLE          | YES     | /dev/null storage engine (anything you write to it disappears) | NO           | NO   | NO         |
| MyISAM             | YES     | MyISAM storage engine                                          | NO           | NO   | NO         |
| CSV                | YES     | CSV storage engine                                             | NO           | NO   | NO         |
| ARCHIVE            | YES     | Archive storage engine                                         | NO           | NO   | NO         |
| PERFORMANCE_SCHEMA | YES     | Performance Schema                                             | NO           | NO   | NO         |
| FEDERATED          | NO      | Federated MySQL storage engine                                 | NULL         | NULL | NULL       |
+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+
9 rows in set (0.01 sec)


1. 默认是 innodb 
2. 可以修改 my.ini 设置默认存储引擎 以及一些默认配置
3. 修改表的存储引擎  alter table table_name engine=MyISAM


</code></pre>
<h3 id="2-innodb">2. InnoDB</h3>
<p>​	1.主要记住 innodb 支持<strong>事务操作</strong></p>
<pre><code>2. 使用**外键** 以及  级联删除和级联更新也需要使用 innodb engine
</code></pre>
<pre><code>3. 行及锁定
4. mysql数据库崩溃 后 提供自动恢复
5. 表空间的概念
6. 提供 acid 的兼容
</code></pre>
<h3 id="3-myisam">3. MyISAM</h3>
<pre><code>1. 表存储格式
 - 表结构 .frm
 - 表数据  .myd
 - 表索引  .myi
2. 可以压缩文件,节省空间
</code></pre>
<h3 id="4-memory">4. MEMORY</h3>
<ol>
<li>存储的数据在 内存中 ,所以 很快</li>
<li>索引也被存储在内存中</li>
<li>字段属性不能包含text,blob等大的地段</li>
<li></li>
</ol>
<h2 id="12-数据库设计的三范式">12. 数据库设计的三范式</h2>
<ol>
<li>第一范式 :  要求有主键 , 且每个字段保证其原子性,且不重复</li>
<li>第二范式 : 数据库中的非主键字段严格和主键字段有关联 ,其自身不能产生部分依赖 (尽量不要使用联合主键)
<ul>
<li>多对多 时 ;建立 中间表</li>
</ul>
</li>
<li>第三范式:非主键字段不能产生传递依赖 ;</li>
</ol>
<h2 id="13-mysql-锁的问题">13. MySql 锁的问题</h2>
<h3 id="1表锁互斥锁">1.表锁(互斥锁)</h3>
<ul>
<li><strong>读锁</strong> :<code>lock table clazz read</code>; 此时只能读数据,无法修改数据;只有当 unlock tables; 才可以执行修改操作</li>
<li><strong>写锁</strong>:<code>lock table clazz write</code>; 此时只能写数据,无法进行读取数据;只有当 unlock tables; 才可以执行修改操作</li>
<li>这种使用场景一般是 锁表 ;做大的维护操作时;可以锁表 ; 读写互斥</li>
</ul>
<h3 id="2行锁">2.行锁</h3>
<ul>
<li>
<p>他不锁住整个数据库,开启事务,只会锁住操作的同一张表(比如  A B 两个人同时开启事务,A对表a操作,B对表b操作,此时两个行为都可以执行,不需要等待一方commit,当B表尝试修改A表时;此时就会等待,必须等待A提交才能执行)</p>
</li>
<li>
<p>其实就是上面的四种事务;这里不做解释了;</p>
</li>
</ul>
<h3 id="3-悲观锁">3. 悲观锁</h3>
<pre><code class="language-sql">1. 就是mysql默认的事务等级 
他能保证 每一时刻只能有一个人操作数据库,除非你提交了;不然无法更新
比如 两个人 A和B 
每次执行操作 都要开启事务 默认事务是 可重复读(repeatable read)  这个级别;
count=2
当 A 执行 update oreders set count=count-1 where id=1 and count&gt;=1;
此时 B也去执行 update oreders set count=count-2 where id=1 and count&gt;=2;
由于A先执行 ;所以此时B 是卡住的;只有 A提交了;B才能修改;此时 B中查到的count数据已经修改过了;所以返回结果为false;



但是 在事务中 如果使用了 这个 select * from oreders for update; 他可以防止读取到的数据发生不可重复读现象;其实可以理解为 带着 update的select语句; 你执行了 update 本身就锁住了;他其实一句带着两句;他是个 互斥锁;你就算你是读,但是你执行了这个操作,别人也无法写执行;



但是 就算是我们在 开启事务中 使用select * from oreders 读到的是假数据 仍然不影响我们执行 update操作时;数据的读取问题 ;比如上面那个问题


</code></pre>
<figure data-type="image" tabindex="3"><img src="https://tyut.oss-cn-beijing.aliyuncs.com/image/2019-09-04/510d874e-d23b-44c9-a851-579954481f6f.png?x-oss-process=style/template01" alt="" loading="lazy"></figure>
<h3 id="4乐观锁">4.乐观锁</h3>
<pre><code class="language-sql">1. 比如说 我们在 查询的时候 带上一个 version ,更新的时候 需要带上这个version

SELECT  count,version FROM orders WHERE id =1   把查询到version数据加给第二行,

每次更新都需要这样子,如果一个人更新成功,那么version数据就变化了,那么另外一个人拿到的锁,他打不开,找不到数据就无法更新

UPDATE orders SET count=count-5 , version=version+5 WHERE id=1 AND version=2 AND count&gt;=5

这样可以防止超卖和加锁
</code></pre>
<h2 id="qa">QA</h2>
<ol>
<li>
<p>between  range_1 and  range_2     是 左闭右闭</p>
</li>
<li>
<pre><code class="language-sql">SELECT
	AVG(emp.SAL) AS avgsal,ENAME,SAL
FROM
	emp
WHERE SAL&gt;avgsal
切记 where 语句中不能直接套用非表格字段 ;这个需要子查询
</code></pre>
</li>
<li>
<p>limit  用法  limit a , b  (a是从0开始的,b指的是长度)    当  只有一个参数时 ;指的 是长度; 比如说 找出 第五个到第八个,我们 5 , 6 , 7 ,8  一共长度是4 ,则  limit 4 , 4,  其中limit是mysql 特有的</p>
</li>
<li>
<p>mysql 的 <strong>varcart</strong>类型 长度 为 1 可以输入 一个汉字 也是一个英文 一个数字 ;其实 一个varchar 就是一个字符;存储空间等于实际数据长度</p>
</li>
<li>
<p><strong>char</strong> 是固定长度 一般填写 固定长度的信息好 ;存储空间是死的;不管你是1 23 4 5 我规定了10 你就给你分配10</p>
</li>
<li>
<p><strong>int</strong>类型  占用4个字节  长度 好像不管写多少 数字 都么限制</p>
</li>
<li>
<p><strong>bigint</strong>类型  占用8个字节  长度 好像不管写多少 数字 都么限制</p>
</li>
<li>
<p><strong>tinyint</strong> 类型 长度 选择 1 但是可以到达 127 [0,128)</p>
</li>
<li>
<p>double 和 float</p>
</li>
<li>
<p><strong>date</strong> 占用8个字节</p>
</li>
</ol>
<h3 id="1技巧">1.技巧</h3>
<ol>
<li>
<p>备份表 :  <code>create table emp_bak as select * from emp</code></p>
</li>
<li>
<p>查看创建表的语句:  <code>show create table emp_bak</code></p>
</li>
<li>
<p>DML 是什么  Data Manipulation Language(数据操纵语言) ; 很显然是  delete , insert , update</p>
<ol>
<li><code>delete from table_name where field=a</code></li>
<li><code>delete from table_name</code></li>
<li><code>update table_name set gender=1,emp=2 where id=1</code></li>
<li><code>insert into table_name(filed1,field2) values ('','','')</code></li>
</ol>
</li>
<li>
<p><code>str_to_date('1949-10-01','%Y-%m-%d')</code>  这个是日期 插入日期 ;; 其中mysql 默认的日期格式 是 <code>1994-10-01</code> 输入这个不会报错</p>
</li>
<li>
<p><code>show variables like '%char%';</code></p>
<pre><code class="language-sql">+--------------------------+---------------------------------------------------------+
| Variable_name            | Value                                                   |
+--------------------------+---------------------------------------------------------+
| character_set_client     | gbk                                                     |
| character_set_connection | gbk                                                     |
| character_set_database   | latin1                                                  |
| character_set_filesystem | binary                                                  |
| character_set_results    | gbk                                                     |
| character_set_server     | latin1                                                  |
| character_set_system     | utf8                                                    |
| character_sets_dir       | C:\Program Files\MySQL\MySQL Server 5.7\share\charsets\ |
+--------------------------+---------------------------------------------------------+

 character_set_results   字符结果集
character_set_database   数据库的字符集


修改很简单 直接  set character_set_results = utf8  就可以了
 

</code></pre>
</li>
<li>
<p>两个表之间备份插入 ,上面提到了 全部插入 ,现在改成条件插入<code>insert into emp_bak select * from emp where job=&quot;manager&quot;</code></p>
</li>
<li>
<p><a href="https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A8%A1%E5%BC%8F%E5%AE%9A%E4%B9%89%E8%AF%AD%E8%A8%80/1237788">数据库模式定义语言</a>DDL(Data Definition Language)，是用于描述数据库中要存储的现实世界实体的语言。</p>
<pre><code class="language-sql">添加 alter table table_name add  email varchar(128) ;

修改 alter table table_name modify no int(8);

删除 alter table table_name  drop email ;

修改表结构 alter table table_name change name  username varchar(32)


</code></pre>
</li>
<li>
<p>解决 1对 1  表的问题 :</p>
<ul>
<li>就是在一张表的外键字段上添加唯一约束</li>
<li>中间表 外键 + 唯一</li>
</ul>
</li>
<li>
<p>查看数据库的version <code>SHOW VARIABLES WHERE Variable_name = 'version';</code></p>
</li>
</ol>
<h3 id="13-mysql的执行顺序">13. mysql的执行顺序</h3>
<figure data-type="image" tabindex="4"><img src="https://tyut.oss-cn-beijing.aliyuncs.com/image/2019-09-06/f5fbfe21-3a1d-456a-be95-48677928c3e5.png?x-oss-process=style/template01" alt="" loading="lazy"></figure>
<h2 id="14-oracle-新语法-start-withconnect-by">14. Oracle 新语法 start with...connect by</h2>
<blockquote>
<ol>
<li>start with 条件1</li>
<li>connect by 条件2</li>
<li>prior表示上一条记录  比如 <strong>CONNECT BY</strong> <strong>PRIOR org_id = parent_id</strong>；就是说<strong>上一条记录的org_id 是本条记录的parent_id</strong>，</li>
</ol>
</blockquote>
<p>给一张图 解释</p>
<figure data-type="image" tabindex="5"><img src="https://tyut.oss-cn-beijing.aliyuncs.com/image/2019-10-06/60bb97a0-1123-42e8-85a4-2860b99d91f9.png?x-oss-process=style/template01" alt="" loading="lazy"></figure>
<p>修改字符集</p>
<pre><code class="language-sql">su - oracle  
sqlplus /nolog  
connect /as sysdba  
 
--查看数据库字符编码集
select userenv('language') from dual;
 
shutdown immediate  
startup restrict  
alter database character set INTERNAL_USE ZHS16GBK;  
shutdown immediate  
startup
</code></pre>
<h2 id="15数据库操作练习">15.数据库操作练习</h2>
<pre><code class="language-sql">1. 取得每个部门中最高薪水的人员名称

SELECT
	f.DEPTNO,
	f.DNAME,
	f.ENAME,
	MAX(f.SAL) AS maxsal
FROM
	(
		SELECT
			d.DEPTNO,
			d.DNAME,
			e.ENAME,
			e.SAL
		FROM
			dept d
		JOIN emp e ON e.DEPTNO = d.DEPTNO
	) f
GROUP BY
	f.DNAME
	
+--------+------------+-------+---------+
| DEPTNO | DNAME      | ENAME | maxsal  |
+--------+------------+-------+---------+
|     10 | ACCOUNTING | KING  | 5000.00 |
|     20 | RESEARCH   | SMITH | 3000.00 |
|     30 | SALES      | ALLEN | 2850.00 |
+--------+------------+-------+---------+





2. 查询出哪些人的薪水在平均薪水之上
分析: 1.我们要先找出每个部门的平均薪水,然后跟我们的emp表进行连接诶,比较薪水大于平均薪水的

SELECT
	d.ename,
	d.sal,
	d.deptno,
	f.avgsal
FROM
	emp d
JOIN (
	SELECT
		e.DEPTNO,
		AVG(e.sal) AS avgsal
	FROM
		emp e
	GROUP BY
		e.DEPTNO
) f ON f.DEPTNO = d.deptno
WHERE
	d.sal &gt; f.avgsal

+-------+---------+--------+-------------+
| ename | sal     | deptno | avgsal      |
+-------+---------+--------+-------------+
| ALLEN | 1600.00 |     30 | 1566.666667 |
| JONES | 2975.00 |     20 | 2220.833333 |
| BLAKE | 2850.00 |     30 | 1566.666667 |
| CLARK | 2450.00 |     20 | 2220.833333 |
| SCOTT | 3000.00 |     20 | 2220.833333 |
| KING  | 5000.00 |     10 | 3150.000000 |
| FORD  | 3000.00 |     20 | 2220.833333 |
+-------+---------+--------+-------------+


3. 取出部门中的人的平均薪水等级

思路先求出每个人的薪水等级,然后根据此表分组,计算出平均值, 然后根据dept表查询出部门



SELECT
	h.deptno,
	d.dname,
	h.avggra
FROM
	dept d
JOIN (
	SELECT
		f.deptno,
		AVG(f.grade) AS avggra
	FROM
		(
			SELECT
				e.ename,
				e.deptno,
				s.grade
			FROM
				emp e
			JOIN salgrade s ON e.sal BETWEEN s.losal AND s.hisal
		) f
	GROUP BY
		f.deptno
) h
ON
	h.deptno = d.deptno
		
或者

SELECT
	f.deptno,
	d.dname,
	AVG(f.grade) AS avggra	
FROM
	(
		SELECT
			e.ename,
			e.deptno,
			s.grade
		FROM
			emp e
		JOIN salgrade s ON e.sal BETWEEN s.losal AND s.hisal
	) f
JOIN dept d ON d.deptno = f.deptno
GROUP BY
	f.deptno
	
+--------+------------+--------+
| deptno | dname      | avggra |
+--------+------------+--------+
|     10 | ACCOUNTING | 3.5000 |
|     20 | RESEARCH   | 3.0000 |
|     30 | SALES      | 2.5000 |
+--------+------------+--------+	


或者 是 查询出平均薪水 然后根据 平均薪水找对应等级 

SELECT
	f.deptno,
	d.dname,
	s.grade,
	f.avgsal
FROM
	salgrade s
JOIN (
	SELECT
		e.ename,
		e.deptno,
		AVG(e.sal) AS avgsal
	FROM
		emp e
	GROUP BY
		e.deptno
) f ON f.avgsal BETWEEN s.losal AND s.hisal
JOIN dept d ON f.deptno = d.deptno
	
+--------+------------+-------+
| deptno | dname      | grade |
+--------+------------+-------+
|     30 | SALES      |     3 |
|     20 | RESEARCH   |     4 |
|     10 | ACCOUNTING |     5 |
+--------+------------+-------+	
	
	
	
	
4. 不准用max聚合函数,取得最高薪水等级 给出两种方案

SELECT
	sal
FROM
	emp
ORDER BY
	sal DESC
LIMIT 1

+---------+
| sal     |
+---------+
| 5000.00 |
+---------+

第二种方案 就是 两个一样的表比较  比如 (1,2,3,4),(1,2,3,4) 我要找出a表中小于b表中的数(1,2,3) 所以此时空掉的是 4 这个数字

SELECT
	sal
FROM
	emp
WHERE
	sal NOT IN (
		SELECT DISTINCT
			a.sal
		FROM
			emp a
		JOIN emp b ON a.sal &lt; b.sal
	)
+---------+
| sal     |
+---------+
| 5000.00 |
+---------+


5.取出平均薪水最高的部门编号

SELECT
	deptno,
	avg(sal) AS avgsal
FROM
	emp
GROUP BY
	deptno
HAVING
	avgsal = (
		SELECT
			max(a.avgsal) AS maxavg
		FROM
			(
				SELECT
					deptno,
					avg(sal) AS avgsal
				FROM
					emp
				GROUP BY
					deptno
			) a
	)



6.找出平均薪水最高的部门所对应的部门名称

SELECT
	e.deptno,
	d.dname,
	avg(e.sal) AS avgsal
FROM
	emp e
JOIN dept d
ON e.deptno=d.deptno
GROUP BY
	e.deptno
HAVING
	avgsal = (
		SELECT
			max(a.avgsal) AS maxavg
		FROM
			(
				SELECT
					deptno,
					avg(sal) AS avgsal
				FROM
					emp
				GROUP BY
					deptno
			) a
	)

</code></pre>
<h2 id="16-建表语句">16. 建表语句</h2>
<pre><code class="language-sql">
DROP TABLE IF EXISTS EMP;
DROP TABLE IF EXISTS DEPT;
DROP TABLE IF EXISTS SALGRADE;
 
CREATE TABLE DEPT
	(DEPTNO int(2) not null ,
	DNAME VARCHAR(14) ,
	LOC VARCHAR(13) ,
	primary key (DEPTNO)
	);
CREATE TABLE EMP
	(EMPNO int(4) not null ,
	ENAME VARCHAR(10) ,
	JOB VARCHAR(9) ,
	MGR INT(4) ,
	HIREDATE DATE DEFAULT NULL ,
	SAL DOUBLE(7,2) ,
	COMM DOUBLE(7,2) ,
	primary key (EMPNO) ,
	DEPTNO INT(2)
	);
CREATE TABLE SALGRADE
	(GRADE INT ,
	LOSAL INT ,
	HISAL INT 
	);
	
INSERT INTO DEPT ( DEPTNO, DNAME, LOC ) VALUES (
10, 'ACCOUNTING', 'NEW YOURK');
INSERT INTO DEPT ( DEPTNO, DNAME, LOC ) VALUES (
20, 'RESEARCH', 'DALLAS');
INSERT INTO DEPT ( DEPTNO, DNAME, LOC ) VALUES (
30, 'SALES', 'CHICAGO');
INSERT INTO DEPT( DEPTNO, DNAME, LOC ) VALUES (
40, 'OPERATIONS', 'BOSTON');
commit;
 
INSERT INTO EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO) VALUES (
7396, 'SMITH', 'CLERK', 7902, '1980-12-17', 800, NULL, 20);
INSERT INTO EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO) VALUES (
7499, 'ALLEN', 'SALESMAN', 7698, '1981-02-20', 1600, 300,30);
INSERT INTO EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO) VALUES (
7521, 'WARD', 'SALESMAN', 7698, '1981-02-22', 1250, 500, 30);
INSERT INTO EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO) VALUES (
7566, 'JONES', 'MANAGER', 7839, '1981-04-02', 2975, NULL, 20);
INSERT INTO EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO) VALUES (
7654, 'MARTIN', 'SALESMAN', 7698, '1981-09-28', 1250, 1400, 30);
INSERT INTO EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO) VALUES (
7698, 'BLAKE', 'MANAGER', 7839, '1981-05-01', 2850, NULL, 30);
INSERT INTO EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO) VALUES (
7782, 'CLARK', 'MANAGER', 7839, '1981-06-09', 2450, NULL, 20);
INSERT INTO EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO) VALUES (
7788, 'SCOTT', 'ANALYST', 7566, '1987-04-19', 3000, NULL, 20);
INSERT INTO EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO) VALUES (
7839, 'KING', 'PRESIDENT', NULL, '1981-11-17', 5000, NULL, 10);
INSERT INTO EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO) VALUES (
7844, 'TURNER', 'SALESMAN', 7698, '1981-09-08', 1500, 0, 30);
INSERT INTO EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO) VALUES (
7876, 'ADAMS', 'CLERK', 7788, '1987-05-23', 1100, NULL, 20);
INSERT INTO EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO) VALUES (
7900, 'JAMES', 'CLERK', 7698, '1981-12-03', 950, NULL, 30);
INSERT INTO EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO) VALUES (
7902, 'FORD', 'ANALYST', 7566, '1981-12-03', 3000, NULL, 20);
INSERT INTO EMP (EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO) VALUES (
7934, 'MILLER', 'CLERK', 7782, '1982-01-23', 1300, NULL, 10);
commit;
 
INSERT INTO SALGRADE (GRADE, LOSAL, HISAL) VALUES (
1, 700, 1200);
INSERT INTO SALGRADE (GRADE, LOSAL, HISAL) VALUES (
2, 1201, 1400);
INSERT INTO SALGRADE (GRADE, LOSAL, HISAL) VALUES (
3, 1401, 2000);
INSERT INTO SALGRADE (GRADE, LOSAL, HISAL) VALUES (
4, 2001, 3000);
INSERT INTO SALGRADE (GRADE, LOSAL, HISAL) VALUES (
5, 3001, 9999);
commit;
</code></pre>

								<span id="footnote"></span>
								<div id="warn"></div>
							</div>
							<div class="toc-container"><ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#1-mysql-%E8%AF%AD%E6%B3%95%E5%88%86%E7%B1%BB">1. MySQL 语法分类</a>
<ul>
<li><a href="#1sql92-%E8%BF%99%E4%B8%AA%E5%8F%AF%E4%BB%A5%E6%B7%98%E6%B1%B0">1.sql92 (这个可以淘汰)</a></li>
<li><a href="#2sql99%E5%AD%A6%E4%B9%A0%E8%BF%99%E4%B8%AA">2.sql99(学习这个)</a></li>
<li><a href="#3%E5%8C%BA%E5%88%AB-%E4%B8%8B%E9%9D%A2%E6%9D%A5%E4%B8%AA%E7%BB%83%E4%B9%A0">3.区别 下面来个练习</a></li>
</ul>
</li>
<li><a href="#2-mysql-%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%E6%89%A7%E8%A1%8C%E5%BE%AA%E5%BA%8F">2. MySQL  查询语句执行循序</a></li>
<li><a href="#3-join-%E8%A1%A8%E7%9A%84%E8%BF%9E%E6%8E%A5">3. Join 表的连接</a>
<ul>
<li><a href="#1-%E5%86%85%E8%BF%9E%E6%8E%A5jioninner-jion">1. 内连接(jion/inner jion)</a></li>
<li><a href="#2-%E5%A4%96%E8%BF%9E%E6%8E%A5left-join-right-outer-join">2. 外连接(left join / right outer join)</a></li>
<li><a href="#3-%E5%85%A8%E8%BF%9E%E6%8E%A5">3. 全连接</a></li>
</ul>
</li>
<li><a href="#4-%E5%AD%90%E6%9F%A5%E8%AF%A2">4.  子查询</a>
<ul>
<li><a href="#1-%E5%85%B6%E5%AE%9E-%E5%B0%B1%E6%98%AF%E6%8A%8A-%E5%AD%90%E6%9F%A5%E8%AF%A2%E5%BD%93%E5%81%9A-%E4%B8%80%E4%B8%AA-%E6%9D%A1%E4%BB%B6%E5%8F%82%E6%95%B0">1. 其实 就是把 子查询当做 一个 条件参数</a></li>
<li><a href="#2-%E5%B0%B1%E6%98%AF%E6%8A%8A%E5%AD%90%E6%9F%A5%E8%AF%A2-%E5%BD%93%E5%81%9A-%E4%B8%80%E4%B8%AA-%E4%B8%B4%E6%97%B6%E8%A1%A8">2.  就是把子查询 当做 一个 临时表</a></li>
</ul>
</li>
<li><a href="#5-union-%E8%A1%A8%E7%9A%84%E8%BF%9E%E6%8E%A5">5. union 表的连接</a></li>
<li><a href="#6-constraint-%E8%A1%A8%E7%9A%84%E7%BA%A6%E6%9D%9F">6. constraint 表的约束</a></li>
<li><a href="#7-cascade-%E7%BA%A7%E8%81%94%E6%93%8D%E4%BD%9C">7. cascade 级联操作</a></li>
<li><a href="#8-transaction-%E4%BA%8B%E5%8A%A1">8. transaction 事务</a></li>
<li><a href="#9-index-%E7%B4%A2%E5%BC%95">9. index 索引</a></li>
<li><a href="#10-view-%E8%A7%86%E5%9B%BE">10. view 视图</a></li>
<li><a href="#11-mysql-%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E">11. MySQL 存储引擎</a>
<ul>
<li><a href="#1mysql%E6%9C%899%E7%A7%8D%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E">1.mysql有9种存储引擎</a></li>
<li><a href="#2-innodb">2. InnoDB</a></li>
<li><a href="#3-myisam">3. MyISAM</a></li>
<li><a href="#4-memory">4. MEMORY</a></li>
</ul>
</li>
<li><a href="#12-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E7%9A%84%E4%B8%89%E8%8C%83%E5%BC%8F">12. 数据库设计的三范式</a></li>
<li><a href="#13-mysql-%E9%94%81%E7%9A%84%E9%97%AE%E9%A2%98">13. MySql 锁的问题</a>
<ul>
<li><a href="#1%E8%A1%A8%E9%94%81%E4%BA%92%E6%96%A5%E9%94%81">1.表锁(互斥锁)</a></li>
<li><a href="#2%E8%A1%8C%E9%94%81">2.行锁</a></li>
<li><a href="#3-%E6%82%B2%E8%A7%82%E9%94%81">3. 悲观锁</a></li>
<li><a href="#4%E4%B9%90%E8%A7%82%E9%94%81">4.乐观锁</a></li>
</ul>
</li>
<li><a href="#qa">QA</a>
<ul>
<li><a href="#1%E6%8A%80%E5%B7%A7">1.技巧</a></li>
<li><a href="#13-mysql%E7%9A%84%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F">13. mysql的执行顺序</a></li>
</ul>
</li>
<li><a href="#14-oracle-%E6%96%B0%E8%AF%AD%E6%B3%95-start-withconnect-by">14. Oracle 新语法 start with...connect by</a></li>
<li><a href="#15%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C%E7%BB%83%E4%B9%A0">15.数据库操作练习</a></li>
<li><a href="#16-%E5%BB%BA%E8%A1%A8%E8%AF%AD%E5%8F%A5">16. 建表语句</a></li>
</ul>
</li>
</ul>
</div>
						</div>
						<div id="fullPage"><canvas id="canvas"></canvas></div>
				</article>
				<div id="eof"><span>EOF</span></div>
				<div class="round-shape-one"></div>
				<section>
					<div class="doc_comments">
							<div id="valine-container"></div>
					</div>
				</section>
			</div>
		</div>
	</div>
	<script>
		"use strict";
		! function () {
			for (var n = document.getElementsByTagName("pre"), e = n.length, s = 0; s < e; s++) {
				n[s].innerHTML = '<span class="line-number"></span>' + n[s].innerHTML + '<span class="cl"></span>';
				for (var a = n[s].innerHTML.split(/\n/).length, r = 0; r < a - 1; r++) {
					n[s].getElementsByTagName("span")[0].innerHTML += "<span>" + (r + 1) + "</span>"
				}
			}
		}();
		let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");
		window.addEventListener("scroll", event => {
			let fromTop = window.scrollY;
			mainNavLinks.forEach((link, index) => {
				let section = document.getElementById(decodeURI(link.hash).substring(1));
				let nextSection = null
				if (mainNavLinks[index + 1]) {
					nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(
						1));
				}
				if (section.offsetTop <= fromTop) {
					if (nextSection) {
						if (nextSection.offsetTop > fromTop) {
							link.classList.add("currentToc");
						} else {
							link.classList.remove("currentToc");
						}
					} else {
						link.classList.add("currentToc");
					}
				} else {
					link.classList.remove("currentToc");
				}
			});
		});
		var list = document.querySelectorAll(".katex");
		for (var i = 0; i < list.length; i++) {
			list[i].style.display = "unset"
		};
		var h = document.documentElement,
			b = document.body,
			st = "scrollTop",
			sh = "scrollHeight",
			progress = document.querySelector(".progress"),
			scroll;
		document.addEventListener("scroll", function () {
			scroll = (h[st] || b[st]) / ((h[sh] || b[sh]) - h.clientHeight) * 100;
			progress.style.setProperty("--scroll", scroll + "%")
		});
		var wxScale = new WxScale({
			fullPage: document.querySelector("#fullPage"),
			canvas: document.querySelector("#canvas")
		});
		var imgBox = document.querySelectorAll("#md_block img");
		for (var i = 0; i < imgBox.length; i++) {
			imgBox[i].onclick = function (e) {
				wxScale.start(this)
			}
		};
	</script>
	<style>
		#magnifyImg {
			position: fixed;
			left: 0;
			top: 0;
			text-align: center;
			width: 100%;
			display: none;
			z-index: 9999
		}

		#magnifyImg img {
			object-fit: contain;
			background: #eaecef;
			padding: 15px;
			border-radius: 10px;
			height: auto;
			width: auto;
			vertical-align: middle
		}
	</style>
	<a id="scrollUp"href="#top"style="position: fixed; z-index: 2147483647; display: block;"></a><div class="footer animated fadeInDown"><div class="site_footer"><div class="mysocials"><div class="my_socials"><a href="https://github.com/Anthony-Dong"title="github"><i class="iconfont icon-github"></i></a><a href="fanhaodong516@gmail.com"title="envelope"><i class="iconfont icon-envelope"></i></a></div></div><div class="copyright"id="copyright">You Are My Everything. <a href="mailto:574986060@qq.com" target="blank">Send Email</a>Copyright©2018-2020<a href="https://anthony-dong.github.io"style="margin:0;">Serence</a>.</div><span style="display: inline;margin-right:15px;">👁<strong><span id="count-page">168271</span></strong></span><span id="busuanzi_container_page_pv"style="display: inline;"><span>📚<strong>186</strong>posts</span></div></div><script>console.log("\n %c \u26a1Anthony-Dong's Blog:https://anthony-dong.gitee.io ,Github:https://github.com/Anthony-Dong ,Email:574986060@qq.com ,有事情欢迎联系. \n\n","color: #ffffff; background: rgba(49, 49, 49, 0.85); padding:5px 0;border-radius:5px;",);</script>
	<script type="text/javascript" async src="https://anthony-dong.github.io/media/js/prism.js"></script>
</body>
</html>
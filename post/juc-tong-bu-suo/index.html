<!DOCTYPE html>
<html lang="en">
<head>
	<link rel="shortcut icon"href="https://anthony-dong.github.io/favicon.ico"type="image/x-icon"/><meta name="viewport"content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/><meta name="apple-mobile-web-app-capable"content="yes"/><meta name="apple-mobile-web-app-status-bar-style"content="black"/><meta name="format-detection"content="telephone=no"/><meta name="renderer"content="webkit"/><meta name="description"content="Anthony-Dongçš„ä¸ªäººåšå®¢"/><meta charset="UTF-8"/><title>Java - å¤šçº¿ç¨‹é”çš„é—®é¢˜ | Anthony-Dong</title><link href="https://anthony-dong.github.io/styles/main.css"type="text/css"rel="stylesheet"/><script src="https://anthony-dong.github.io/media/js/magnify.min.js"></script>
	<link rel="canonical" href="https://anthony-dong.github.io/post/juc-tong-bu-suo/" />
</head>
<body>
	<div class="progress"></div><style>.progress{background:linear-gradient(to right,#87ceeb var(--scroll),transparent 0);background-repeat:no-repeat;position:fixed;width:100%;height:4px;z-index:1}</style><div class="darkmode-background"></div><div class="darkmode-layer"></div>
<noscript><p class="warn" >æœ¬é¡µé¢éœ€è¦æµè§ˆå™¨æ”¯æŒï¼ˆå¯ç”¨ï¼‰JavaScript</p></noscript><div class="header"><div class="logo_title"><div class="title animated fadeInDown"><a href="https://anthony-dong.github.io"><img alt="logo" style="display:inline-block;" src="https://anthony-dong.github.io/images/avatar.png"/></a><h1 title="Anthony-Dong" class="weaklink shift"><a  href="/">Anthony-Dong</a></h1>

<div class="navbar weaklink">
<div class="normal_nav">
<div class="bitcron_nav_container"><div class="bitcron_nav"><div class="bitcron_nav"><div style="display:flex;justify-content:center;"><nav class="mixed_site_nav_wrap site_nav_wrap"><ul class="mixed_site_nav site_nav sm sm-base">	<li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >é¦–é¡µ</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >å½’æ¡£</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/tags" class="selected active current nav__item" >æ ‡ç­¾</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >å…³äº</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/link" class="selected active current nav__item" >å‹é“¾</a></li></ul></nav>
<div style="float:right;margin-top:1em"><form id="gridea-search-form" data-update="1578893743252" action="/search/index.html"><input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="Search..."></form></div>
<div style="margin-left:0.5em;margin-top:1.2em"><input id="switch_default" onclick="mobileBtn()" type="checkbox" class="switch_default"><label for="switch_default" class="toggleBtn"></label></div></div>
<div class="clear clear_nav_inline_end"></div></div></div><div class="clear clear_nav_end"></div></div></div><div class="hamberger" href="javascript:void(0)" onclick="btn_toggle();"><i class="iconfont icon-category"></i></div></div></div></div>
<div id="hn" class="no-js hidden_nav animated fadeInDown"><div class="bitcron_nav_container"><div class="bitcron_nav"><nav class="mixed_site_nav_wrap site_nav_wrap"><ul class="mixed_site_nav site_nav sm sm-base">	<li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >é¦–é¡µ</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >å½’æ¡£</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/tags" class="selected active current nav__item" >æ ‡ç­¾</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >å…³äº</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/link" class="selected active current nav__item" >å‹é“¾</a></li></ul><div class="clear clear_nav_inline_end"></div></nav></div><div class="clear clear_nav_end"></div></div>
<div style="display:flex;justify-content:center;inline-block;text-align:center;margin-top:7%"><div><form id="gridea-search-form-1" data-update="1614224679162" action="/search/index.html"><input class="search-input" autocomplete="off" spellcheck="false" name="q"  placeholder="Search..." /></form></div><div style="margin-left:0.5em"><input id="switch_default_h" onclick="mobileBtn()" type="checkbox" class="switch_default"><label for="switch_default" class="toggleBtn"></label></div></div>
</div></div>
<script>function enableDarkmode(){document.body.classList.add("darkmode"),document.getElementById("switch_default").checked=1,document.getElementById("switch_default_h").checked=1}function removeDarkmode(){document.body.classList.remove("darkmode"),document.getElementById("switch_default").checked=0,document.getElementById("switch_default_h").checked=0}function getCookie(a){var b,c=new RegExp("(^| )"+a+"=([^;]*)(;|$)");return(b=document.cookie.match(c))?unescape(b[2]):null}cookie=getCookie("darkmode"),"enable"==cookie&&enableDarkmode(),window.matchMedia("(prefers-color-scheme: dark)").matches&&"disable"!==cookie&&(enableDarkmode(),document.cookie="darkmode=enable; path=/");var mobileBtn=function(){1==document.getElementById("switch_default").checked?(enableDarkmode(),document.cookie="darkmode=enable; path=/"):(removeDarkmode(),document.cookie="darkmode=disable; path=/")};</script>

	<div class="main">
		<div class="main-inner">
			<div class="content">
				<article class="post">
					<script src='https://anthony-dong.github.io/media/js/Valine.min.js'></script><style>.v .vlist .vcard .vh .vmeta .vat{font-size:.8125em;color:#9d7873;cursor:pointer;float:right}.v .vlist .vcard .vhead .vsys{display:none}</style ><script type="text/javascript">new Valine(ValineInfo)</script>
					<h2 class="post_title sm_margin"><a>Java - å¤šçº¿ç¨‹é”çš„é—®é¢˜</a></h2>
					<script>
						function lan() {
							if (document.getElementById("lan").innerText == "ç¹") {
								var s = document.getElementById("tongwenlet_cn");
								if (s != null) {
									document.body.removeChild(s)
								}
								var s = document.createElement("script");
								s.language = "javascript";
								s.type = "text/javascript";
								s.src = "https://cdn.jsdelivr.net/gh/qyxtim/Static@1.1/bookmarklet_tw.js";
								s.id = "tongwenlet_cn";
								document.body.appendChild(s);
								document.getElementById("lan").innerHTML = "ç®€"
							} else {
								if (document.getElementById("lan").innerText == "ç°¡") {
									var s = document.getElementById("tongwenlet_cn");
									if (s != null) {
										document.body.removeChild(s)
									}
									var s = document.createElement("script");
									s.language = "javascript";
									s.type = "text/javascript";
									s.src = "https://cdn.jsdelivr.net/gh/qyxtim/Static@1.1/bookmarklet_cn.js";
									s.id = "tongwenlet_cn";
									document.body.appendChild(s);
									document.getElementById("lan").innerHTML = "ç¹"
								}
							}
						};
					</script>
					<section class="post_details"><i class="iconfont icon-calendar"></i><span style="margin-right:15px">
							2019-10-27</span><i class="iconfont icon-browse"></i>
							<span class="leancloud_visitors" style="margin-right:15px" id="/post/juc-tong-bu-suo/">views <i class="leancloud-visitors-count" style="font-style: normal"></i></span>
							<span class="weaklink" style="margin-right:15px"><i class="iconfont icon-category"></i> <a
								href="https://anthony-dong.github.io/tag/Vyew36Twpl/"
								class="tag">JavaåŸºç¡€</a> |
							 <a
								href="https://anthony-dong.github.io/tag/38zE8aaGQ3X/"
								class="tag">JUC</a></span><i class="iconfont icon-caret-down"></i><span
							style="margin-right:15px">3038å­—</span><i
							class="iconfont icon-naozhong"></i><span
							style="margin-right:15px">12 min read</span><a id="lan"
							href="javascript:void(0);" onclick="lan();" title="è°ƒæ•´ç®€ç¹ä½“" style="margin-right:15px;">ç¹</a>
						</section>

						<div style="display:flex">
							<div class="md_block" id="md_block">
								<div class="round-shape-one"></div>
								<h2 id="1-synchronizedå…³é”®å­—-ä¸-locké”">1. synchronizedå…³é”®å­— ä¸ Locké”</h2>
<p>JUCä¸­æä¾›äº†ä¼Ÿå¤§çš„Locké”, é€šè¿‡Javaç¼–ç¨‹å®ç°çš„çš„, æ˜¯è‘—åçš„å¹¶å‘ç¼–ç¨‹çš„ä½œè€… <code>Doug Lea</code> å®ç°çš„. åœ¨å½“æ—¶JDK1.5æ—¶ä»£ä¹‹å‰, Javaçš„synchronizedæ•ˆç‡å¤ªä½äº†. å› æ­¤Javaå…¬å¸çœ‹ä¸ä¸‹å»äº†, å½“æ—¶Doug Leaå†™äº†ä¸ªå¹¶å‘æ¡†æ¶, å°±æ˜¯å«åš <code>dj.util.concurrent</code>  , å› æ­¤Javaä¸ºäº†é•¿ä¹…çš„å‘å±•, å’ŒçŸ­æš‚çš„è§£å†³synchronizeçš„é—®é¢˜ , æ•´åˆäº† jucåŒ…. æ‰€ä»¥éšä¹‹è€Œæ¥å°±æ˜¯JUCåŒ…çš„å¤§é‡ä½¿ç”¨.</p>
<p>ä½†æ˜¯Javaå¹¶ä¸ä¼šæ”¾å¼ƒ synchronizedçš„ä¼˜åŒ–. ä»–ä»¬ä¸æ–­çš„ä¼˜åŒ–, å…¶å®ä¼˜åŒ–æ€æƒ³ä¹Ÿæ˜¯ç±»ä¼¼äºJUCä¸­Lockçš„æ€æƒ³. åˆ©ç”¨è‡ªæ—‹å’Œå…¶ä»–å¤šçº¿ç¨‹ç‰¹ç‚¹, æ¥å‡å°‘çº¿ç¨‹ç›´æ¥è¿›è¡ŒæŒ‚èµ·å’Œç­‰å¾…çš„æ“ä½œ.</p>
<p>æˆ‘ä»¬æ¥çœ‹çœ‹ä»–ä»¬çš„æ€§èƒ½å¯¹æ¯”å§. åœ¨JDK1.5çš„æ—¶å€™, ç°åœ¨éƒ½1.8äº†äººäººä½¿ç”¨çš„æ˜¯.</p>
<figure data-type="image" tabindex="1"><img src="https://tyut.oss-accelerate.aliyuncs.com/image/2020-20-22/e5742761-acc8-41c5-bd83-611bf7974d84.png" alt="" loading="lazy"></figure>
<figure data-type="image" tabindex="2"><img src="https://tyut.oss-accelerate.aliyuncs.com/image/2020-20-22/7be9b607-3bd4-4396-b834-41096166b13b.png" alt="" loading="lazy"></figure>
<p>â€‹		é€šè¿‡ç®€å•çš„å¯¹æ¯”. å‘ç°å·®è·ååˆ†çš„å¤§. ä½†æ˜¯ å°½ç®¡åœ¨JDK 5æ—¶ä»£ReentrantLockæ›¾ç»åœ¨æ€§èƒ½ä¸Šé¢†å…ˆè¿‡synchronizedï¼Œä½†è¿™å·²ç»æ˜¯åå¤šå¹´ä¹‹å‰çš„èƒœåˆ©äº†ã€‚ä»é•¿è¿œæ¥çœ‹ï¼ŒJavaè™šæ‹Ÿæœºæ›´å®¹æ˜“é’ˆå¯¹synchronizedæ¥è¿›è¡Œä¼˜åŒ–ï¼Œå› ä¸ºJavaè™šæ‹Ÿæœºå¯ä»¥åœ¨çº¿ç¨‹å’Œå¯¹è±¡çš„å…ƒæ•°æ®ä¸­è®°å½•synchronizedä¸­é”çš„ç›¸å…³ä¿¡æ¯ï¼Œè€Œä½¿ç”¨J.U.Cä¸­çš„Lockçš„è¯ï¼ŒJavaè™šæ‹Ÿæœºæ˜¯å¾ˆéš¾å¾—çŸ¥å…·ä½“å“ªäº›é”å¯¹è±¡æ˜¯ç”±ç‰¹å®šçº¿ç¨‹é”æŒæœ‰çš„ã€‚</p>
<h2 id="2-reentrantlock-å¯é‡å…¥é”">2. ReentrantLock å¯é‡å…¥é”</h2>
<blockquote>
<p>â€‹	ReentrantLock ä»å­—é¢å¯ä»¥çœ‹å‡ºæ˜¯ä¸€æŠŠå¯é‡å…¥é”ï¼Œè¿™ç‚¹å’Œ synchronized ä¸€æ ·ï¼Œä½†å®ç°åŸç†ä¹Ÿä¸ syncronized æœ‰å¾ˆå¤§å·®åˆ«ï¼Œå®ƒæ˜¯åŸºäºç»å…¸çš„ AQS(AbstractQueueSyncronized) å®ç°çš„, AQS æ˜¯åŸºäº volitale å’Œ CAS å®ç°çš„ï¼Œå…¶ä¸­ AQS ä¸­ç»´æŠ¤ä¸€ä¸ª valitale ç±»å‹çš„å˜é‡ state æ¥åšä¸€ä¸ªå¯é‡å…¥é”çš„é‡å…¥æ¬¡æ•°ï¼ŒåŠ é”å’Œé‡Šæ”¾é”ä¹Ÿæ˜¯å›´ç»•è¿™ä¸ªå˜é‡æ¥è¿›è¡Œçš„ã€‚ ReentrantLock ä¹Ÿæä¾›äº†ä¸€äº› synchronized æ²¡æœ‰çš„ç‰¹ç‚¹ï¼Œå› æ­¤æ¯” synchronized å¥½ç”¨ã€‚</p>
</blockquote>
<p>é”çš„ç”¨å¤„ : å½“ä¸€ä¸ªèµ„æºè¢«å¤šä¸ªçº¿ç¨‹å…±ç”¨æ—¶,å¦‚æœæ‰§è¡Œä¿®æ”¹æ“ä½œ, é‚£ä¹ˆå°±å­˜åœ¨çº¿ç¨‹å®‰å…¨çš„é—®é¢˜. æœ‰å¯èƒ½abçº¿ç¨‹åŒæ—¶è¯»å–åˆ°çš„éƒ½æ˜¯1,é‚£ä¹ˆä¿®æ”¹åªèƒ½+1,é‚£ä¹ˆä¸¤æ¬¡è®¡ç®—ç»“æœå°±ä¼šå‡ºç°å°‘è®¡ç®—ä¸€æ¬¡. æœ‰å…´è¶£çš„å¯ä»¥çœ‹çœ‹çº¿ç¨‹è¯»å–å˜é‡åˆ°å†™å…¥å˜é‡çš„å„ç§æ“ä½œ, å…¶å®åˆ†ä¸ºå¾ˆå¤šæ­¥.</p>
<pre><code class="language-java">public class Reentrant {

    public static void main(String[] args) throws InterruptedException {
        ExecutorService pool = Executors.newFixedThreadPool(10);
        IntStream.range(0,10).forEach(e-&gt;{
            pool.execute(()-&gt;{
                for (int x = 0; x &lt; 10000; x++) {
                    increase();
                }
            });
        });
        // ç­‰åˆ°å…¨éƒ¨çº¿ç¨‹æ‰§è¡Œå®Œæ¯•è¾“å‡º
        pool.shutdown();
        pool.awaitTermination(Integer.MAX_VALUE, TimeUnit.DAYS);
        System.out.println(&quot;è¾“å‡ºç»“æœ : &quot;+x);
    }

    private static int x = 0;

    private static void increase() {
        x += 1;
    }
}
</code></pre>
<p>æ¯æ¬¡æ‰§è¡Œç»“æœ,å¯èƒ½æœ‰äº›åå·®,ä½†æ˜¯ç»å¯¹ä¼šå°äº 100000çš„</p>
<pre><code class="language-java">è¾“å‡ºç»“æœ : 67398
</code></pre>
<p>é‚£å¦‚ä½•å¤„ç†å‘¢, è¿™æ—¶å€™å°±éœ€è¦åŠ ä¸€æŠŠé”äº† .  å¯ä»¥ä½¿ç”¨syncä¿®é¥° <code>increase</code> æ–¹æ³•</p>
<pre><code class="language-java">private synchronized static void increase() {
    x += 1;
}
</code></pre>
<p>æ­¤æ—¶è¾“å‡ºç»“æœä¸º</p>
<pre><code class="language-java">è¾“å‡ºç»“æœ : 100000
</code></pre>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨æˆ‘ä»¬è¯´åˆ°çš„Lock , æˆ‘ä»¬è¿™é‡Œä½¿ç”¨çš„æ˜¯ ReentrantLock , æ˜¯ä¸€ä¸ªå¯é‡å…¥é”.</p>
<pre><code class="language-java">private static final Lock LOCK = new ReentrantLock();

private  static void increase() {
    try {
        LOCK.lock();
        x += 1;
    } finally {
        LOCK.unlock();
    }
}
</code></pre>
<p>è¿™æ ·å­è¾“å‡ºç»“æœä¹Ÿæ˜¯å¯¹çš„. <code>LOCK.lock();</code> ä¼šä½¿å¾—åªæœ‰ä¸€ä¸ªçº¿ç¨‹é€šè¿‡å», å…¶ä»–çš„éƒ½åœ¨ç­‰å¾…ä»–å‰é¢çš„çº¿ç¨‹æ‰§è¡Œunlockæ“ä½œ.</p>
<blockquote>
<p>â€‹	ä»¥ä¸‹æ˜¯å¯é‡å…¥é”çš„ç‰¹æ€§.</p>
</blockquote>
<h3 id="1-å¯é‡å…¥"><strong>1ã€å¯é‡å…¥</strong></h3>
<pre><code>ReentrantLock å’Œ syncronized å…³é”®å­—ä¸€æ ·ï¼Œéƒ½æ˜¯å¯é‡å…¥é”ï¼Œä¸è¿‡ä¸¤è€…å®ç°åŸç†ç¨æœ‰å·®åˆ«ï¼Œ RetrantLock åˆ©ç”¨ AQS çš„çš„ state çŠ¶æ€æ¥åˆ¤æ–­èµ„æºæ˜¯å¦å·²é”ï¼ŒåŒä¸€çº¿ç¨‹é‡å…¥åŠ é”ï¼Œ state çš„çŠ¶æ€ +1 ; åŒä¸€çº¿ç¨‹é‡å…¥è§£é”, state çŠ¶æ€ -1 (è§£é”å¿…é¡»ä¸ºå½“å‰ç‹¬å çº¿ç¨‹ï¼Œå¦åˆ™å¼‚å¸¸); å½“ state ä¸º 0 æ—¶è§£é”æˆåŠŸã€‚
</code></pre>
<pre><code class="language-java">new Thread(() -&gt; {
    try {
        // åŠ é”
        LOCK.lock();
        try {
            // åŠ é”
            LOCK.lock();
            // 
        } finally {
            // é‡Šæ”¾é”
            LOCK.unlock();
        }
    } finally {
        // é‡Šæ”¾é”
        LOCK.unlock();
    }
}, &quot;t1&quot;).start();
</code></pre>
<p>æˆ‘å¼ºçƒˆä¸æ¨èè¿™ç§ç«ç®­ä»£è¡¨. ä»–éš¾çœ‹äº†.</p>
<h3 id="2éœ€è¦æ‰‹åŠ¨åŠ é”-è§£é”">2.éœ€è¦æ‰‹åŠ¨åŠ é”ã€è§£é”</h3>
<blockquote>
<p>â€‹	ä¸Šè¯‰ä¾‹å­. å·²ç»å±•ç¤ºäº†</p>
</blockquote>
<h3 id="3-æ”¯æŒè®¾ç½®é”çš„è¶…æ—¶æ—¶é—´">3. æ”¯æŒè®¾ç½®é”çš„è¶…æ—¶æ—¶é—´</h3>
<p>â€‹	 synchronized å…³é”®å­—æ— æ³•è®¾ç½®é”çš„è¶…æ—¶æ—¶é—´ï¼Œå¦‚æœä¸€ä¸ªè·å¾—é”çš„çº¿ç¨‹å†…éƒ¨å‘ç”Ÿæ­»é”ï¼Œé‚£ä¹ˆå…¶ä»–çº¿ç¨‹å°±ä¼šä¸€ç›´è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œè€Œ ReentrantLock æä¾› tryLock æ–¹æ³•ï¼Œå…è®¸è®¾ç½®çº¿ç¨‹è·å–é”çš„è¶…æ—¶æ—¶é—´ï¼Œå¦‚æœè¶…æ—¶ï¼Œåˆ™è·³è¿‡ï¼Œä¸è¿›è¡Œä»»ä½•æ“ä½œï¼Œé¿å…æ­»é”(DeadLock)çš„å‘ç”Ÿã€‚</p>
<pre><code class="language-java">// ä¸€åˆ»ä¹Ÿä¸ç­‰å¾…
boolean flag = LOCK.tryLock();


// ç­‰å¾…1000ms
boolean flag = LOCK.tryLock(1000, TimeUnit.MILLISECONDS);
</code></pre>
<h3 id="4-æ”¯æŒå…¬å¹³éå…¬å¹³é”">4. æ”¯æŒå…¬å¹³/éå…¬å¹³é”</h3>
<p>â€‹		synchronized å…³é”®å­—æ˜¯ä¸€ç§éå…¬å¹³é”ï¼Œå…ˆæŠ¢åˆ°é”çš„çº¿ç¨‹å…ˆæ‰§è¡Œã€‚è€Œ ReentrantLock çš„æ„é€ æ–¹æ³•ä¸­å…è®¸è®¾ç½® true/false æ¥å®ç°å…¬å¹³ã€éå…¬å¹³é”ï¼Œå¦‚æœè®¾ç½®ä¸º true ï¼Œåˆ™çº¿ç¨‹è·å–é”è¦éµå¾ª&quot;å…ˆæ¥ååˆ°&quot;çš„è§„åˆ™ï¼Œæ¯æ¬¡éƒ½ä¼šæ„é€ ä¸€ä¸ªçº¿ç¨‹ Node ï¼Œç„¶ååˆ°åŒå‘é“¾è¡¨çš„&quot;å°¾å·´&quot;åé¢æ’é˜Ÿï¼Œç­‰å¾…å‰é¢çš„ Node é‡Šæ”¾é”èµ„æºã€‚</p>
<pre><code class="language-java">// å‚æ•°ä¸ºtrue åˆ™æ˜¯å…¬å¹³, ä¸åŠ æˆ–è€…å†™falseä¸ºéå…¬å¹³
private static final ReentrantLock FAIR_LOCK = new ReentrantLock(true);
private static final ReentrantLock UNFAIR_LOCK = new ReentrantLock(false);
</code></pre>
<h3 id="5-å¯ä¸­æ–­é”">5. å¯ä¸­æ–­é”</h3>
<pre><code>ReentrantLock ä¸­çš„ lockInterruptibly() æ–¹æ³•ä½¿å¾—çº¿ç¨‹å¯ä»¥åœ¨è¢«é˜»å¡æ—¶å“åº”ä¸­æ–­ï¼Œæ¯”å¦‚ä¸€ä¸ªçº¿ç¨‹ t1 é€šè¿‡ lockInterruptibly() æ–¹æ³•è·å–åˆ°ä¸€ä¸ªå¯é‡å…¥é”ï¼Œå¹¶æ‰§è¡Œä¸€ä¸ªé•¿æ—¶é—´çš„ä»»åŠ¡ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹é€šè¿‡ interrupt() æ–¹æ³•å°±å¯ä»¥ç«‹åˆ»æ‰“æ–­ t1 çº¿ç¨‹çš„æ‰§è¡Œï¼Œæ¥è·å–t1æŒæœ‰çš„é‚£ä¸ªå¯é‡å…¥é”ã€‚è€Œé€šè¿‡ ReentrantLock çš„ lock() æ–¹æ³•æˆ–è€… Synchronized æŒæœ‰é”çš„çº¿ç¨‹æ˜¯ä¸ä¼šå“åº”å…¶ä»–çº¿ç¨‹çš„ interrupt() æ–¹æ³•çš„ï¼Œç›´åˆ°è¯¥æ–¹æ³•ä¸»åŠ¨é‡Šæ”¾é”ä¹‹åæ‰ä¼šå“åº” interrupt() æ–¹æ³•ã€‚
</code></pre>
<pre><code class="language-java">public class Main {
    private static final ReentrantLock LOCK = new ReentrantLock(false);

    public static void main(String[] args) throws InterruptedException {
        // çº¿ç¨‹ä¸€ ç»å¯¹å…ˆæ‰§è¡Œ
        Thread thread1 = new Thread(() -&gt; {
            try {
                LOCK.lockInterruptibly();
                TimeUnit.SECONDS.sleep(20000);
            } catch (InterruptedException e) {
                System.out.println(String.format(&quot;%s è¢«æ‰“æ–­äº†&quot;, Thread.currentThread().getName()));
            } finally {
                LOCK.unlock();
            }
        }, &quot;t1&quot;);
        thread1.start();

        Thread thread2 = new Thread(() -&gt; {
            try {
                // æ‰“æ–­å®ƒ
                thread1.interrupt();
                LOCK.lock();
                System.out.println(String.format(&quot;%s æ‰“æ–­äº† %s&quot;, Thread.currentThread().getName(), thread1.getName()));
            } finally {
                // é‡Šæ”¾é”
                LOCK.unlock();
            }
        }, &quot;t2&quot;);
        thread2.start();
    }
}
</code></pre>
<p>è¾“å‡º :</p>
<pre><code class="language-java">t1 è¢«æ‰“æ–­äº†
t2 æ‰“æ–­äº† t1
</code></pre>
<h2 id="3-reentrantreadwritelock-è¯»å†™é”">3. ReentrantReadWriteLock è¯»å†™é”</h2>
<blockquote>
<p>â€‹	ä¸€ä¸ªè¯»å†™é”<strong>åªèƒ½åŒæ—¶å­˜åœ¨ä¸€ä¸ªå†™é” , ä½†æ˜¯å¯ä»¥å­˜åœ¨å¤šä¸ªè¯»é”</strong>ï¼Œ<strong>ä½†ä¸èƒ½åŒæ—¶å­˜åœ¨å†™é”å’Œè¯»é”</strong>ã€‚  è¿™å°±æ˜¯è¯»å†™é”çš„æ ¸å¿ƒ.</p>
<p>å¯¹äº<code>ReentrantReadWriteLock</code> å†…éƒ¨å…¶å®ç»´æŠ¤äº†ä¿©Lock , ä¸€ä¸ªæ˜¯ <code>ReadLock</code> ä¸€ä¸ªæ˜¯<code>WriteLock</code></p>
</blockquote>
<p>â€‹	**ReentrantReadWriteLock (è¯»å†™é”)å…¶å®æ˜¯ä¸¤æŠŠé”ï¼Œä¸€æŠŠæ˜¯ WriteLock (å†™é”)ï¼Œä¸€æŠŠæ˜¯è¯»é”ï¼Œ ReadLock ã€‚**è¯»å†™é”çš„è§„åˆ™æ˜¯ï¼š<code>è¯»è¯»ä¸äº’æ–¥ã€è¯»å†™äº’æ–¥ã€å†™å†™äº’æ–¥</code>ã€‚åœ¨ä¸€äº›å®é™…çš„åœºæ™¯ä¸­ï¼Œ**è¯»æ“ä½œçš„é¢‘ç‡è¿œè¿œé«˜äºå†™æ“ä½œï¼Œå¦‚æœç›´æ¥ç”¨ä¸€èˆ¬çš„é”è¿›è¡Œå¹¶å‘æ§åˆ¶çš„è¯ï¼Œå°±ä¼šè¯»è¯»äº’æ–¥ã€è¯»å†™äº’æ–¥ã€å†™å†™äº’æ–¥ï¼Œæ•ˆç‡ä½ä¸‹ï¼Œè¯»å†™é”çš„äº§ç”Ÿå°±æ˜¯ä¸ºäº†ä¼˜åŒ–è¿™ç§åœºæ™¯çš„æ“ä½œæ•ˆç‡ã€‚**ä¸€èˆ¬æƒ…å†µä¸‹ç‹¬å é”çš„æ•ˆç‡ä½æ¥æºäºé«˜å¹¶å‘ä¸‹å¯¹ä¸´ç•ŒåŒºçš„æ¿€çƒˆç«äº‰å¯¼è‡´çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚å› æ­¤å½“å¹¶å‘ä¸æ˜¯å¾ˆé«˜çš„æƒ…å†µä¸‹ï¼Œè¯»å†™é”ç”±äºéœ€è¦é¢å¤–ç»´æŠ¤è¯»é”çš„çŠ¶æ€ï¼Œå¯èƒ½è¿˜ä¸å¦‚ç‹¬å é”çš„æ•ˆç‡é«˜ï¼Œå› æ­¤éœ€è¦æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©ä½¿ç”¨ã€‚</p>
<p>â€‹		ReentrantReadWriteLock çš„åŸç†ä¹Ÿæ˜¯åŸºäº AQS è¿›è¡Œå®ç°çš„ï¼Œä¸ ReentrantLock çš„å·®åˆ«åœ¨äº ReentrantReadWriteLock é”æ‹¥æœ‰å…±äº«é”ã€æ’ä»–é”å±æ€§ã€‚è¯»å†™é”ä¸­çš„åŠ é”ã€é‡Šæ”¾é”ä¹Ÿæ˜¯åŸºäº Sync (ç»§æ‰¿äº AQS )ï¼Œå¹¶ä¸”ä¸»è¦ä½¿ç”¨ AQS ä¸­çš„ state å’Œ node ä¸­çš„ waitState å˜é‡è¿›è¡Œå®ç°çš„ã€‚å®ç°è¯»å†™é”ä¸å®ç°æ™®é€šäº’æ–¥é”çš„ä¸»è¦åŒºåˆ«åœ¨äºéœ€è¦åˆ†åˆ«è®°å½•è¯»é”çŠ¶æ€åŠå†™é”çŠ¶æ€ï¼Œå¹¶ä¸”ç­‰å¾…é˜Ÿåˆ—ä¸­éœ€è¦åŒºåˆ«å¤„ç†ä¸¤ç§åŠ é”æ“ä½œã€‚ ReentrantReadWriteLock ä¸­å°† AQS ä¸­çš„ int ç±»å‹çš„ state åˆ†ä¸ºé«˜ 16 ä½ä¸ç¬¬ 16 ä½åˆ†åˆ«è®°å½•è¯»é”å’Œå†™é”çš„çŠ¶æ€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<figure data-type="image" tabindex="3"><img src="https://tyut.oss-accelerate.aliyuncs.com/image/2020-20-22/e79ad658-a8b0-4929-9198-d4cc448d0ff5.webp" alt="" loading="lazy"></figure>
<pre><code class="language-java">private static final ReadWriteLock RW_LOCK = new ReentrantReadWriteLock();

try {
    RW_LOCK.readLock().lock();

    // do , åŸºæœ¬å°±è¿™ä¸ª
} finally {
    RW_LOCK.readLock().unlock();
}
</code></pre>
<h2 id="4-volatile-ä¿è¯æ•°æ®å¯è§æ€§">4. volatile ä¿è¯æ•°æ®å¯è§æ€§</h2>
<blockquote>
<p>â€‹	å½“ä¸€ä¸ªå˜é‡è¢«å®šä¹‰æˆvolatileä¹‹åï¼Œå®ƒå°†å…·å¤‡ä¸¤é¡¹ç‰¹æ€§:ç¬¬ä¸€é¡¹æ˜¯ä¿è¯æ­¤å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹çš„å¯è§æ€§ï¼Œ<strong>è¿™é‡Œçš„â€å¯è§æ€§â€æ˜¯æŒ‡å½“ä¸€æ¡çº¿ç¨‹ä¿®æ”¹äº†è¿™ä¸ªå˜é‡çš„å€¼ï¼Œæ–°å€¼å¯¹äºå…¶ä»–çº¿ç¨‹æ¥è¯´æ˜¯å¯ä»¥ç«‹å³å¾—çŸ¥çš„</strong>ã€‚è€Œæ™®é€šå˜é‡å¹¶ä¸èƒ½åšåˆ°è¿™ä¸€ç‚¹ï¼Œæ™®é€šå˜é‡çš„å€¼åœ¨çº¿ç¨‹é—´ä¼ é€’æ—¶å‡éœ€è¦é€šè¿‡ä¸»å†…å­˜æ¥å®Œæˆã€‚æ¯”å¦‚ï¼Œçº¿ç¨‹Aä¿®æ”¹ä¸€-ä¸ªæ™®é€šå˜é‡çš„å€¼ï¼Œç„¶åå‘ä¸»å†…å­˜è¿›è¡Œå›å†™ï¼Œå¦å¤–ä¸€æ¡çº¿ç¨‹Båœ¨çº¿ç¨‹Aå›å†™å®Œæˆäº†ä¹‹åå†å¯¹ä¸»å†…å­˜è¿›è¡Œè¯»å–æ“ä½œ,æ–°å˜é‡å€¼æ‰ä¼šå¯¹çº¿ç¨‹Bå¯è§ã€‚ --- å¼•ç”¨è‡ªæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº</p>
</blockquote>
<p>æˆ‘ä»¬ä»¥ä¸€ä¸ªä¾‹å­ä¸ºè®²è§£å¯¹è±¡.</p>
<pre><code class="language-java">// ç”³æ˜ä¸€ä¸ªå˜é‡ 
static boolean flag = true;
public static void main(String[] args) {
    new Thread(() -&gt; {
        sleep(1000);
        flag = false;
    }).start();

    // ç­‰å¾…ä»–å˜ä¸ºfalseå°±ä¸æ‰§è¡Œäº†.(è¿™é‡Œä¸»çº¿ç¨‹ä¸€ç›´ç©ºè½¬)
    while (flag) {
		// do nothing
    }
    System.out.println(&quot;shutdown&quot;);
}
</code></pre>
<p>æˆ‘ä»¬å‘ç°1000msåå¹¶ä¸ä¼šè¾“å‡ºshutdown. ä¼šä¸€ç›´é˜»å¡.</p>
<p>ä½†æ˜¯æˆ‘ä»¬å°† <code>flag</code> åŠ å…¥ <code>volatile</code>  ,å†æ¬¡è¿è¡Œ.  ä¼šå‘ç°1000msåè¾“å‡ºç»“æŸ. è¿™å°±æ˜¯volatileçš„ä½œç”¨. ä¿è¯æ•°æ®çš„å¤šçº¿ç¨‹ä¸­å¯è§æ€§.</p>
<p>å¦‚æœä½ æœ‰å…´è¶£çš„è¯ ,å¯ä»¥çœ‹çœ‹jucåŒ…ä¸­çš„ <code>FutureTask</code>   , å…¶ä»–ä»–ä¹Ÿæ˜¯è¿™ä¹ˆå®ç°çš„.</p>
<p>Volatileè¿˜æœ‰å¦å¤–ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯å†…å­˜å±éšœ . ä»–ä¼šå¯¹äºæŒ‡ä»¤é‡æ’è¿›è¡Œé™åˆ¶. æˆ‘ä»¬çœ‹çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­.</p>
<pre><code class="language-java">public class Singleton {
    // åŠ äº†volatileä¿®é¥°
    private volatile static Singleton instance;

    public static Singleton getInstance() {
        // åŒé‡æ£€æµ‹
        if (instance == null) {
            synchronized (Singleton.class) {
                if (instance == null) {
                    instance = new Singleton();
                }
            }
        }
        return instance;
    }

    public static void main(String[] args) {
        Singleton.getInstance();
    }
}
</code></pre>
<p>ä»–è¿›è¡ŒJITç¼–è¯‘åçš„ä»£ç æ˜¯</p>
<figure data-type="image" tabindex="4"><img src="https://tyut.oss-accelerate.aliyuncs.com/image/2020-20-22/ea7bbc4a-5537-4cbd-b689-9c11a140f4fa.png" alt="" loading="lazy"></figure>
<p>â€‹	é€šè¿‡å¯¹æ¯”å‘ç°ï¼Œå…³é”®å˜åŒ–åœ¨äºæœ‰volatileä¿®é¥°çš„å˜é‡ï¼Œ èµ‹å€¼å(å‰é¢mov%eax, 0x 150(%esi)è¿™å¥ä¾¿æ˜¯èµ‹å€¼æ“ä½œ)å¤šæ‰§è¡Œäº†-ä¸ª&quot;lock addl$0x0, (%esp)&quot; æ“ä½œï¼Œè¿™ä¸ªæ“ä½œçš„ä½œç”¨ç›¸å½“äº-ä¸€ä¸ª<strong>å†…å­˜å±éšœ(Memory Barrieræˆ–Memory Fence,æŒ‡é‡æ’åºæ—¶ä¸èƒ½æŠŠåé¢çš„æŒ‡ä»¤é‡æ’åºåˆ°å†…å­˜å±éšœä¹‹å‰çš„ä½ç½®)</strong>ï¼Œåªæœ‰ä¸€ä¸ªå¤„ç†å™¨è®¿é—®å†…å­˜æ—¶ï¼Œå¹¶ä¸éœ€è¦å†…å­˜å±éšœ;ä½†å¦‚æœæœ‰ä¸¤ä¸ªæˆ–æ›´å¤šå¤„ç†å™¨è®¿é—®åŒ- -å—å†…å­˜ï¼Œä¸”å…¶ä¸­æœ‰ä¸€ä¸€ä¸ªåœ¨è§‚æµ‹å¦ä¸€ä¸ªï¼Œå°±éœ€è¦å†…å­˜å±éšœæ¥ä¿è¯ä¸€è‡´æ€§äº†ã€‚ ä½†æ˜¯æŒ‡ä»¤é‡æ’æ˜¯å±äºå¤„ç†å™¨é‡‡ç”¨äº†å…è®¸å¤šæ¡æŒ‡ä»¤ä¸æŒ‰ç¨‹åºè§„å®šçš„é¡ºåºåˆ†æ³•ç»™å„ä¸ªç›¸åº”çš„ç”µè·¯å•å…ƒè¿›è¡Œå¤„ç† . ä½†ä¸æ˜¯è¯´æŒ‡ä»¤æ˜¯ä»»æ„é‡æ’çš„ , å¦‚æœæœ‰ä¾èµ–çš„å°±ä¸ä¼šé‡æ’, æ¯”å¦‚ A+2 ç„¶åå†å°† A*2, æ˜¾ç„¶ä¸èƒ½æŒ‡ä»¤é‡æ’, ä½†æ˜¯ æˆ‘ä»¬å¼•å…¥Bå˜é‡ . å¯èƒ½æ‰§è¡Œåœ¨Aå‰é¢ Aåé¢ ä¸­é—´éƒ½å¯ä»¥å“‡. å› ä¸ºABå˜é‡æ— å…³.</p>
<p>æ€»ç»“ä¸€ä¸‹ :  volatileç¬¬ä¸€å¯ä»¥ä¿è¯æ•°æ®çš„å¯è§æ€§, ç¬¬äºŒä»–å¯ä»¥åˆ¶æ­¢æŒ‡ä»¤é‡æ’ .  å¯¹ä¸volitionå˜é‡æˆ‘ä»¬è¦çŸ¥é“ä»–çš„è¯»å–æ¶ˆè€—å’Œæ™®é€šå˜é‡ä¸€æ ·, ä½†æ˜¯å†™ä¼šå¼•èµ·å¾ˆå¤§çš„æ¶ˆè€—. (è¿™é‡Œçš„æ¶‰åŠåˆ°å¤šçº¿ç¨‹å¯¹äºvolatileå˜é‡çš„æ‰§è¡Œé¡ºåº, å«åš<code>happen-before</code> , å…¶å®å°±æ˜¯å…ˆè¡Œå…ˆå‘ç”Ÿçš„æ„æ€,åšå•¥äº‹ä¸å¯èƒ½æ²¡æœ‰å…ˆå,åªæ˜¯ç²¾åº¦ä¸å¤Ÿ) ,  è¿˜æœ‰æ¶‰åŠåˆ°volatileå˜é‡çš„å¤§é‡è¯»å†™, å› ä¸ºæ¯æ¬¡ä¿®æ”¹éƒ½éœ€è¦ç«‹é©¬åˆ·æ–°ä¸»å­˜. é‚£ä¹ˆä»–ä¼šå¼•èµ·å…¶ä»–å˜é‡å—éš¾ , è¿™å°±æ˜¯ false-sharing , å«åšä¼ªå…±äº« , å¯ä»¥åŠ å…¥æ³¨è§£,æˆ–åˆ™å¼•å…¥é¢å¤–å˜é‡è¿›è¡ŒåŠ å¿«è¯»å†™.</p>
<h2 id="5-åŸå­æ€§é—®é¢˜">5. åŸå­æ€§é—®é¢˜</h2>
<p>ä¸¾ä¾‹ :</p>
<blockquote>
<p>Javaä¸­æ‰§è¡Œ x=x+1 æ“ä½œæ˜¯,  å°†è¯»å–å˜é‡x,ç„¶åå…¥æ ˆ, å°†1å…¥æ ˆ, å°†æ ˆé¡¶ä¸¤ä¸ªæ•°ç›¸åŠ , ç„¶åç»“æœå…¥æ ˆ, å°†ç»“æœä¿å­˜åœ¨å˜é‡xä¸­'</p>
<p>æ‰€ä»¥ç»“æœå°±æ˜¯åˆ†ä¸º  è¯»å–å˜é‡x  , å°†x+1 å¾—åˆ°çš„ç»“æœå†èµ‹å€¼ç»™x  .</p>
<p>è¿™å°±æ˜¯ä¸€ä¸ªåŸå­æ“ä½œ, ä»–ä¸æ˜¯ä¸€æ­¥, è€Œæ˜¯å‡ æ­¥æ˜¯ä¸€ä¸ªåŸå­  , å¯ä»¥è¯´æ˜¯ä¸€ä¸ªäº‹åŠ¡.  â€‹</p>
</blockquote>
<p>æ‰€ä»¥å¼•å…¥äº† atomicç±». é‡Œé¢éƒ½æ˜¯åŸå­æ“ä½œ. åŸºäºCASå®ç°çš„,åŒæ—¶è¿˜æœ‰è‡ªæ—‹æ“ä½œ.</p>

								<span id="footnote"></span>
								<div id="warn"></div>
							</div>
							<div class="toc-container"><ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#1-synchronized%E5%85%B3%E9%94%AE%E5%AD%97-%E4%B8%8E-lock%E9%94%81">1. synchronizedå…³é”®å­— ä¸ Locké”</a></li>
<li><a href="#2-reentrantlock-%E5%8F%AF%E9%87%8D%E5%85%A5%E9%94%81">2. ReentrantLock å¯é‡å…¥é”</a>
<ul>
<li><a href="#1-%E5%8F%AF%E9%87%8D%E5%85%A5"><strong>1ã€å¯é‡å…¥</strong></a></li>
<li><a href="#2%E9%9C%80%E8%A6%81%E6%89%8B%E5%8A%A8%E5%8A%A0%E9%94%81-%E8%A7%A3%E9%94%81">2.éœ€è¦æ‰‹åŠ¨åŠ é”ã€è§£é”</a></li>
<li><a href="#3-%E6%94%AF%E6%8C%81%E8%AE%BE%E7%BD%AE%E9%94%81%E7%9A%84%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4">3. æ”¯æŒè®¾ç½®é”çš„è¶…æ—¶æ—¶é—´</a></li>
<li><a href="#4-%E6%94%AF%E6%8C%81%E5%85%AC%E5%B9%B3%E9%9D%9E%E5%85%AC%E5%B9%B3%E9%94%81">4. æ”¯æŒå…¬å¹³/éå…¬å¹³é”</a></li>
<li><a href="#5-%E5%8F%AF%E4%B8%AD%E6%96%AD%E9%94%81">5. å¯ä¸­æ–­é”</a></li>
</ul>
</li>
<li><a href="#3-reentrantreadwritelock-%E8%AF%BB%E5%86%99%E9%94%81">3. ReentrantReadWriteLock è¯»å†™é”</a></li>
<li><a href="#4-volatile-%E4%BF%9D%E8%AF%81%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%81%E6%80%A7">4. volatile ä¿è¯æ•°æ®å¯è§æ€§</a></li>
<li><a href="#5-%E5%8E%9F%E5%AD%90%E6%80%A7%E9%97%AE%E9%A2%98">5. åŸå­æ€§é—®é¢˜</a></li>
</ul>
</li>
</ul>
</div>
						</div>
						<div id="fullPage"><canvas id="canvas"></canvas></div>
				</article>
				<div id="eof"><span>EOF</span></div>
				<div class="round-shape-one"></div>
				<section>
					<div class="doc_comments">
							<div id="valine-container"></div>
					</div>
				</section>
			</div>
		</div>
	</div>
	<script>
		"use strict";
		! function () {
			// for (var n = document.getElementsByTagName("pre"), e = n.length, s = 0; s < e; s++) {
			// 	n[s].innerHTML = '<span class="line-number"></span>' + n[s].innerHTML + '<span class="cl"></span>';
			// 	for (var a = n[s].innerHTML.split(/\n/).length, r = 0; r < a - 1; r++) {
			// 		n[s].getElementsByTagName("span")[0].innerHTML += "<span>" + (r + 1) + "</span>"
			// 	}
			// }
		}();
		let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");
		window.addEventListener("scroll", event => {
			let fromTop = window.scrollY;
			mainNavLinks.forEach((link, index) => {
				let section = document.getElementById(decodeURI(link.hash).substring(1));
				let nextSection = null
				if (mainNavLinks[index + 1]) {
					nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(
						1));
				}
				if (section.offsetTop <= fromTop) {
					if (nextSection) {
						if (nextSection.offsetTop > fromTop) {
							link.classList.add("currentToc");
						} else {
							link.classList.remove("currentToc");
						}
					} else {
						link.classList.add("currentToc");
					}
				} else {
					link.classList.remove("currentToc");
				}
			});
		});
		var list = document.querySelectorAll(".katex");
		for (var i = 0; i < list.length; i++) {
			list[i].style.display = "unset"
		};
		var h = document.documentElement,
			b = document.body,
			st = "scrollTop",
			sh = "scrollHeight",
			progress = document.querySelector(".progress"),
			scroll;
		document.addEventListener("scroll", function () {
			scroll = (h[st] || b[st]) / ((h[sh] || b[sh]) - h.clientHeight) * 100;
			progress.style.setProperty("--scroll", scroll + "%")
		});
		var wxScale = new WxScale({
			fullPage: document.querySelector("#fullPage"),
			canvas: document.querySelector("#canvas")
		});
		var imgBox = document.querySelectorAll("#md_block img");
		for (var i = 0; i < imgBox.length; i++) {
			imgBox[i].onclick = function (e) {
				wxScale.start(this)
			}
		};
	</script>
	<style>
		#magnifyImg {
			position: fixed;
			left: 0;
			top: 0;
			text-align: center;
			width: 100%;
			display: none;
			z-index: 9999
		}

		#magnifyImg img {
			object-fit: contain;
			background: #eaecef;
			padding: 15px;
			border-radius: 10px;
			height: auto;
			width: auto;
			vertical-align: middle
		}
	</style>
	<a id="scrollUp"href="#top"style="position: fixed; z-index: 2147483647; display: block;"></a><div class="footer animated fadeInDown"><div class="site_footer"><div class="mysocials"><div class="my_socials"><a href="https://github.com/Anthony-Dong"title="github"><i class="iconfont icon-github"></i></a><a href="fanhaodong516@gmail.com"title="envelope"><i class="iconfont icon-envelope"></i></a></div></div><div class="copyright"id="copyright">You Are My Everything. <a href="mailto:fanhaodong516@gmail.com" target="blank">Send Email</a>CopyrightÂ©2018-2020<a href="https://anthony-dong.github.io"style="margin:0;">Serence</a>.</div><span style="display: inline;margin-right:15px;">ğŸ‘<strong><span id="count-page">168271</span></strong></span><span id="busuanzi_container_page_pv"style="display: inline;"><span>ğŸ“š<strong>186</strong>posts</span></div></div><script>console.log("\n %c \u26a1Anthony-Dong's Blog:https://anthony-dong.github.io ,Github:https://github.com/Anthony-Dong ,Email:fanhaodong516@gmail.com ,æœ‰äº‹æƒ…æ¬¢è¿è”ç³». \n\n","color: #ffffff; background: rgba(49, 49, 49, 0.85); padding:5px 0;border-radius:5px;",);</script>
	<script type="text/javascript" async src="https://anthony-dong.github.io/media/js/prism.js"></script>
</body>
</html>
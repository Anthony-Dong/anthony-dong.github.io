<!DOCTYPE html>
<html lang="en">
<head>
	<link rel="shortcut icon"href="https://anthony-dong.github.io/favicon.ico"type="image/x-icon"/><meta name="viewport"content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/><meta name="apple-mobile-web-app-capable"content="yes"/><meta name="apple-mobile-web-app-status-bar-style"content="black"/><meta name="format-detection"content="telephone=no"/><meta name="renderer"content="webkit"/><meta name="description"content="Anthony-Dongçš„ä¸ªäººåšå®¢"/><meta charset="UTF-8"/><title>é™æµç®—æ³• - åŸºæœ¬å®ç° | Anthony-Dong</title><link href="https://anthony-dong.github.io/styles/main.css"type="text/css"rel="stylesheet"/><script src="https://anthony-dong.github.io/media/js/magnify.min.js"></script>
	<link rel="canonical" href="https://anthony-dong.github.io/post/xian-liu-chang-jian-de-suan-fa-shi-xian/" />
</head>
<body>
	<div class="progress"></div><style>.progress{background:linear-gradient(to right,#87ceeb var(--scroll),transparent 0);background-repeat:no-repeat;position:fixed;width:100%;height:4px;z-index:1}</style><div class="darkmode-background"></div><div class="darkmode-layer"></div>
<noscript><p class="warn" >æœ¬é¡µé¢éœ€è¦æµè§ˆå™¨æ”¯æŒï¼ˆå¯ç”¨ï¼‰JavaScript</p></noscript><div class="header"><div class="logo_title"><div class="title animated fadeInDown"><a href="https://anthony-dong.github.io"><img alt="logo" style="display:inline-block;" src="https://anthony-dong.github.io/images/avatar.png"/></a><h1 title="Anthony-Dong" class="weaklink shift"><a  href="/">Anthony-Dong</a></h1>

<div class="navbar weaklink">
<div class="normal_nav">
<div class="bitcron_nav_container"><div class="bitcron_nav"><div class="bitcron_nav"><div style="display:flex;justify-content:center;"><nav class="mixed_site_nav_wrap site_nav_wrap"><ul class="mixed_site_nav site_nav sm sm-base">	<li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >é¦–é¡µ</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >å½’æ¡£</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/tags" class="selected active current nav__item" >æ ‡ç­¾</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >å…³äº</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/link" class="selected active current nav__item" >å‹é“¾</a></li></ul></nav>
<div style="float:right;margin-top:1em"><form id="gridea-search-form" data-update="1578893743252" action="/search/index.html"><input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="Search..."></form></div>
<div style="margin-left:0.5em;margin-top:1.2em"><input id="switch_default" onclick="mobileBtn()" type="checkbox" class="switch_default"><label for="switch_default" class="toggleBtn"></label></div></div>
<div class="clear clear_nav_inline_end"></div></div></div><div class="clear clear_nav_end"></div></div></div><div class="hamberger" href="javascript:void(0)" onclick="btn_toggle();"><i class="iconfont icon-category"></i></div></div></div></div>
<div id="hn" class="no-js hidden_nav animated fadeInDown"><div class="bitcron_nav_container"><div class="bitcron_nav"><nav class="mixed_site_nav_wrap site_nav_wrap"><ul class="mixed_site_nav site_nav sm sm-base">	<li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >é¦–é¡µ</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >å½’æ¡£</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/tags" class="selected active current nav__item" >æ ‡ç­¾</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >å…³äº</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/link" class="selected active current nav__item" >å‹é“¾</a></li></ul><div class="clear clear_nav_inline_end"></div></nav></div><div class="clear clear_nav_end"></div></div>
<div style="display:flex;justify-content:center;inline-block;text-align:center;margin-top:7%"><div><form id="gridea-search-form-1" data-update="1614224679162" action="/search/index.html"><input class="search-input" autocomplete="off" spellcheck="false" name="q"  placeholder="Search..." /></form></div><div style="margin-left:0.5em"><input id="switch_default_h" onclick="mobileBtn()" type="checkbox" class="switch_default"><label for="switch_default" class="toggleBtn"></label></div></div>
</div></div>
<script>function enableDarkmode(){document.body.classList.add("darkmode"),document.getElementById("switch_default").checked=1,document.getElementById("switch_default_h").checked=1}function removeDarkmode(){document.body.classList.remove("darkmode"),document.getElementById("switch_default").checked=0,document.getElementById("switch_default_h").checked=0}function getCookie(a){var b,c=new RegExp("(^| )"+a+"=([^;]*)(;|$)");return(b=document.cookie.match(c))?unescape(b[2]):null}cookie=getCookie("darkmode"),"enable"==cookie&&enableDarkmode(),window.matchMedia("(prefers-color-scheme: dark)").matches&&"disable"!==cookie&&(enableDarkmode(),document.cookie="darkmode=enable; path=/");var mobileBtn=function(){1==document.getElementById("switch_default").checked?(enableDarkmode(),document.cookie="darkmode=enable; path=/"):(removeDarkmode(),document.cookie="darkmode=disable; path=/")};</script>

	<div class="main">
		<div class="main-inner">
			<div class="content">
				<article class="post">
					<script src='https://anthony-dong.github.io/media/js/Valine.min.js'></script><style>.v .vlist .vcard .vh .vmeta .vat{font-size:.8125em;color:#9d7873;cursor:pointer;float:right}.v .vlist .vcard .vhead .vsys{display:none}</style ><script type="text/javascript">new Valine(ValineInfo)</script>
					<h2 class="post_title sm_margin"><a>é™æµç®—æ³• - åŸºæœ¬å®ç°</a></h2>
					<script>
						function lan() {
							if (document.getElementById("lan").innerText == "ç¹") {
								var s = document.getElementById("tongwenlet_cn");
								if (s != null) {
									document.body.removeChild(s)
								}
								var s = document.createElement("script");
								s.language = "javascript";
								s.type = "text/javascript";
								s.src = "https://cdn.jsdelivr.net/gh/qyxtim/Static@1.1/bookmarklet_tw.js";
								s.id = "tongwenlet_cn";
								document.body.appendChild(s);
								document.getElementById("lan").innerHTML = "ç®€"
							} else {
								if (document.getElementById("lan").innerText == "ç°¡") {
									var s = document.getElementById("tongwenlet_cn");
									if (s != null) {
										document.body.removeChild(s)
									}
									var s = document.createElement("script");
									s.language = "javascript";
									s.type = "text/javascript";
									s.src = "https://cdn.jsdelivr.net/gh/qyxtim/Static@1.1/bookmarklet_cn.js";
									s.id = "tongwenlet_cn";
									document.body.appendChild(s);
									document.getElementById("lan").innerHTML = "ç¹"
								}
							}
						};
					</script>
					<section class="post_details"><i class="iconfont icon-calendar"></i><span style="margin-right:15px">
							2019-12-05</span><i class="iconfont icon-browse"></i>
							<span class="leancloud_visitors" style="margin-right:15px" id="/post/xian-liu-chang-jian-de-suan-fa-shi-xian/">views <i class="leancloud-visitors-count" style="font-style: normal"></i></span>
							<span class="weaklink" style="margin-right:15px"><i class="iconfont icon-category"></i> <a
								href="https://anthony-dong.github.io/tag/h-oLWzEpzKL/"
								class="tag">ç®—æ³•</a></span><i class="iconfont icon-caret-down"></i><span
							style="margin-right:15px">2971å­—</span><i
							class="iconfont icon-naozhong"></i><span
							style="margin-right:15px">13 min read</span><a id="lan"
							href="javascript:void(0);" onclick="lan();" title="è°ƒæ•´ç®€ç¹ä½“" style="margin-right:15px;">ç¹</a>
						</section>

						<div style="display:flex">
							<div class="md_block" id="md_block">
								<div class="round-shape-one"></div>
								<blockquote>
<p>åœ¨å¼€å‘é«˜å¹¶å‘ç³»ç»Ÿæ—¶æœ‰ä¸‰æŠŠåˆ©å™¨ç”¨æ¥ä¿æŠ¤ç³»ç»Ÿï¼š<strong>ç¼“å­˜ã€é™çº§ã€ é™æµ</strong> , ä»Šå¤©æˆ‘ä»¬å°±è°ˆè°ˆ<code>é™æµ</code></p>
<p><strong>ç¼“å­˜</strong>ï¼šç¼“å­˜çš„ç›®çš„æ˜¯æå‡ç³»ç»Ÿè®¿é—®é€Ÿåº¦å’Œå¢å¤§ç³»ç»Ÿå¤„ç†å®¹é‡<br>
<strong>é™çº§</strong>ï¼šé™çº§æ˜¯å½“æœåŠ¡å™¨å‹åŠ›å‰§å¢çš„æƒ…å†µä¸‹ï¼Œæ ¹æ®å½“å‰ä¸šåŠ¡æƒ…å†µåŠæµé‡å¯¹ä¸€äº›æœåŠ¡å’Œé¡µé¢æœ‰ç­–ç•¥çš„é™çº§ï¼Œä»¥æ­¤é‡Šæ”¾æœåŠ¡å™¨èµ„æºä»¥ä¿è¯æ ¸å¿ƒä»»åŠ¡çš„æ­£å¸¸è¿è¡Œ<br>
<strong>é™æµ</strong>ï¼šé™æµçš„ç›®çš„æ˜¯é€šè¿‡å¯¹å¹¶å‘è®¿é—®/è¯·æ±‚è¿›è¡Œé™é€Ÿï¼Œæˆ–è€…å¯¹ä¸€ä¸ªæ—¶é—´çª—å£å†…çš„è¯·æ±‚è¿›è¡Œé™é€Ÿæ¥ä¿æŠ¤ç³»ç»Ÿï¼Œä¸€æ—¦è¾¾åˆ°é™åˆ¶é€Ÿç‡åˆ™å¯ä»¥æ‹’ç»æœåŠ¡ã€æ’é˜Ÿæˆ–ç­‰å¾…ã€é™çº§ç­‰å¤„ç†</p>
</blockquote>
<blockquote>
<p>â€‹	æˆ‘ä¸‹é¢ç®—æ³•çš„å®ç°åŸºæœ¬ä¸Šéƒ½ç”¨åˆ°äº†å®šæ—¶å™¨<code>Timer</code> , å…¶å®å…³äºæ—¶é—´çš„ä¹Ÿå¯ä»¥ä¸ç”¨å®šæ—¶å™¨, å¯ä»¥çœ‹çœ‹<code>Guava</code>çš„ <code>RateLimiter</code>, å®šæ—¶å™¨çš„å¥½å¤„æ˜¯æˆ‘ä¸ç”¨å¤„ç†æ—¶é—´é€»è¾‘ , ä½†æ˜¯éœ€è¦æ¶ˆè€—ä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œé€»è¾‘ , å½“é€»è¾‘ç®—åŠ›å‹åŠ›è¿‡å¤§ä¼šçº¿ç¨‹å¤„ç†ä¸è¿‡æ¥,æ•ˆæœä¸å¥½ ,  å¯ä»¥ä½¿ç”¨ä¸€ä¸‹ <code>ScheduledThreadPoolExecutor</code> çº¿ç¨‹æ± æ¥æ‰§è¡Œ,é™ä½å‹åŠ›</p>
<p>â€‹	åŒæ—¶è¿˜å¤§é‡ä½¿ç”¨äº†<code>é˜Ÿåˆ—</code>æ•°æ®ç»“æ„ ,æ˜¯å› ä¸ºç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹å¤§å¤šéœ€è¦é˜Ÿåˆ—, å…ˆè¿›å…ˆå‡ºçš„ç‰¹ç‚¹</p>
<p>â€‹	ç¬¬ä¸€èŠ‚æ˜¯ç¯å¢ƒæ­å»º , å†™å‡ºéœ€æ±‚ ,å’Œæ¥å£è¦æ±‚ , å’Œæµ‹è¯•ç”¨ä¾‹ ,åé¢å››èŠ‚å°±æ˜¯åŸºæœ¬ç®—æ³•</p>
</blockquote>
<h2 id="1-ç¯å¢ƒæ­å»º">1. ç¯å¢ƒæ­å»º</h2>
<p>æˆ‘ä»¬æ¨¡æ‹Ÿ<code>Filter#doFilter</code> æ¥å£è¿›è¡Œæµ‹è¯• , å…¨éƒ¨å®ç° <code>AbstractLimiter#limit</code>æ–¹æ³•</p>
<p><code>Filter</code> å®ç°</p>
<pre><code class="language-java">public interface Filter {

    default public void init() {
    }

    public void doFilter(ServletRequest request, ServletResponse response,
                         FilterChain chain);

    default public void destroy() {
    }
}
</code></pre>
<p><code>FilterChain</code> å®ç°</p>
<pre><code class="language-java">public interface FilterChain {

    void doFilter(ServletRequest request, ServletResponse response);
}
</code></pre>
<p><code>ServletRequest</code> å®ç°</p>
<pre><code class="language-java">public class ServletRequest {

    private String msg;

    public String getMsg() {
        return msg;
    }

    public void setMsg(String msg) {
        this.msg = msg;
    }

    @Override
    public String toString() {
        return &quot;ServletRequest{&quot; +
                &quot;msg='&quot; + msg + '\'' +
                '}';
    }

    public ServletRequest(String msg) {
        this.msg = msg;
    }
}
</code></pre>
<p><code>ServletResponse</code> å®ç°</p>
<pre><code>public class ServletResponse {


}
</code></pre>
<p><code>AbstractLimiter</code> å®ç°</p>
<pre><code class="language-java">public abstract class AbstractLimiter {

    /**
     * æœ€å¤§æµé‡
     */
    protected final int MAX_FlOW;

    /**
     * æ„é€ å™¨ , è¾“å…¥æ¯ç§’æœ€å¤§æµé‡
     * @param MAX_FlOW æœ€å¤§æµé‡
     */
    public AbstractLimiter(int MAX_FlOW) {
        this.MAX_FlOW = MAX_FlOW;
    }


    /**
     * å…·ä½“å®ç°çš„æ–¹æ³•
     * @param request è¯·æ±‚
     * @param response å“åº”
     * @param chain æ‰§è¡Œ
     */
    public abstract void limit(ServletRequest request, ServletResponse response, FilterChain chain);

}
</code></pre>
<p><code>Demo</code> æµ‹è¯•ç±»</p>
<pre><code class="language-java">public class Demo {

    @Test
    public void test() {
        
        // è¿‡æ»¤å™¨
        Filter filter = new Filter() {
            AbstractLimiter limit = null;

            @Override
            public void init() {
                // å…¥å£ ,æˆ‘ä»¬éƒ½æ˜¯æ¯ç§’é™åˆ¶ 100ä¸ªè¯·æ±‚
                limit = new LeakyBucketLimiter(100);
            }

            @Override
            public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) {
                limit.limit(request, response, chain);
            }
        };

        // è¿‡æ»¤å™¨åˆå§‹åŒ–
        filter.init();

        // è®¡æ—¶å™¨
        long start = System.currentTimeMillis();
        
        // è®¡æ•°å™¨
        AtomicInteger integer = new AtomicInteger(0);

        ExecutorService pool = Executors.newFixedThreadPool(10);
        // æ¨¡æ‹Ÿ4000æ¬¡è¯·æ±‚
        IntStream.range(0, 4000).forEach(e -&gt; {
            try {
                // æ¨¡æ‹Ÿè¯·æ±‚å»¶è¿Ÿ
                TimeUnit.MILLISECONDS.sleep(1);
            } catch (InterruptedException e1) {
                //
            }

            // å¤šçº¿ç¨‹æ‰§è¡Œ
            pool.execute(()-&gt;{
                filter.doFilter(new ServletRequest(&quot;&quot; + e), new ServletResponse(), new FilterChain() {
                    @Override
                    public void doFilter(ServletRequest request, ServletResponse response) {
                        // å›è°ƒæ¥å£
                        integer.incrementAndGet();
                        System.out.println(&quot;è¯·æ±‚ : &quot;+request.getMsg() + &quot; é€šè¿‡, æ‰§è¡Œçº¿ç¨‹ &quot;+Thread.currentThread().getName());
                    }
                });
            });
        });

        System.out.println(&quot;æ€»è€—æ—¶&quot; + (System.currentTimeMillis() - start));
        System.out.println(&quot;ä¸€å…±é€šè¿‡ : &quot; + integer.get());
    }
}
</code></pre>
<h2 id="2-è®¡æ•°å™¨ç®—æ³•">2. è®¡æ•°å™¨ç®—æ³•</h2>
<blockquote>
<p>â€‹	<code>è®¡æ•°å™¨ç®—æ³•(Counter)</code> é¡¾æ˜æ€è®®å°±æ˜¯ä¸€ä¸ªè®¡æ•°å™¨ , æ¯”å¦‚æˆ‘æ¯ç§’å¯ä»¥é€šè¿‡100ä¸ªè¯·æ±‚ , æˆ‘å‘¢æ¯è¿›æ¥ä¸€ä¸ªè¯·æ±‚, æˆ‘å°±å°†è®¡æ•°å™¨+1 , å½“è®¡æ•°å™¨åˆ°è¾¾äº†100,æ­¤æ—¶æˆ‘å°±ä¸è®©è¯·æ±‚è¿‡å» , ä½†æ˜¯ä»–å­˜åœ¨ä¸€ä¸ªé—®é¢˜ : æ¯”å¦‚æˆ‘ç¬¬999ms çš„æ—¶å€™è¿‡æ¥100ä¸ªè¯·æ±‚ , å½“åˆšåˆšè¿‡äº†1000msçš„æ—¶å€™åˆå§‹åŒ–äº†,ä½†æ˜¯åˆæ¥äº†100ä¸ªè¯·æ±‚ , æ­¤æ—¶å°±ä¼šå‘ç”Ÿå®é™…ä¸Šåœ¨è¿™0.1Sçš„æ—¶å€™å¤„ç†äº†200ä¸ªè¯·æ±‚ , ä¸¥é‡è¶…è½½äº†  , æ­¤æ—¶æœåŠ¡å™¨å¤„ç†ä¸äº†è€Œå…¨éƒ¨éƒ½è¯·æ±‚è¶…æ—¶äº†....</p>
</blockquote>
<pre><code class="language-java">public class CounterLimiter extends AbstractLimiter {

    private static final Integer initFlow = 0;

    private final AtomicInteger flow;

    public CounterLimiter(int MAX_FlOW) {
        super(MAX_FlOW);
		
        // åˆå§‹åŒ–è®¡æ•°å™¨
        flow = new AtomicInteger(initFlow);

        new Timer().schedule(new TimerTask() {
            @Override
            public void run() {
                // æ¯1000msåˆå§‹åŒ–ä¸€æ¬¡
                flow.set(initFlow);
            }
        }, 0, 1000);
    }

    public void limit(ServletRequest request, ServletResponse response, FilterChain chain) {
        // æ¯”è¾ƒæ˜¯å¦è¶…è½½
        if (flow.get() &lt; MAX_FlOW) {
		// é€šè¿‡ : è®¡æ•°å™¨+1
            flow.incrementAndGet();
            chain.doFilter(request, response);
        }
    }
}
</code></pre>
<h2 id="3-æ»‘åŠ¨çª—å£ç®—æ³•">3. æ»‘åŠ¨çª—å£ç®—æ³•</h2>
<blockquote>
<p>â€‹	<code>æ»‘åŠ¨çª—å£ç®—æ³•(Rolling - Window)</code> å¯ä»¥è¯´æ˜¯è®¡æ•°å™¨ç®—æ³•çš„ä¸€ç§æ”¹è¿› , ä»–å‘¢ , å°†è®¡ç®—å™¨ç»†åˆ†äº†, æ¯”å¦‚æˆ‘å°†1Sçš„ 1000ms ç»†åˆ†ä¸º10ä¸ª 100ms , æˆ‘ä»¬å°±æœ‰10ä¸ªè®¡æ•°å™¨ , æ¯”å¦‚ä¸Šé¢çš„é—®é¢˜ , 999mså’Œ1000msçš„é—®é¢˜, ç”±äºæˆ‘ä»¬æ˜¯è¿ç»­çš„, æ­¤æ—¶1000msè¿›æ¥çš„æˆ‘ä¹Ÿç®—è¿›å»äº†, æ­¤æ—¶å°±ä¸ä¼šå‡ºç°é‚£ç§æƒ…å†µ ,</p>
<p>â€‹	å½“æˆ‘ä»¬çš„é¢—ç²’åº¦è¶Šé«˜ , æ­¤æ—¶æ‰€è®¡ç®—çš„èµ„æºä¼šè¶Šå¤š,ä¹Ÿä¼šè¶Šç²¾ç¡® , å…¶å®å¯¹æ¯” <code>Hystrix</code>å’Œ<code>sentinel</code> éƒ½æ˜¯è¿™ç§æ€æƒ³, æ»‘åŠ¨çª—å£ç®—æ³• , ä¸»è¦æ˜¯è€ƒè™‘çš„è®¡ç®—èµ„æºå°‘çš„é—®é¢˜ ,</p>
<p>â€‹	æˆ‘çš„ç®—æ³•å¹¶ä¸æ˜¯æœ€ä¼˜ ,å…¶å®ä¸éœ€è¦ä½¿ç”¨<code>ArrayBlockingQueue</code>å»ç»´æŠ¤æ»‘å— , ç”±äºæˆ‘ä»¬æ˜¯å•ä¸ªçº¿ç¨‹å»æ‰§è¡Œå¹¶ä¸ä¼šå‡ºç°å¤šçº¿ç¨‹é—®é¢˜, å…¶å®å¯ä»¥ä½¿ç”¨ <code>LinkedList</code> æ¥æ¨¡æ‹Ÿé˜Ÿåˆ— , è¿˜æœ‰å…¶ä»–ç‚¹ä¹Ÿå¯ä»¥çœ‹ä¸€ä¸‹</p>
</blockquote>
<pre><code class="language-java">public class RollingWindowFilter extends AbstractLimiter {

    /**
     * æˆ‘ä»¬çš„æ»‘åŠ¨çª—å£å¯¹è±¡,åŒ…å«å¤šä¸ªçª—å£
     */
    private final Slider slider;

    /**
     * ç¨‹åºä¸­æš´éœ²çš„å”¯ä¸€ä¸€ä¸ªè®¡æ•°å™¨,å¯ä»¥ç§°ä¹‹ä¸ºå½“å‰çª—å£
     */
    private AtomicInteger counter;

    /**
     * è®¡æ•°å™¨åˆå§‹åŒ–å¤§å°
     */
    private static final int INIT_SIZE = 0;

    /**
     * æ¯”å¦‚çª—å£åˆ†ä¸º10å—,è¿™ä¸ªä»£è¡¨å…ˆè¿›å…¥9å—çª—å£çš„è®¡ç®—å€¼ , ä¸ºä»€ä¹ˆè¦å¼•å…¥æ˜¯å› ä¸ºä¸æµªè´¹è®¡ç®—èµ„æº, å¥½å¤šéƒ½æ˜¯é‡å¤è®¡ç®—
     */
    private final AtomicInteger preCount;


    /**
     * æˆ‘ä»¬é»˜è®¤é˜Ÿåˆ—å¤§å°æ˜¯ 20 ,å…¶å®é¢—ç²’åº¦å¾ˆé«˜äº†50msè®¡ç®—ä¸€æ¬¡, å¯ä»¥é‡è½½æ„é€ å‚æ•°è°ƒæ•´
     *
     * @param MAX_FlOW æœ€å¤§æµé‡
     */
    public RollingWindowFilter(int MAX_FlOW) {

        super(MAX_FlOW);

        // åˆå§‹åŒ–çª—å£,æ„Ÿè§‰æ”¹åå­—å«åšWindowsæ¯”è¾ƒå¥½ ....
        slider = new Slider(20);


        // åˆå§‹åŒ–å¯¹è±¡
        preCount = new AtomicInteger(INIT_SIZE);

        new Timer().schedule(new TimerTask() {
            @Override
            public void run() {

                ArrayBlockingQueue&lt;AtomicInteger&gt; queue = slider.blocks;

                // å½“å‰çª—å£å¤§å°
                int size = queue.size();

                /**
                 * åˆå§‹åŒ–çª—å£é•¿åº¦
                 */
                if (size &lt; slider.capacity) {
                    try {

                        /**
                         * è®¡ç®—å‰é¢çª—å£çš„è®¡æ•°å™¨æ€»å’Œ
                         * 
                         * è¿™é‡Œå…¶å®ç”±å¤šçº¿ç¨‹çš„å¹¶å‘é—®é¢˜ ,å…¶å®å¯ä»¥è®¾ç½®ä¸€ä¸ªæ ‡è¯†ç¬¦æ¥è¡¨ç¤ºå®Œæˆä¸å¦ .. æˆ‘æ‡’å¾—æ”¹äº† ,æˆ–è€…ä½ å°±å¤§é‡å®ä¾‹åŒ–å¯¹è±¡,ä¸ç”¨æˆ‘è¿™ä¸ªå•ä¸€å¯¹è±¡
                         */
                        preCount.set(INIT_SIZE);
                        if (size &gt; 0) {
                            queue.forEach(e -&gt; preCount.addAndGet(e.get()));
                        }

                        // æ–°å»ºä¸€ä¸ªè®¡æ•°å™¨, æ”¾å…¥å¯¹åº”çš„æ»‘å— ,å…¶å®å°±æ˜¯é˜Ÿå°¾
                        counter = new AtomicInteger(INIT_SIZE);
                        queue.put(counter);
                    } catch (InterruptedException e) {
                        //
                    }

                }

                /**
                 * å½“çª—å£é•¿åº¦åˆå§‹åŒ–å®Œæˆ
                 */
                if (size == slider.capacity) {

                    try {
                        // å‡ºå±€æœ€å…ˆè¿›æ¥çš„é‚£ä¸ª
                        queue.take();

                        // è®¡ç®—å‰é¢çª—å£çš„è®¡æ•°å™¨æ€»å’Œ , æœ‰å¤šçº¿ç¨‹å¹¶å‘é—®é¢˜
                        preCount.set(INIT_SIZE);
                        queue.forEach(e -&gt; preCount.addAndGet(e.get()));

                        
                        // æ–°å»ºä¸€ä¸ªè®¡æ•°å™¨, æ”¾å…¥å¯¹åº”çš„æ»‘å— ,å…¶å®å°±æ˜¯é˜Ÿå°¾
                        counter = new AtomicInteger(INIT_SIZE);
                        queue.put(counter);
                    } catch (InterruptedException e) {
                        //
                    }
                }
            }
        }, 0, 1000 / slider.capacity);
    }


    public void limit(ServletRequest request, ServletResponse response, FilterChain chain) {

        int cur = counter.get();
        int pre = preCount.get();
        int sum = cur + pre;

        if (sum &lt; MAX_FlOW) {
            counter.incrementAndGet();
            chain.doFilter(request, response);
        }
    }


    /**
     * æ»‘å—ç»„æˆ , ä¸€ä¸ªé˜Ÿåˆ—ç»´æŠ¤ä¸€ä¸ªå— , å…¶å®å¯ä»¥ç”¨LinkedListæ¥ç»´æŠ¤ , æˆ‘æ˜¯æ‡’å¾—æ”¹
     * &lt;p&gt;
     * ä¸€èˆ¬å†…éƒ¨ç±»æ¥è¯´çœ‹JDKæºç ä½ ä¼šå‘ç°éƒ½ä¼šç”¨private staticä¿®é¥° ,å› ä¸ºåå°„ä¸æ˜¯é™æ€å†…éƒ¨ç±»,æ— æ³•å®ä¾‹åŒ– , å’Œæ„é€ å™¨ä¸åŠ ä¿®é¥°
     */
    private static class Slider {
        // å¤šå°‘ä¸ªè®¡æ•°å™¨
        private final int capacity;
        // æ”¾ç½®è®¡æ•°å™¨
        private final ArrayBlockingQueue&lt;AtomicInteger&gt; blocks;

        Slider(int capacity) {
            this.blocks = new ArrayBlockingQueue&lt;&gt;(capacity);
            this.capacity = capacity;
        }
    }
}
</code></pre>
<h2 id="4-æ¼æ¡¶ç®—æ³•">4. æ¼æ¡¶ç®—æ³•</h2>
<blockquote>
<p>â€‹	å…¶å®æ‰€è°“çš„<code>æ¼æ¡¶ç®—æ³•(Leaky Bucket)</code>,æˆ‘ä»¬æƒ³ä¸€ä¸‹ , æœ‰ä¸€ä¸ªå…¥æ°´å£å’Œä¸€ä¸ªå‡ºæ°´å£ , æˆ‘ä»¬è¿™ä¿©å£æ§åˆ¶æƒåœ¨è°é‚£ ,å…¥æ°´å£æ— éå°±æ˜¯å¤§é‡çš„è¯·æ±‚, å‡ºæ°´å£å°±æ˜¯æˆ‘ä»¬æ”¾è¿‡çš„è¯·æ±‚ , æ‰€ä»¥ä»–æ˜¯ä¸€ä¸ª<code>ç”Ÿäº§è€… - æ¶ˆè´¹è€…æ¨¡å‹</code> , ç”Ÿäº§è€…å°±æ˜¯è¯·æ±‚ , æ¶ˆè´¹è€…å°±æ˜¯ä»¥ä¸€å®šé€Ÿåº¦æˆ‘ä»¬æ¶ˆè´¹è¯·æ±‚ ,</p>
<p>â€‹	æ¼æ¡¶ç®—æ³•å¯ä»¥ä½¿<code>è¯·æ±‚æµå‡ºçš„é€Ÿç‡æ˜¯å‡åŒ€çš„</code>, ä¸ç®¡ä½ å¤šå°‘è¯·æ±‚ , æˆ‘æµå‡ºçš„é€Ÿç‡æ˜¯å‡åŒ€çš„ , å½“æ¡¶æ»¡äº†å°±æº¢å‡º ,æ²¡æœ‰æ»¡åŠ è¿›æ¥å°±ç­‰ç€è¢«æµå‡ºå»</p>
<p>â€‹	å½“ä½ çœ‹æ‡‚æˆ‘ä¸Šé¢çš„ä¸¤æ®µè¯ , ä½ å°±ç†è§£äº†ä¸‹é¢çš„ä»£ç  , æˆ‘çš„æ³¨é‡Šååˆ†æ¸…æ™°</p>
</blockquote>
<pre><code class="language-java">public class LeakyBucketLimiter extends AbstractLimiter {

    /**
     * æˆ‘ä»¬çš„æ¼æ–—
     */
    private final LeakyBucket leakyBucket;

    /**
     * æ„é€ å™¨ , è¾“å…¥æ¯ç§’æœ€å¤§æµé‡
     *
     * @param MAX_FlOW æœ€å¤§æµé‡
     */
    public LeakyBucketLimiter(int MAX_FlOW) {
        super(MAX_FlOW);
        this.leakyBucket = new LeakyBucket(MAX_FlOW);
    }

    @Override
    public void limit(ServletRequest request, ServletResponse response, FilterChain chain) {
        try {
            // 1. è·å–æ¡¶å½“å‰æ°´çš„å¤§å°
            int size = leakyBucket.bucket.size();

            // 2. æ¯”è¾ƒæ¡¶é‡Œçš„æ°´æ˜¯å¦æ»¡äº†
            if (size &lt; leakyBucket.waterSize) {

                // æ²¡æœ‰æ»¡æˆ‘ä»¬å°±å°†æ°´æ”¾è¿›å»,å…¶å®è¿™é‡Œputä¹Ÿè¡Œ , offerä¹Ÿè¡Œ , çœ‹éœ€æ±‚
                leakyBucket.bucket.put(new Water(request, response, chain));
            }
        } catch (InterruptedException e) {
            //
        }
    }

    static class LeakyBucket {

        /**
         * èƒ½æ”¾å¤šå°‘æ°´,å…¶å®å°±æ˜¯é˜Ÿåˆ—å¤§å°
         */
        final int waterSize;

        /**
         * æˆ‘ä»¬çš„æ”¾æ°´çš„æ¡¶
         */
        final ArrayBlockingQueue&lt;Water&gt; bucket;

        public LeakyBucket(int MAX_FlOW) {
            this.waterSize = MAX_FlOW;
            bucket = new ArrayBlockingQueue&lt;&gt;(this.waterSize);

            /**
             * æ¨¡æ‹Ÿæ¶ˆè´¹ , 1Såªèƒ½è¿‡å»100ä¸ª ,è¯´æ˜ 100ms å¯ä»¥æ¶ˆè€—10ä¸ª, çœ‹ä½ çš„é¢—ç²’åº¦
             */
            new Timer().schedule(new TimerTask() {
                @Override
                public void run() {
                    // 100ms æµå‡ºå»10ä¸ª
                    for (int i = 0; i &lt; (waterSize / 10); i++) {
                        try {
                            // æµå‡ºçš„æ°´
                            Water water = bucket.take();

                            // æ‰§è¡Œæ‰
                            water.chain.doFilter(water.request, water.response);
                        } catch (InterruptedException e) {
                            //
                        }
                    }
                }
            }, 0, 100);
        }
    }


    /**
     * æˆ‘ä»¬çš„èŠ‚ç‚¹å¯¹è±¡, å…¶å®å¯ä»¥ç§°ä¹‹ä¸º æˆåŠŸæ³¨å…¥çš„æ°´ , ç­‰ç€è¢«æ¼æ¡¶æµå‡ºå»
     */
    static class Water {

        private ServletRequest request;

        private ServletResponse response;

        private FilterChain chain;

        public Water(ServletRequest request, ServletResponse response, FilterChain chain) {
            this.request = request;
            this.response = response;
            this.chain = chain;
        }
    }
}
</code></pre>
<h2 id="5-ä»¤ç‰Œæ¡¶ç®—æ³•">5. ä»¤ç‰Œæ¡¶ç®—æ³•</h2>
<blockquote>
<p>â€‹	<code>ä»¤ç‰Œæ¡¶ç®—æ³•(Token Bucket)</code> æ˜¯ä¸æ¼æ¡¶ç®—æ³•ç›¸åçš„æ€æƒ³, ä»–ä¹Ÿæ˜¯<code>ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹</code> ,åªæ˜¯è§’è‰²çš„äº’æ¢,  ä»–å‘¢æ˜¯æˆ‘ä»¬å»æ§åˆ¶ç”Ÿæˆ , è¯·æ±‚å»æ‰§è¡Œæ¶ˆè´¹ , ä¸¾ä¸ªæ —å­ : æ¯”å¦‚æˆ‘ä»¬é™æµ100 , æ­¤æ—¶æˆ‘ä»¬å°±æ¯100msç”Ÿæˆ10ä¸ªä»¤ç‰Œ , å½“ä»¤ç‰Œæ•°è¾¾åˆ°100 æˆ‘ä»¬å°±ä¸ç”Ÿäº§ äº†, å½“ä¸€ä¸ªè¯·æ±‚è¿‡æ¥ , å°±ä¼šå»æ‹¿æ‰ä¸€ä¸ªä»¤ç‰Œ , å¦‚æœæ‹¿åˆ°äº†å°±é€šè¿‡äº†, æ‹¿ä¸åˆ°å°±æ‹’ç»</p>
<p>â€‹	<strong>æ ¹æ®è¿™ä¸ªæˆ‘ä»¬å¯ä»¥å’Œæ¼æ¡¶ç®—æ³•åšæ¯”è¾ƒ ,å‡è®¾éƒ½æ˜¯åˆšåˆšå¼€å§‹ , æ­¤æ—¶éƒ½æ˜¯100ä¸ªè¯·æ±‚è¿‡æ¥ , ä»¤ç‰Œæ¡¶å¯èƒ½ä¼šæ‹’ç»æ‰90ä¸ª,å› ä¸ºæˆ‘åªç”Ÿäº§äº†10ä¸ªä»¤ç‰Œ ,ä½†æ˜¯æ¼æ¡¶å‘¢ä»–ä¸ä¼š, ä»–ä¼šå°†100ä¸ªè¯·æ±‚å…¨éƒ¨æ”¾è¿›å»æ…¢æ…¢æ¶ˆè´¹ , æ˜¯å› ä¸ºæˆ‘çš„æ¡¶å®¹é‡æ˜¯100,å¯ä»¥æ”¾è¿›å»è¿™ä¹ˆå¤šè¯·æ±‚ , è¿™å°±æ˜¯è¿™ä¿©çš„åŒºåˆ« .... å…¶å®ç¨³å®šäº†å‡ ä¹ä¹ˆåŒºåˆ«</strong></p>
<p>â€‹	<code>ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹</code> çš„æ€æƒ³è½¬æ¢å¯ä»¥æ›´åŠ ç†æ¸…æ€è·¯ , æ¨¡å‹çš„é€‰æ‹©æœ‰æ—¶å€™æ˜¯è§£å†³é—®é¢˜çš„ä¸€ä¸ªåˆé€‚çš„æ–¹å¼</p>
<p>â€‹	ä»¤ç‰Œæ¡¶ç®—æ³• ç½‘ä¸Šå¤§å¤šéƒ½æ˜¯é‡‡ç”¨çš„ <code>Guava</code>çš„ <code>RateLimiter</code>å®ç°çš„ , è¿™é‡Œæˆ‘å°±å®ç°ä¸¤ç§ ä¸€ç§æ˜¯è‡ªå·±å®ç°, ä¸€ç§æ˜¯ä½¿ç”¨<code>RateLimiter</code>,</p>
</blockquote>
<h3 id="1-è‡ªå·±å®ç°çš„ä»¤ç‰Œæ¡¶">1. è‡ªå·±å®ç°çš„ä»¤ç‰Œæ¡¶</h3>
<pre><code class="language-java">public class TokenBucketLimiter extends AbstractLimiter {

    /**
     * ä»¤ç‰Œæ¡¶
     */
    private final TokenBucket tokenBucket;

    /**
     * æ„é€ å™¨ , è¾“å…¥æ¯ç§’æœ€å¤§æµé‡
     *
     * @param MAX_FlOW æœ€å¤§æµé‡
     */
    public TokenBucketLimiter(int MAX_FlOW) {
        super(MAX_FlOW);
        this.tokenBucket = new TokenBucket(MAX_FlOW);
    }


    @Override
    public void limit(ServletRequest request, ServletResponse response, FilterChain chain) {
        /**
         * è¿™é‡Œæˆ‘ä»¬å°±ä¸ä½¿ç”¨ takeçš„é˜»å¡æ€æƒ³äº† ,ç›´æ¥pollå»æ‹‰å» ,ç„¶åç­‰å¾…5mS ,  å¦‚æœæ‹‰å»ä¸åˆ°ç›´æ¥è¿”å›å¤±è´¥ , å…¶å®ç­‰å¾…çš„é•¿äº†ç‚¹
         */
        try {
            // å°è¯•å»è·å–ä¸€ä¸ªä»¤ç‰Œ
            Token token = tokenBucket.bucket.poll(5, TimeUnit.MILLISECONDS);
            
            // æ‹¿åˆ°é€šè¿‡
            if (null != token) {
                chain.doFilter(request, response);
            }

        } catch (InterruptedException e) {
            //
        }

    }


    /**
     * ä»¤ç‰Œæ¡¶
     */
    private static class TokenBucket {
        /**
         * ä»¤ç‰Œå­˜æ”¾çš„ä½ç½® , ç”¨ä¸€ä¸ªé˜Ÿåˆ—ç»´æŠ¤
         */
        private final ArrayBlockingQueue&lt;Token&gt; bucket;

        /**
         * æ¡¶æœ€å¤šå­˜æ”¾å¤šå°‘ä¸ªä»¤ç‰Œ
         */
        private final int tokenSize;

        public TokenBucket(int MAX_FlOW) {
            this.tokenSize = MAX_FlOW;
            this.bucket = new ArrayBlockingQueue&lt;&gt;(this.tokenSize);

            new Timer().schedule(new TimerTask() {
                @Override
                public void run() {
                    for (int x = 0; x &lt; (tokenSize / 10); x++) {
                        try {
                            if (bucket.size() &lt; tokenSize) {
                                // å®šæ—¶æ”¾å…¥ä»¤ç‰Œ
                                bucket.put(new Token());
                            }
                        } catch (InterruptedException e) {
                            //
                        }
                    }
                }
            }, 0, 100);
        }
    }

    /**
     * ä»¤ç‰Œ
     */
    private static class Token {

    }
}
</code></pre>
<h3 id="2-åŸºäºguava-çš„-ratelimiterå®ç°ä»¤ç‰Œæ¡¶">2. åŸºäºGuava çš„ RateLimiterå®ç°ä»¤ç‰Œæ¡¶</h3>
<pre><code class="language-java">public class GuavaRateLimiter extends AbstractLimiter {

    /**
     * ä»¤ç‰Œæ¡¶
     */
    private final RateLimiter limiter;

    /**
     * æ¯æ¬¡éœ€è¦çš„ä»¤ç‰Œä¸ªæ•°
     */
    private static final int ACQUIRE_NUM = 1;
    /**
     * æœ€é•¿ç­‰å¾…æ—¶é—´
     */
    private static final int WAIT_TIME_PER_MILLISECONDS = 5;

    /**
     * æ„é€ å™¨ , è¾“å…¥æ¯ç§’æœ€å¤§æµé‡
     *
     * @param MAX_FlOW æœ€å¤§æµé‡
     */
    public GuavaRateLimiter(final int MAX_FlOW) {
        super(MAX_FlOW);
        limiter = RateLimiter.create(MAX_FlOW);
    }


    @Override
    public void limit(ServletRequest request, ServletResponse response, FilterChain chain) {
        /**
         * æ„æ€å°±æ˜¯ æˆ‘å°è¯•å»è·å–1ä¸ªä»¤ç‰Œ ,æœ€å¤§ç­‰å¾…æ—¶é—´æ˜¯ 5 ms , å…¶å®å¤ªé•¿äº†, çœŸæ˜¯å¼€å‘ä¹Ÿå°±1msä¸åˆ°
         */
        boolean flag = limiter.tryAcquire(ACQUIRE_NUM, WAIT_TIME_PER_MILLISECONDS, TimeUnit.MILLISECONDS);
        if (flag) {
            chain.doFilter(request, response);
        }
    }
}
</code></pre>

								<span id="footnote"></span>
								<div id="warn"></div>
							</div>
							<div class="toc-container"><ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#1-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA">1. ç¯å¢ƒæ­å»º</a></li>
<li><a href="#2-%E8%AE%A1%E6%95%B0%E5%99%A8%E7%AE%97%E6%B3%95">2. è®¡æ•°å™¨ç®—æ³•</a></li>
<li><a href="#3-%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E7%AE%97%E6%B3%95">3. æ»‘åŠ¨çª—å£ç®—æ³•</a></li>
<li><a href="#4-%E6%BC%8F%E6%A1%B6%E7%AE%97%E6%B3%95">4. æ¼æ¡¶ç®—æ³•</a></li>
<li><a href="#5-%E4%BB%A4%E7%89%8C%E6%A1%B6%E7%AE%97%E6%B3%95">5. ä»¤ç‰Œæ¡¶ç®—æ³•</a>
<ul>
<li><a href="#1-%E8%87%AA%E5%B7%B1%E5%AE%9E%E7%8E%B0%E7%9A%84%E4%BB%A4%E7%89%8C%E6%A1%B6">1. è‡ªå·±å®ç°çš„ä»¤ç‰Œæ¡¶</a></li>
<li><a href="#2-%E5%9F%BA%E4%BA%8Eguava-%E7%9A%84-ratelimiter%E5%AE%9E%E7%8E%B0%E4%BB%A4%E7%89%8C%E6%A1%B6">2. åŸºäºGuava çš„ RateLimiterå®ç°ä»¤ç‰Œæ¡¶</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
						</div>
						<div id="fullPage"><canvas id="canvas"></canvas></div>
				</article>
				<div id="eof"><span>EOF</span></div>
				<div class="round-shape-one"></div>
				<section>
					<div class="doc_comments">
							<div id="valine-container"></div>
					</div>
				</section>
			</div>
		</div>
	</div>
	<script>
		"use strict";
		! function () {
			// for (var n = document.getElementsByTagName("pre"), e = n.length, s = 0; s < e; s++) {
			// 	n[s].innerHTML = '<span class="line-number"></span>' + n[s].innerHTML + '<span class="cl"></span>';
			// 	for (var a = n[s].innerHTML.split(/\n/).length, r = 0; r < a - 1; r++) {
			// 		n[s].getElementsByTagName("span")[0].innerHTML += "<span>" + (r + 1) + "</span>"
			// 	}
			// }
		}();
		let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");
		window.addEventListener("scroll", event => {
			let fromTop = window.scrollY;
			mainNavLinks.forEach((link, index) => {
				let section = document.getElementById(decodeURI(link.hash).substring(1));
				let nextSection = null
				if (mainNavLinks[index + 1]) {
					nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(
						1));
				}
				if (section.offsetTop <= fromTop) {
					if (nextSection) {
						if (nextSection.offsetTop > fromTop) {
							link.classList.add("currentToc");
						} else {
							link.classList.remove("currentToc");
						}
					} else {
						link.classList.add("currentToc");
					}
				} else {
					link.classList.remove("currentToc");
				}
			});
		});
		var list = document.querySelectorAll(".katex");
		for (var i = 0; i < list.length; i++) {
			list[i].style.display = "unset"
		};
		var h = document.documentElement,
			b = document.body,
			st = "scrollTop",
			sh = "scrollHeight",
			progress = document.querySelector(".progress"),
			scroll;
		document.addEventListener("scroll", function () {
			scroll = (h[st] || b[st]) / ((h[sh] || b[sh]) - h.clientHeight) * 100;
			progress.style.setProperty("--scroll", scroll + "%")
		});
		var wxScale = new WxScale({
			fullPage: document.querySelector("#fullPage"),
			canvas: document.querySelector("#canvas")
		});
		var imgBox = document.querySelectorAll("#md_block img");
		for (var i = 0; i < imgBox.length; i++) {
			imgBox[i].onclick = function (e) {
				wxScale.start(this)
			}
		};
	</script>
	<style>
		#magnifyImg {
			position: fixed;
			left: 0;
			top: 0;
			text-align: center;
			width: 100%;
			display: none;
			z-index: 9999
		}

		#magnifyImg img {
			object-fit: contain;
			background: #eaecef;
			padding: 15px;
			border-radius: 10px;
			height: auto;
			width: auto;
			vertical-align: middle
		}
	</style>
	<a id="scrollUp"href="#top"style="position: fixed; z-index: 2147483647; display: block;"></a><div class="footer animated fadeInDown"><div class="site_footer"><div class="mysocials"><div class="my_socials"><a href="https://github.com/Anthony-Dong"title="github"><i class="iconfont icon-github"></i></a><a href="fanhaodong516@gmail.com"title="envelope"><i class="iconfont icon-envelope"></i></a></div></div><div class="copyright"id="copyright">You Are My Everything. <a href="mailto:fanhaodong516@gmail.com" target="blank">Send Email</a>CopyrightÂ©2018-2020<a href="https://anthony-dong.github.io"style="margin:0;">Serence</a>.</div><span style="display: inline;margin-right:15px;">ğŸ‘<strong><span id="count-page">168271</span></strong></span><span id="busuanzi_container_page_pv"style="display: inline;"><span>ğŸ“š<strong>186</strong>posts</span></div></div><script>console.log("\n %c \u26a1Anthony-Dong's Blog:https://anthony-dong.github.io ,Github:https://github.com/Anthony-Dong ,Email:fanhaodong516@gmail.com ,æœ‰äº‹æƒ…æ¬¢è¿è”ç³». \n\n","color: #ffffff; background: rgba(49, 49, 49, 0.85); padding:5px 0;border-radius:5px;",);</script>
	<script type="text/javascript" async src="https://anthony-dong.github.io/media/js/prism.js"></script>
</body>
</html>
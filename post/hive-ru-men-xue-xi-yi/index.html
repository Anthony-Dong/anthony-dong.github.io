<!DOCTYPE html>
<html lang="en">
<head>
	<link rel="shortcut icon"href="https://anthony-dong.github.io/favicon.ico"type="image/x-icon"/><meta name="viewport"content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/><meta name="apple-mobile-web-app-capable"content="yes"/><meta name="apple-mobile-web-app-status-bar-style"content="black"/><meta name="format-detection"content="telephone=no"/><meta name="renderer"content="webkit"/><meta name="description"content="Anthony-Dongçš„ä¸ªäººåšå®¢"/><meta charset="UTF-8"/><title>HIVE - å…¥é—¨å­¦ä¹ ä¸€ | Anthony-Dong</title><link href="https://anthony-dong.github.io/styles/main.css"type="text/css"rel="stylesheet"/><script src="https://anthony-dong.github.io/media/js/magnify.min.js"></script>
	<link rel="canonical" href="https://anthony-dong.github.io/post/hive-ru-men-xue-xi-yi/" />
</head>
<body>
	<div class="progress"></div><style>.progress{background:linear-gradient(to right,#87ceeb var(--scroll),transparent 0);background-repeat:no-repeat;position:fixed;width:100%;height:4px;z-index:1}</style><div class="darkmode-background"></div><div class="darkmode-layer"></div>
<noscript><p class="warn" >æœ¬é¡µé¢éœ€è¦æµè§ˆå™¨æ”¯æŒï¼ˆå¯ç”¨ï¼‰JavaScript</p></noscript><div class="header"><div class="logo_title"><div class="title animated fadeInDown"><a href="https://anthony-dong.github.io"><img alt="logo" style="display:inline-block;" src="https://anthony-dong.github.io/images/avatar.png"/></a><h1 title="Anthony-Dong" class="weaklink shift"><a  href="/">Anthony-Dong</a></h1>

<div class="navbar weaklink">
<div class="normal_nav">
<div class="bitcron_nav_container"><div class="bitcron_nav"><div class="bitcron_nav"><div style="display:flex;justify-content:center;"><nav class="mixed_site_nav_wrap site_nav_wrap"><ul class="mixed_site_nav site_nav sm sm-base">	<li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >é¦–é¡µ</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >å½’æ¡£</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/tags" class="selected active current nav__item" >æ ‡ç­¾</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >å…³äº</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/link" class="selected active current nav__item" >å‹é“¾</a></li></ul></nav>
<div style="float:right;margin-top:1em"><form id="gridea-search-form" data-update="1578893743252" action="/search/index.html"><input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="Search..."></form></div>
<div style="margin-left:0.5em;margin-top:1.2em"><input id="switch_default" onclick="mobileBtn()" type="checkbox" class="switch_default"><label for="switch_default" class="toggleBtn"></label></div></div>
<div class="clear clear_nav_inline_end"></div></div></div><div class="clear clear_nav_end"></div></div></div><div class="hamberger" href="javascript:void(0)" onclick="btn_toggle();"><i class="iconfont icon-category"></i></div></div></div></div>
<div id="hn" class="no-js hidden_nav animated fadeInDown"><div class="bitcron_nav_container"><div class="bitcron_nav"><nav class="mixed_site_nav_wrap site_nav_wrap"><ul class="mixed_site_nav site_nav sm sm-base">	<li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >é¦–é¡µ</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >å½’æ¡£</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/tags" class="selected active current nav__item" >æ ‡ç­¾</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >å…³äº</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/link" class="selected active current nav__item" >å‹é“¾</a></li></ul><div class="clear clear_nav_inline_end"></div></nav></div><div class="clear clear_nav_end"></div></div>
<div style="display:flex;justify-content:center;inline-block;text-align:center;margin-top:7%"><div><form id="gridea-search-form-1" data-update="1614224679162" action="/search/index.html"><input class="search-input" autocomplete="off" spellcheck="false" name="q"  placeholder="Search..." /></form></div><div style="margin-left:0.5em"><input id="switch_default_h" onclick="mobileBtn()" type="checkbox" class="switch_default"><label for="switch_default" class="toggleBtn"></label></div></div>
</div></div>
<script>function enableDarkmode(){document.body.classList.add("darkmode"),document.getElementById("switch_default").checked=1,document.getElementById("switch_default_h").checked=1}function removeDarkmode(){document.body.classList.remove("darkmode"),document.getElementById("switch_default").checked=0,document.getElementById("switch_default_h").checked=0}function getCookie(a){var b,c=new RegExp("(^| )"+a+"=([^;]*)(;|$)");return(b=document.cookie.match(c))?unescape(b[2]):null}cookie=getCookie("darkmode"),"enable"==cookie&&enableDarkmode(),window.matchMedia("(prefers-color-scheme: dark)").matches&&"disable"!==cookie&&(enableDarkmode(),document.cookie="darkmode=enable; path=/");var mobileBtn=function(){1==document.getElementById("switch_default").checked?(enableDarkmode(),document.cookie="darkmode=enable; path=/"):(removeDarkmode(),document.cookie="darkmode=disable; path=/")};</script>

	<div class="main">
		<div class="main-inner">
			<div class="content">
				<article class="post">
					<script src='https://anthony-dong.github.io/media/js/Valine.min.js'></script><style>.v .vlist .vcard .vh .vmeta .vat{font-size:.8125em;color:#9d7873;cursor:pointer;float:right}.v .vlist .vcard .vhead .vsys{display:none}</style ><script type="text/javascript">new Valine(ValineInfo)</script>
					<h2 class="post_title sm_margin"><a>HIVE - å…¥é—¨å­¦ä¹ ä¸€</a></h2>
					<script>
						function lan() {
							if (document.getElementById("lan").innerText == "ç¹") {
								var s = document.getElementById("tongwenlet_cn");
								if (s != null) {
									document.body.removeChild(s)
								}
								var s = document.createElement("script");
								s.language = "javascript";
								s.type = "text/javascript";
								s.src = "https://cdn.jsdelivr.net/gh/qyxtim/Static@1.1/bookmarklet_tw.js";
								s.id = "tongwenlet_cn";
								document.body.appendChild(s);
								document.getElementById("lan").innerHTML = "ç®€"
							} else {
								if (document.getElementById("lan").innerText == "ç°¡") {
									var s = document.getElementById("tongwenlet_cn");
									if (s != null) {
										document.body.removeChild(s)
									}
									var s = document.createElement("script");
									s.language = "javascript";
									s.type = "text/javascript";
									s.src = "https://cdn.jsdelivr.net/gh/qyxtim/Static@1.1/bookmarklet_cn.js";
									s.id = "tongwenlet_cn";
									document.body.appendChild(s);
									document.getElementById("lan").innerHTML = "ç¹"
								}
							}
						};
					</script>
					<section class="post_details"><i class="iconfont icon-calendar"></i><span style="margin-right:15px">
							2019-11-22</span><i class="iconfont icon-browse"></i>
							<span class="leancloud_visitors" style="margin-right:15px" id="/post/hive-ru-men-xue-xi-yi/">views <i class="leancloud-visitors-count" style="font-style: normal"></i></span>
							<span class="weaklink" style="margin-right:15px"><i class="iconfont icon-category"></i> <a
								href="https://anthony-dong.github.io/tag/YZlAYWOZz21/"
								class="tag">å¤§æ•°æ®</a></span><i class="iconfont icon-caret-down"></i><span
							style="margin-right:15px">2240å­—</span><i
							class="iconfont icon-naozhong"></i><span
							style="margin-right:15px">11 min read</span><a id="lan"
							href="javascript:void(0);" onclick="lan();" title="è°ƒæ•´ç®€ç¹ä½“" style="margin-right:15px;">ç¹</a>
						</section>

						<div style="display:flex">
							<div class="md_block" id="md_block">
								<div class="round-shape-one"></div>
								<h2 id="1-ä»‹ç»">1. ä»‹ç»</h2>
<figure data-type="image" tabindex="1"><img src="https://hive.apache.org/images/hive_logo_medium.jpg" alt="" loading="lazy"></figure>
<p><a href="https://hive.apache.org/">å®˜æ–¹åœ°å€</a>  :  https://hive.apache.org/ , <code>HIVE</code> æ±‰è¯­æ„æ€æ˜¯ <code>èœ‚å·¢</code></p>
<blockquote>
<p>â€‹	The Apache Hive  data warehouse software facilitates reading, writing, and managing large datasets residing in distributed storage using SQL. Structure can be projected onto data already in storage. A command line tool and JDBC driver are provided to connect users to Hive.</p>
<p>HIVEæ•°æ®ä»“åº“è½¯ä»¶å¯ä»¥ä½¿ç”¨SQLè¯­å¥æ–¹ä¾¿çš„è¯»å–,å†™å…¥å’Œç®¡ç†åˆ†å¸ƒå­˜å‚¨ä¸­çš„å¤§å‹æ•°æ®é›†ã€‚(<code>reside in</code>  å±äº , å±…ä½äº) ; <strong>æ•°æ®å’Œç»“æ„(SQL)å¯ä»¥ç›¸äº’æ˜ å°„èµ·æ¥(ç±»ä¼¼äºmybatisçš„mapper)</strong> , æä¾›äº†ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·å’ŒJDBCé©±åŠ¨ç¨‹åºæ¥å°†ç”¨æˆ·è¿æ¥åˆ°Hiveã€‚</p>
</blockquote>
<h2 id="2-å¿«é€Ÿå­¦ä¹ ">2. å¿«é€Ÿå­¦ä¹ </h2>
<blockquote>
<p>â€‹	å¦‚æœå»ºè¡¨è¯­å¥ä¸ä¼šçš„è¯å¯ä»¥å¾€åç¿»å»ç¨å¾®å­¦ä¹ ä¸€ä¸‹............</p>
</blockquote>
<h3 id="1-å®‰è£…">1. å®‰è£…</h3>
<pre><code class="language-shell">1. è¿™é‡Œä¸æ¨èç”¨ 2.x çš„ç‰ˆæœ¬ ä¸€å †å‘
tar -zxvf apache-hive-1.2.1-bin.tar.gz -C /opt/software/

mv hive-env.sh.template hive-env.sh

vim hive-env.sh
export HADOOP_HOME=/opt/software/hadoop-2.7.2
export HIVE_CONF_DIR=/opt/software/apache-hive-1.2.1-bin/conf


2. åœ¨conf/ç›®å½•ä¸‹é¢åˆ›å»ºä¸€ä¸ª hive-site.xml è¿™ä¸ªæ–‡ä»¶ ,é‡Œé¢æ·»åŠ  

&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;configuration.xsl&quot;?&gt;
&lt;configuration&gt;
	&lt;property&gt;
	  &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;
	  &lt;value&gt;jdbc:mysql://hadoop1:3306/metastore?createDatabaseIfNotExist=true&lt;/value&gt;
	  &lt;!--  
     å¦‚æœä½ æ˜¯ mysql  5.5.45+, 5.6.26+ and 5.7.6+ , éœ€è¦æ”¹æˆ `&amp;amp;` æ„æ€å°±æ˜¯ `&amp;` çš„æ„æ€ä¸è¿‡xml
     éœ€è¦å†™æˆè¿™æ ·å­ .....
     jdbc:mysql://hadoop1:3306/metastore?createDatabaseIfNotExist=true&amp;amp;useSSL=false
      --&gt;
	  &lt;description&gt;JDBC connect string for a JDBC metastore&lt;/description&gt;
	&lt;/property&gt;

	&lt;property&gt;
	  &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;
	  &lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;
	  &lt;description&gt;Driver class name for a JDBC metastore&lt;/description&gt;
	&lt;/property&gt;

	&lt;property&gt;
	  &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;
	  &lt;value&gt;root&lt;/value&gt;
	  &lt;description&gt;username to use against metastore database&lt;/description&gt;
	&lt;/property&gt;

	&lt;property&gt;
	  &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;
	  &lt;value&gt;123456&lt;/value&gt;
	  &lt;description&gt;password to use against metastore database&lt;/description&gt;
	&lt;/property&gt;
&lt;/configuration&gt;


åœ¨/lib ç›®å½•, æ”¾å…¥jdbc é©±åŠ¨åŒ… , ç„¶åmysql åˆ›å»º metastore æ•°æ®åº“ , æ³¨æ„ç‰ˆæœ¬å¿…é¡»ä¸€è‡´
æˆ‘çš„æ˜¯ mysql5.7 ç”¨çš„jaråŒ…æ˜¯ mysql-connector-java-5.1.47.jar  è¿™é‡Œä¸å¯¹åæœŸå¾ˆå‘

3. é…ç½®æ—¥å¿—æ–‡ä»¶
åœ¨ conf ç›®å½•ä¸‹ : 
mv hive-log4j.properties.template hive-log4j.properties
vim hive-log4j.properties 
hive.log.dir=/opt/software/apache-hive-1.2.1-bin/logs

æœ€åè®°å¾—åˆ›å»ºæ–‡ä»¶å¤¹ .... é»˜è®¤æ˜¯åœ¨ /tmp/${user}/hive.log


4. ç„¶å bin/hive å¯åŠ¨

5. æŸ¥çœ‹é…ç½®ä¿¡æ¯ : 
hive&gt;set;
å¤ªå¤šäº† ....
</code></pre>
<p>é»˜è®¤é…ç½®æ–‡ä»¶ï¼šhive-default.xml</p>
<p>ç”¨æˆ·è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ï¼šhive-site.xml</p>
<p>æ³¨æ„ï¼šç”¨æˆ·è‡ªå®šä¹‰é…ç½®ä¼šè¦†ç›–é»˜è®¤é…ç½®ã€‚å¦å¤–ï¼ŒHiveä¹Ÿä¼šè¯»å…¥Hadoopçš„é…ç½®ï¼Œå› ä¸ºHiveæ˜¯ä½œä¸ºHadoopçš„å®¢æˆ·ç«¯å¯åŠ¨çš„ï¼ŒHiveçš„é…ç½®ä¼šè¦†ç›–Hadoopçš„é…ç½®ã€‚é…ç½®æ–‡ä»¶çš„è®¾å®šå¯¹æœ¬æœºå¯åŠ¨çš„æ‰€æœ‰Hiveè¿›ç¨‹éƒ½æœ‰æ•ˆã€‚</p>
<h3 id="2-binhive-æœ¬åœ°äº¤äº’">2. bin/hive - æœ¬åœ°äº¤äº’</h3>
<blockquote>
<p>â€‹	æœ€ç®€å•çš„å‘½ä»¤è¡Œäº¤äº’</p>
</blockquote>
<h3 id="3-binhiveserver2-æ”¯æŒç¬¬ä¸‰æ–¹è¿æ¥">3. bin/hiveserver2 - æ”¯æŒç¬¬ä¸‰æ–¹è¿æ¥</h3>
<blockquote>
<p>â€‹	hiveserver2  å…¶å®å°±æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ç«¯, å¯ä»¥è¿æ¥å¤šä¸ªè¿œç¨‹ç¬¬ä¸‰æ–¹å®¢æˆ·ç«¯</p>
</blockquote>
<h3 id="4-binbeeline-ä½œä¸ºç¬¬ä¸‰æ–¹è¿æ¥">4. bin/beeline ä½œä¸ºç¬¬ä¸‰æ–¹è¿æ¥</h3>
<blockquote>
<p>â€‹	ä»–å¯ä»¥ä½œä¸ºç¬¬ä¸‰æ–¹è¿›è¡Œè¿æ¥ hive</p>
</blockquote>
<pre><code class="language-java">[admin@hadoop1 apache-hive-1.2.1-bin]$ bin/beeline 
Beeline version 1.2.1 by Apache Hive
// è¿æ¥å‘½ä»¤ `!connect jdbc:hive2://hadoop1:10000` , åé¢è¾“å…¥æ•°æ®åº“ç”¨æˆ·å å¯†ç 
beeline&gt; !connect jdbc:hive2://hadoop1:10000
Connecting to jdbc:hive2://hadoop1:10000
Enter username for jdbc:hive2://hadoop1:10000: root
Enter password for jdbc:hive2://hadoop1:10000: ***********
Connected to: Apache Hive (version 1.2.1)
Driver: Hive JDBC (version 1.2.1)
Transaction isolation: TRANSACTION_REPEATABLE_READ , å°±å¥½äº†
0: jdbc:hive2://hadoop1:10000&gt; show databases;
+----------------+--+
| database_name  |
+----------------+--+
| default        |
+----------------+--+
1 row selected (0.777 seconds)
0: jdbc:hive2://hadoop1:10000&gt; 
</code></pre>
<h3 id="5-å‘½ä»¤è¡Œäº¤äº’">5. å‘½ä»¤è¡Œäº¤äº’</h3>
<blockquote>
<p>â€‹	æœ‰çš„æ—¶å€™æˆ‘ä»¬ä¸éœ€è¦å®¢æˆ·ç«¯, å¸Œæœ›å†™ä¸€ä¸ªè„šæœ¬å»æ‰§è¡Œ , è¿™æ—¶å€™å°±å¯ä»¥ç”¨ä¸‹é¢è¯´å¾—äº†</p>
</blockquote>
<pre><code class="language-java">1. æŸ¥çœ‹å‘½ä»¤ä»‹ç»  ,å¸¸ç”¨ -e  -f
[admin@hadoop1 apache-hive-1.2.1-bin]$ bin/hive -help
usage: hive
 -d,--define &lt;key=value&gt;          Variable subsitution to apply to hive
                                  commands. e.g. -d A=B or --define A=B
    --database &lt;databasename&gt;     Specify the database to use
 -e &lt;quoted-query-string&gt;         SQL from command line
 -f &lt;filename&gt;                    SQL from files
 -H,--help                        Print help information
    --hiveconf &lt;property=value&gt;   Use value for given property
    --hivevar &lt;key=value&gt;         Variable subsitution to apply to hive
                                  commands. e.g. --hivevar A=B
 -i &lt;filename&gt;                    Initialization SQL file
 -S,--silent                      Silent mode in interactive shell
 -v,--verbose                     Verbose mode (echo executed SQL to the
                                  console)

2. å‘½ä»¤è¡Œè¿è¡Œ
[admin@hadoop1 apache-hive-1.2.1-bin]$ bin/hive -e  &quot;select * from stu3;&quot;
Logging initialized using configuration in jar:file:/opt/software/apache-hive-1.2.1-bin/lib/hive-common-1.2.1.jar!/hive-log4j.properties        
OK
1	xiaoli
2	xiaowang
3	xiaoming
4	anthony
5	flex
6	xiaofan
Time taken: 2.804 seconds, Fetched: 6 row(s)    
    
3. æ‰§è¡Œsqlè„šæœ¬ 
[admin@hadoop1 data]$ cat sql.sff 
use default;
select * from stu3;

[admin@hadoop1 data]$ hive -f ./sql.sff 
Logging initialized using configuration in jar:file:/opt/software/apache-hive-1.2.1-bin/lib/hive-common-1.2.1.jar!/hive-log4j.properties
OK
Time taken: 1.113 seconds
OK
1	xiaoli
2	xiaowang
3	xiaoming
4	anthony
5	flex
6	xiaofan
Time taken: 1.023 seconds, Fetched: 6 row(s)   
</code></pre>
<h2 id="3-hiveçš„æ•°æ®ç±»å‹">3. HIVEçš„æ•°æ®ç±»å‹</h2>
<h3 id="1-åŸºæœ¬æ•°æ®ç±»å‹">1. åŸºæœ¬æ•°æ®ç±»å‹</h3>
<table>
<thead>
<tr>
<th>Hiveæ•°æ®ç±»å‹</th>
<th>Javaæ•°æ®ç±»å‹</th>
<th>é•¿åº¦</th>
<th>ä¾‹å­</th>
</tr>
</thead>
<tbody>
<tr>
<td>TINYINT</td>
<td>byte</td>
<td>1byteæœ‰ç¬¦å·æ•´æ•°   8ä½</td>
<td>20</td>
</tr>
<tr>
<td>SMALINT</td>
<td>short</td>
<td>2byteæœ‰ç¬¦å·æ•´æ•°   16ä½</td>
<td>20</td>
</tr>
<tr>
<td>INT</td>
<td>int</td>
<td>4byteæœ‰ç¬¦å·æ•´æ•°    32ä½</td>
<td>20</td>
</tr>
<tr>
<td>BIGINT</td>
<td>long</td>
<td>8byteæœ‰ç¬¦å·æ•´æ•°    64ä½</td>
<td>20</td>
</tr>
<tr>
<td>BOOLEAN</td>
<td>boolean</td>
<td>å¸ƒå°”ç±»å‹ï¼Œtrueæˆ–è€…false</td>
<td>TRUE  FALSE</td>
</tr>
<tr>
<td>FLOAT</td>
<td>float</td>
<td>å•ç²¾åº¦æµ®ç‚¹æ•°    4byte  32ä½  8ä¸ªæœ‰æ•ˆæ•°å­—</td>
<td>11.323444</td>
</tr>
<tr>
<td>DOUBLE</td>
<td>double</td>
<td>åŒç²¾åº¦æµ®ç‚¹æ•°    8byte  64ä½  17ä¸ªæœ‰æ•ˆæ•°å­—</td>
<td>11.323444366455078</td>
</tr>
<tr>
<td>STRING</td>
<td>string</td>
<td>å­—ç¬¦ç³»åˆ—</td>
<td>â€œYou look greatâ€</td>
</tr>
<tr>
<td>TIMESTAMP</td>
<td></td>
<td>æ—¶é—´ç±»å‹</td>
<td></td>
</tr>
<tr>
<td>BINARY</td>
<td></td>
<td>å­—èŠ‚æ•°ç»„</td>
<td></td>
</tr>
</tbody>
</table>
<p>å¯¹äºHiveçš„Stringç±»å‹ç›¸å½“äºæ•°æ®åº“çš„varcharç±»å‹ï¼Œè¯¥ç±»å‹æ˜¯ä¸€ä¸ªå¯å˜çš„å­—ç¬¦ä¸²ï¼Œä¸è¿‡å®ƒä¸èƒ½å£°æ˜å…¶ä¸­æœ€å¤šèƒ½å­˜å‚¨å¤šå°‘ä¸ªå­—ç¬¦ï¼Œç†è®ºä¸Šå®ƒå¯ä»¥å­˜å‚¨2GBçš„å­—ç¬¦æ•°ã€‚</p>
<h3 id="2-é›†åˆç±»å‹">2. é›†åˆç±»å‹</h3>
<table>
<thead>
<tr>
<th>æ•°æ®ç±»å‹</th>
<th>æè¿°</th>
<th>è¯­æ³•ç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>STRUCT</td>
<td>å’Œcè¯­è¨€ä¸­çš„structç±»ä¼¼ï¼Œéƒ½å¯ä»¥é€šè¿‡â€œç‚¹â€ç¬¦å·è®¿é—®å…ƒç´ å†…å®¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæŸä¸ªåˆ—çš„æ•°æ®ç±»å‹æ˜¯STRUCT{first STRING, last   STRING},é‚£ä¹ˆç¬¬1ä¸ªå…ƒç´ å¯ä»¥é€šè¿‡å­—æ®µ.firstæ¥å¼•ç”¨ã€‚</td>
<td>struct()   ä¾‹å¦‚struct&lt;street:string, city:string&gt;</td>
</tr>
<tr>
<td>MAP</td>
<td>MAPæ˜¯ä¸€ç»„é”®-å€¼å¯¹å…ƒç»„é›†åˆï¼Œä½¿ç”¨æ•°ç»„è¡¨ç¤ºæ³•å¯ä»¥è®¿é—®æ•°æ®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæŸä¸ªåˆ—çš„æ•°æ®ç±»å‹æ˜¯MAPï¼Œå…¶ä¸­é”®-&gt;å€¼å¯¹æ˜¯â€™firstâ€™-&gt;â€™Johnâ€™å’Œâ€™lastâ€™-&gt;â€™Doeâ€™ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡å­—æ®µå[â€˜lastâ€™]è·å–æœ€åä¸€ä¸ªå…ƒç´ </td>
<td>map()   ä¾‹å¦‚map&lt;string, int&gt;</td>
</tr>
<tr>
<td>ARRAY</td>
<td>æ•°ç»„æ˜¯ä¸€ç»„å…·æœ‰ç›¸åŒç±»å‹å’Œåç§°çš„å˜é‡çš„é›†åˆã€‚è¿™äº›å˜é‡ç§°ä¸ºæ•°ç»„çš„å…ƒç´ ï¼Œæ¯ä¸ªæ•°ç»„å…ƒç´ éƒ½æœ‰ä¸€ä¸ªç¼–å·ï¼Œç¼–å·ä»é›¶å¼€å§‹ã€‚ä¾‹å¦‚ï¼Œæ•°ç»„å€¼ä¸º[â€˜Johnâ€™, â€˜Doeâ€™]ï¼Œé‚£ä¹ˆç¬¬2ä¸ªå…ƒç´ å¯ä»¥é€šè¿‡æ•°ç»„å[1]è¿›è¡Œå¼•ç”¨ã€‚</td>
<td>Array()   ä¾‹å¦‚array<string></td>
</tr>
</tbody>
</table>
<p>Hiveæœ‰ä¸‰ç§å¤æ‚æ•°æ®ç±»å‹<strong>ARRAYã€MAP å’Œ STRUCT</strong>ã€‚ARRAYå’ŒMAPä¸Javaä¸­çš„Arrayå’ŒMapç±»ä¼¼ï¼Œè€ŒSTRUCTä¸Cè¯­è¨€ä¸­çš„Structç±»ä¼¼ï¼Œå®ƒå°è£…äº†ä¸€ä¸ªå‘½åå­—æ®µé›†åˆï¼Œå¤æ‚æ•°æ®ç±»å‹å…è®¸ä»»æ„å±‚æ¬¡çš„åµŒå¥—ã€‚</p>
<h4 id="ç»ƒä¹ ä¸€ä¸‹">ç»ƒä¹ ä¸€ä¸‹</h4>
<p>è¿™æ˜¯æˆ‘ä»¬çš„æ•°æ® , éœ€è¦ä¸Šä¼ åˆ°hiveä¸­</p>
<pre><code class="language-json">{
    &quot;name&quot;: &quot;songsong&quot;,
    &quot;friends&quot;: [&quot;bingbing&quot; , &quot;lili&quot;] ,       //åˆ—è¡¨Array, 
    &quot;children&quot;: {                      //é”®å€¼Map,
        &quot;xiao song&quot;: 18 ,
        &quot;xiaoxiao song&quot;: 19
    }
    &quot;address&quot;: {                      //ç»“æ„Struct,
        &quot;street&quot;: &quot;hui long guan&quot; ,
        &quot;city&quot;: &quot;beijing&quot; 
    }
}

å…¶å® struct å’Œ mapå…¶å®å¾ˆç›¸ä¼¼ , åªæ˜¯ä¸€ä¸ªéœ€è¦keyå€¼
</code></pre>
<p>æˆ‘ä»¬å°†è¡¨æ”¹æˆå¯ä»¥åˆ†å‰²çš„æ ¼å¼</p>
<pre><code class="language-text">songsong,bingbing_lili,xiao song:18_xiaoxiao song:19,hui long guan_beijing
yangyang,caicai_susu,xiao yang:18_xiaoxiao yang:19,chao yang_beijing
</code></pre>
<p>å»ºè¡¨è¯­å¥ , å¦‚æœä¸ä¼šåæœŸä¼šè®²è§£ ,æˆ‘æ„Ÿè§‰åº”è¯¥å¯ä»¥çœ‹å¾—æ‡‚</p>
<pre><code class="language-sql">create table test(
name string,
friends array&lt;string&gt;,
children map&lt;string, int&gt;,
address struct&lt;street:string, city:string&gt;
)
row format delimited fields terminated by ',' //åˆ—åˆ†éš”ç¬¦
collection items terminated by '_' //map,arrayå’Œstructåˆ†éš”ç¬¦(å‡ ä¸ªå†…éƒ¨åˆ—åˆ†éš”ç¬¦å…¶å®æ˜¯)
map keys terminated by ':' // map kvåˆ†éš”ç¬¦
lines terminated by '\n';  // è¡Œåˆ†éš”ç¬¦
</code></pre>
<p>æ’å…¥è¿™ä¸ªæ–‡æ¡£å¹¶ä¸”æŸ¥è¯¢ :</p>
<pre><code class="language-java">hive&gt; load data local inpath '/opt/software/apache-hive-1.2.1-bin/data/test.txt' into table test;
Loading data to table default.test
Table default.test stats: [numFiles=1, totalSize=144]
OK
Time taken: 1.584 seconds
hive&gt; select * from test;
OK
songsong	[&quot;bingbing&quot;,&quot;lili&quot;]	{&quot;xiao song&quot;:18,&quot;xiaoxiao song&quot;:19}	{&quot;street&quot;:&quot;hui long guan&quot;,&quot;city&quot;:&quot;beijing&quot;}
yangyang	[&quot;caicai&quot;,&quot;susu&quot;]	{&quot;xiao yang&quot;:18,&quot;xiaoxiao yang&quot;:19}	{&quot;street&quot;:&quot;chao yang&quot;,&quot;city&quot;:&quot;beijing&quot;}
Time taken: 0.578 seconds, Fetched: 2 row(s)
</code></pre>
<p>å‘ç°æ²¡æœ‰å•¥é—®é¢˜ ........... æ•°æ®å±•ç¤ºæ ¼å¼å¦‚ä¸Š .</p>
<h3 id="3-æ•°æ®ç±»å‹è½¬æ¢">3. æ•°æ®ç±»å‹è½¬æ¢</h3>
<p>ï¼ˆ1ï¼‰ä»»ä½•æ•´æ•°ç±»å‹éƒ½å¯ä»¥éšå¼åœ°è½¬æ¢ä¸ºä¸€ä¸ªèŒƒå›´æ›´å¹¿çš„ç±»å‹ï¼Œå¦‚TINYINTå¯ä»¥è½¬æ¢æˆINTï¼ŒINTå¯ä»¥è½¬æ¢æˆBIGINTã€‚<strong>å¯ä»¥å‘ä¸Šè½¬æ¢</strong></p>
<p>ï¼ˆ2ï¼‰æ‰€æœ‰æ•´æ•°ç±»å‹ã€FLOATå’ŒSTRINGç±»å‹éƒ½å¯ä»¥éšå¼åœ°è½¬æ¢æˆDOUBLEã€‚</p>
<p>ï¼ˆ3ï¼‰TINYINTã€SMALLINTã€INTéƒ½å¯ä»¥è½¬æ¢ä¸ºFLOATã€‚</p>
<p>ï¼ˆ4ï¼‰BOOLEANç±»å‹ä¸å¯ä»¥è½¬æ¢ä¸ºä»»ä½•å…¶å®ƒçš„ç±»å‹ã€‚</p>
<h4 id="æµ‹è¯•">æµ‹è¯•</h4>
<pre><code class="language-sql">hive&gt; select '1'+2, cast('1'as int) + 2;
OK
3.0	3
Time taken: 0.286 seconds, Fetched: 1 row(s)
</code></pre>
<p>å¦‚æœä¸€ä¸ª string ç±»å‹å’Œä¸€ä¸ªæ•°å­—ç›¸äº’åŠ å‡ , è‡ªåŠ¨è½¬æ¢ä¸ºdoubleç±»å‹ ,(å‰ææ˜¯stringå¯ä»¥è½¬æ¢æˆåŠŸ,åˆ«'aa'å»åšè½¬æ¢)</p>
<p>å¯ä»¥é€šè¿‡cast('1' as int) æ˜¾ç¤ºçš„è¿›è¡Œæ•°æ®ç±»å‹è½¬æ¢</p>

								<span id="footnote"></span>
								<div id="warn"></div>
							</div>
							<div class="toc-container"><ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#1-%E4%BB%8B%E7%BB%8D">1. ä»‹ç»</a></li>
<li><a href="#2-%E5%BF%AB%E9%80%9F%E5%AD%A6%E4%B9%A0">2. å¿«é€Ÿå­¦ä¹ </a>
<ul>
<li><a href="#1-%E5%AE%89%E8%A3%85">1. å®‰è£…</a></li>
<li><a href="#2-binhive-%E6%9C%AC%E5%9C%B0%E4%BA%A4%E4%BA%92">2. bin/hive - æœ¬åœ°äº¤äº’</a></li>
<li><a href="#3-binhiveserver2-%E6%94%AF%E6%8C%81%E7%AC%AC%E4%B8%89%E6%96%B9%E8%BF%9E%E6%8E%A5">3. bin/hiveserver2 - æ”¯æŒç¬¬ä¸‰æ–¹è¿æ¥</a></li>
<li><a href="#4-binbeeline-%E4%BD%9C%E4%B8%BA%E7%AC%AC%E4%B8%89%E6%96%B9%E8%BF%9E%E6%8E%A5">4. bin/beeline ä½œä¸ºç¬¬ä¸‰æ–¹è¿æ¥</a></li>
<li><a href="#5-%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%BA%A4%E4%BA%92">5. å‘½ä»¤è¡Œäº¤äº’</a></li>
</ul>
</li>
<li><a href="#3-hive%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">3. HIVEçš„æ•°æ®ç±»å‹</a>
<ul>
<li><a href="#1-%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">1. åŸºæœ¬æ•°æ®ç±»å‹</a></li>
<li><a href="#2-%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B">2. é›†åˆç±»å‹</a>
<ul>
<li><a href="#%E7%BB%83%E4%B9%A0%E4%B8%80%E4%B8%8B">ç»ƒä¹ ä¸€ä¸‹</a></li>
</ul>
</li>
<li><a href="#3-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2">3. æ•°æ®ç±»å‹è½¬æ¢</a>
<ul>
<li><a href="#%E6%B5%8B%E8%AF%95">æµ‹è¯•</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
						</div>
						<div id="fullPage"><canvas id="canvas"></canvas></div>
				</article>
				<div id="eof"><span>EOF</span></div>
				<div class="round-shape-one"></div>
				<section>
					<div class="doc_comments">
							<div id="valine-container"></div>
					</div>
				</section>
			</div>
		</div>
	</div>
	<script>
		"use strict";
		! function () {
			for (var n = document.getElementsByTagName("pre"), e = n.length, s = 0; s < e; s++) {
				n[s].innerHTML = '<span class="line-number"></span>' + n[s].innerHTML + '<span class="cl"></span>';
				for (var a = n[s].innerHTML.split(/\n/).length, r = 0; r < a - 1; r++) {
					n[s].getElementsByTagName("span")[0].innerHTML += "<span>" + (r + 1) + "</span>"
				}
			}
		}();
		let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");
		window.addEventListener("scroll", event => {
			let fromTop = window.scrollY;
			mainNavLinks.forEach((link, index) => {
				let section = document.getElementById(decodeURI(link.hash).substring(1));
				let nextSection = null
				if (mainNavLinks[index + 1]) {
					nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(
						1));
				}
				if (section.offsetTop <= fromTop) {
					if (nextSection) {
						if (nextSection.offsetTop > fromTop) {
							link.classList.add("currentToc");
						} else {
							link.classList.remove("currentToc");
						}
					} else {
						link.classList.add("currentToc");
					}
				} else {
					link.classList.remove("currentToc");
				}
			});
		});
		var list = document.querySelectorAll(".katex");
		for (var i = 0; i < list.length; i++) {
			list[i].style.display = "unset"
		};
		var h = document.documentElement,
			b = document.body,
			st = "scrollTop",
			sh = "scrollHeight",
			progress = document.querySelector(".progress"),
			scroll;
		document.addEventListener("scroll", function () {
			scroll = (h[st] || b[st]) / ((h[sh] || b[sh]) - h.clientHeight) * 100;
			progress.style.setProperty("--scroll", scroll + "%")
		});
		var wxScale = new WxScale({
			fullPage: document.querySelector("#fullPage"),
			canvas: document.querySelector("#canvas")
		});
		var imgBox = document.querySelectorAll("#md_block img");
		for (var i = 0; i < imgBox.length; i++) {
			imgBox[i].onclick = function (e) {
				wxScale.start(this)
			}
		};
	</script>
	<style>
		#magnifyImg {
			position: fixed;
			left: 0;
			top: 0;
			text-align: center;
			width: 100%;
			display: none;
			z-index: 9999
		}

		#magnifyImg img {
			object-fit: contain;
			background: #eaecef;
			padding: 15px;
			border-radius: 10px;
			height: auto;
			width: auto;
			vertical-align: middle
		}
	</style>
	<a id="scrollUp"href="#top"style="position: fixed; z-index: 2147483647; display: block;"></a><div class="footer animated fadeInDown"><div class="site_footer"><div class="mysocials"><div class="my_socials"><a href="https://github.com/Anthony-Dong"title="github"><i class="iconfont icon-github"></i></a><a href="fanhaodong516@gmail.com"title="envelope"><i class="iconfont icon-envelope"></i></a></div></div><div class="copyright"id="copyright">You Are My Everything. <a href="mailto:fanhaodong516@gmail.com" target="blank">Send Email</a>CopyrightÂ©2018-2020<a href="https://anthony-dong.github.io"style="margin:0;">Serence</a>.</div><span style="display: inline;margin-right:15px;">ğŸ‘<strong><span id="count-page">168271</span></strong></span><span id="busuanzi_container_page_pv"style="display: inline;"><span>ğŸ“š<strong>186</strong>posts</span></div></div><script>console.log("\n %c \u26a1Anthony-Dong's Blog:https://anthony-dong.github.io ,Github:https://github.com/Anthony-Dong ,Email:fanhaodong516@gmail.com ,æœ‰äº‹æƒ…æ¬¢è¿è”ç³». \n\n","color: #ffffff; background: rgba(49, 49, 49, 0.85); padding:5px 0;border-radius:5px;",);</script>
	<script type="text/javascript" async src="https://anthony-dong.github.io/media/js/prism.js"></script>
</body>
</html>
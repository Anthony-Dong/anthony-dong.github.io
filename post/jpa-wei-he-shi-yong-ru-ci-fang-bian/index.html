<!DOCTYPE html>
<html lang="en">
<head>
	<link rel="shortcut icon"href="https://anthony-dong.github.io/favicon.ico"type="image/x-icon"/><meta name="viewport"content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/><meta name="apple-mobile-web-app-capable"content="yes"/><meta name="apple-mobile-web-app-status-bar-style"content="black"/><meta name="format-detection"content="telephone=no"/><meta name="renderer"content="webkit"/><meta name="description"content="Anthony-Dongçš„ä¸ªäººåšå®¢"/><meta charset="UTF-8"/><title> JPA - ç”¨èµ·æ¥çœŸçš„å¾ˆèˆ’æœ | Anthony-Dong</title><link href="https://anthony-dong.github.io/styles/main.css"type="text/css"rel="stylesheet"/><script src="https://anthony-dong.github.io/media/js/magnify.min.js"></script>
	<link rel="canonical" href="https://anthony-dong.github.io/post/jpa-wei-he-shi-yong-ru-ci-fang-bian/" />
</head>
<body>
	<div class="progress"></div><style>.progress{background:linear-gradient(to right,#87ceeb var(--scroll),transparent 0);background-repeat:no-repeat;position:fixed;width:100%;height:4px;z-index:1}</style><div class="darkmode-background"></div><div class="darkmode-layer"></div>
<noscript><p class="warn" >æœ¬é¡µé¢éœ€è¦æµè§ˆå™¨æ”¯æŒï¼ˆå¯ç”¨ï¼‰JavaScript</p></noscript><div class="header"><div class="logo_title"><div class="title animated fadeInDown"><a href="https://anthony-dong.github.io"><img alt="logo" style="display:inline-block;" src="https://anthony-dong.github.io/images/avatar.png"/></a><h1 title="Anthony-Dong" class="weaklink shift"><a  href="/">Anthony-Dong</a></h1>

<div class="navbar weaklink">
<div class="normal_nav">
<div class="bitcron_nav_container"><div class="bitcron_nav"><div class="bitcron_nav"><div style="display:flex;justify-content:center;"><nav class="mixed_site_nav_wrap site_nav_wrap"><ul class="mixed_site_nav site_nav sm sm-base">	<li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >é¦–é¡µ</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >å½’æ¡£</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/tags" class="selected active current nav__item" >æ ‡ç­¾</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >å…³äº</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/link" class="selected active current nav__item" >å‹é“¾</a></li></ul></nav>
<div style="float:right;margin-top:1em"><form id="gridea-search-form" data-update="1578893743252" action="/search/index.html"><input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="Search..."></form></div>
<div style="margin-left:0.5em;margin-top:1.2em"><input id="switch_default" onclick="mobileBtn()" type="checkbox" class="switch_default"><label for="switch_default" class="toggleBtn"></label></div></div>
<div class="clear clear_nav_inline_end"></div></div></div><div class="clear clear_nav_end"></div></div></div><div class="hamberger" href="javascript:void(0)" onclick="btn_toggle();"><i class="iconfont icon-category"></i></div></div></div></div>
<div id="hn" class="no-js hidden_nav animated fadeInDown"><div class="bitcron_nav_container"><div class="bitcron_nav"><nav class="mixed_site_nav_wrap site_nav_wrap"><ul class="mixed_site_nav site_nav sm sm-base">	<li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/" class="selected active current nav__item" >é¦–é¡µ</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/archives" class="selected active current nav__item" >å½’æ¡£</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/tags" class="selected active current nav__item" >æ ‡ç­¾</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/about" class="selected active current nav__item" >å…³äº</a></li><li><a id="d2ef19af68cc211e98f8a0242ac110003" href="/post/link" class="selected active current nav__item" >å‹é“¾</a></li></ul><div class="clear clear_nav_inline_end"></div></nav></div><div class="clear clear_nav_end"></div></div>
<div style="display:flex;justify-content:center;inline-block;text-align:center;margin-top:7%"><div><form id="gridea-search-form-1" data-update="1614223299317" action="/search/index.html"><input class="search-input" autocomplete="off" spellcheck="false" name="q"  placeholder="Search..." /></form></div><div style="margin-left:0.5em"><input id="switch_default_h" onclick="mobileBtn()" type="checkbox" class="switch_default"><label for="switch_default" class="toggleBtn"></label></div></div>
</div></div>
<script>function enableDarkmode(){document.body.classList.add("darkmode"),document.getElementById("switch_default").checked=1,document.getElementById("switch_default_h").checked=1}function removeDarkmode(){document.body.classList.remove("darkmode"),document.getElementById("switch_default").checked=0,document.getElementById("switch_default_h").checked=0}function getCookie(a){var b,c=new RegExp("(^| )"+a+"=([^;]*)(;|$)");return(b=document.cookie.match(c))?unescape(b[2]):null}cookie=getCookie("darkmode"),"enable"==cookie&&enableDarkmode(),window.matchMedia("(prefers-color-scheme: dark)").matches&&"disable"!==cookie&&(enableDarkmode(),document.cookie="darkmode=enable; path=/");var mobileBtn=function(){1==document.getElementById("switch_default").checked?(enableDarkmode(),document.cookie="darkmode=enable; path=/"):(removeDarkmode(),document.cookie="darkmode=disable; path=/")};</script>

	<div class="main">
		<div class="main-inner">
			<div class="content">
				<article class="post">
					<script src='https://anthony-dong.github.io/media/js/Valine.min.js'></script><style>.v .vlist .vcard .vh .vmeta .vat{font-size:.8125em;color:#9d7873;cursor:pointer;float:right}.v .vlist .vcard .vhead .vsys{display:none}</style ><script type="text/javascript">new Valine(ValineInfo)</script>
					<h2 class="post_title sm_margin"><a> JPA - ç”¨èµ·æ¥çœŸçš„å¾ˆèˆ’æœ</a></h2>
					<script>
						function lan() {
							if (document.getElementById("lan").innerText == "ç¹") {
								var s = document.getElementById("tongwenlet_cn");
								if (s != null) {
									document.body.removeChild(s)
								}
								var s = document.createElement("script");
								s.language = "javascript";
								s.type = "text/javascript";
								s.src = "https://cdn.jsdelivr.net/gh/qyxtim/Static@1.1/bookmarklet_tw.js";
								s.id = "tongwenlet_cn";
								document.body.appendChild(s);
								document.getElementById("lan").innerHTML = "ç®€"
							} else {
								if (document.getElementById("lan").innerText == "ç°¡") {
									var s = document.getElementById("tongwenlet_cn");
									if (s != null) {
										document.body.removeChild(s)
									}
									var s = document.createElement("script");
									s.language = "javascript";
									s.type = "text/javascript";
									s.src = "https://cdn.jsdelivr.net/gh/qyxtim/Static@1.1/bookmarklet_cn.js";
									s.id = "tongwenlet_cn";
									document.body.appendChild(s);
									document.getElementById("lan").innerHTML = "ç¹"
								}
							}
						};
					</script>
					<section class="post_details"><i class="iconfont icon-calendar"></i><span style="margin-right:15px">
							2019-12-20</span><i class="iconfont icon-browse"></i>
							<span class="leancloud_visitors" style="margin-right:15px" id="/post/jpa-wei-he-shi-yong-ru-ci-fang-bian/">views <i class="leancloud-visitors-count" style="font-style: normal"></i></span>
							<span class="weaklink" style="margin-right:15px"><i class="iconfont icon-category"></i> <a
								href="https://anthony-dong.github.io/tag/NYP7PsS0Ewg/"
								class="tag">JPA</a></span><i class="iconfont icon-caret-down"></i><span
							style="margin-right:15px">3345å­—</span><i
							class="iconfont icon-naozhong"></i><span
							style="margin-right:15px">16 min read</span><a id="lan"
							href="javascript:void(0);" onclick="lan();" title="è°ƒæ•´ç®€ç¹ä½“" style="margin-right:15px;">ç¹</a>
						</section>

						<div style="display:flex">
							<div class="md_block" id="md_block">
								<div class="round-shape-one"></div>
								<blockquote>
<p>â€‹	JPAæ˜¯Java Persistence APIçš„ç®€ç§°ï¼Œä¸­æ–‡åJavaæŒä¹…å±‚APIï¼Œæ˜¯JDK 5.0æ³¨è§£æˆ–XMLæè¿°å¯¹è±¡ï¼å…³ç³»è¡¨çš„æ˜ å°„å…³ç³»ï¼Œå¹¶å°†è¿è¡ŒæœŸçš„å®ä½“<a href="https://baike.baidu.com/item/%E5%AF%B9%E8%B1%A1%E6%8C%81%E4%B9%85%E5%8C%96/7316192">å¯¹è±¡æŒä¹…åŒ–</a>åˆ°æ•°æ®åº“ä¸­ã€‚ [1]</p>
<p>Sunå¼•å…¥æ–°çš„JPA ORMè§„èŒƒå‡ºäºä¸¤ä¸ªåŸå› ï¼šå…¶ä¸€ï¼Œç®€åŒ–ç°æœ‰Java EEå’ŒJava SEåº”ç”¨å¼€å‘å·¥ä½œï¼›å…¶äºŒï¼ŒSunå¸Œæœ›æ•´åˆORMæŠ€æœ¯ï¼Œå®ç°å¤©ä¸‹å½’ä¸€ã€‚</p>
</blockquote>
<blockquote>
<p>JPAæ˜¯éœ€è¦Provideræ¥å®ç°å…¶åŠŸèƒ½çš„ï¼ŒHibernateå°±æ˜¯JPA Providerä¸­å¾ˆå¼ºçš„ä¸€ä¸ªï¼Œåº”è¯¥è¯´æ— äººèƒ½å‡ºå…¶å³ã€‚ä»åŠŸèƒ½ä¸Šæ¥è¯´ï¼ŒJPAå°±æ˜¯HibernateåŠŸèƒ½çš„ä¸€ä¸ªå­é›†ã€‚Hibernate ä»3.2å¼€å§‹ï¼Œå°±å¼€å§‹å…¼å®¹JPAã€‚Hibernate3.2è·å¾—äº†Sun TCKçš„JPA(Java Persistence API) å…¼å®¹è®¤è¯ã€‚</p>
<p>Spring + Hibernate å¸¸å¸¸è¢«ç§°ä¸º Java Web åº”ç”¨äººæ°”æœ€æ—ºçš„æ¡†æ¶ç»„åˆã€‚</p>
</blockquote>
<p>æ‰€ä»¥JPAæ˜¯è§„èŒƒ , Hibernateæ˜¯å®ç° , å¦‚æœä½ ç”¨äº†JPA , ä½ ä¼šçˆ±ä¸Šä»–çš„, å¤ªæ–¹ä¾¿äº† , ä½†æ˜¯ä»–å­¦ä¹ èµ·æ¥å¯èƒ½éœ€è¦ä¸€äº›æˆæœ¬ , æŒæ¡äº†ä½ ä¼šå‘ç°æ¯”Mybatis æ–¹ä¾¿ä¸€ä¸¢ä¸¢ ,</p>
<h2 id="1-springboot-å¿«é€Ÿå¼€å§‹">1. springboot - å¿«é€Ÿå¼€å§‹</h2>
<p>æˆ‘çš„ç‰ˆæœ¬æ˜¯ 2.0.4.RELEASE   springboot ç‰ˆæœ¬  , ç‰ˆæœ¬ä¸ä¸€è‡´å¯èƒ½å‡ºç°ä¸åŒçš„é—®é¢˜ .</p>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;mysql&lt;/groupId&gt;
    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;!-- æ–¹ä¾¿æµ‹è¯• --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.h2database&lt;/groupId&gt;
    &lt;artifactId&gt;h2&lt;/artifactId&gt;
    &lt;version&gt;1.4.197&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre>
<p>springbootçš„é…ç½® , å…¶ä¸­æ²¡å¿…è¦å»è®¾ç½® <code>@EnableJpaRepositories</code> æ³¨è§£, é»˜è®¤ä¼šè‡ªåŠ¨æ³¨å…¥çš„.  è¿™ä¸ªæ˜¯æµ‹è¯•ç¯å¢ƒçš„é…ç½®æ–‡ä»¶.</p>
<pre><code class="language-properties"># ä½¿ç”¨H2ä¸ºäº†æµ‹è¯•æ–¹ä¾¿.
spring.datasource.url=jdbc:h2:mem:jpa;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE;MODE=MYSQL
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.continue-on-error=false
spring.datasource.hikari.minimum-idle=2

# å°±æ˜¯æ¯æ¬¡è¿è¡Œå®Œæ¸…ç©ºæ•°æ®. æµ‹è¯•ç¯å¢ƒä¸‹, æœ€å¥½ä½¿ç”¨è¿™ç§.
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=true
# ä¿®æ”¹æ•°æ®åº“å¼•æ“.
spring.jpa.database-platform=org.hibernate.dialect.MySQL5InnoDBDialect
</code></pre>
<p>æˆ‘ä»¬çš„pojoå¯¹è±¡ , æŒ‰ç…§è§„èŒƒ,æˆ‘ä»¬çš„å¯¹è±¡åº”è¯¥æ˜¯ <code>åå­—+Do</code> , æ‰€ä»¥å« <code>UserDo</code></p>
<pre><code class="language-java">@NoArgsConstructor
@AllArgsConstructor
@Builder
@Data
// nameå«ä¹‰å°±æ˜¯ä½ ç”Ÿæˆè¡¨çš„tableçš„åç§°.
// é»˜è®¤æ˜¯ç±»å. è€Œä¸”è¿™ä¸ªå¾ˆæœ‰ç”¨å¤„, æœ€å¥½åˆ«è‡ªå®šä¹‰. è‡ªå®šä¹‰çš„è¯ . JSQLå°±å¾—æŒ‰ç…§è¿™ä¸ªåå­—æ¥äº†.
// æ‰€ä»¥ä¸€èˆ¬ä¹Ÿä¸åŠ @Tableæ³¨è§£.
@Entity
public class UserDo {

    @Id
    // è¿™ä¸ªç­–ç•¥åªæ˜¯ç”¨ä¸MySQLè‡ªå¸¦çš„é‚£ç§è‡ªå¢ç­–ç•¥.æ›´å¤šè§£é‡Šä¸‹æ–‡è®²è§£.
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long userId;
    private String username;
    private String password;

}
</code></pre>
<p>mapperå¯¹è±¡ - repositoryå¯¹è±¡</p>
<pre><code class="language-java">public interface UserMapper extends JpaRepository&lt;UserDo, Long&gt; {
    // åé¢è§£é‡Šä¸ºä»€ä¹ˆè¿™ä¹ˆå†™
    @Query(value = &quot;select u from user u where u.userId=:userId&quot;)
    UserDo findByUserId(Long userId);
}
</code></pre>
<h2 id="2-æµ‹è¯•">2. æµ‹è¯•</h2>
<h3 id="1-crudæ“ä½œ">1. CRUDæ“ä½œ</h3>
<pre><code class="language-java">public interface UserMapper extends JpaRepository&lt;UserDo, Long&gt; {

    @Query(value = &quot;select u from UserDo u where u.userId=:userId&quot;)
    UserDo findByUserId(Long userId);


    /**
     * ç¬¬ä¸€å¿…é¡»åŠ  @Transactional æ³¨è§£, ä¸ç„¶æŠ¥é”™.
     * CUD æ“ä½œå¿…é¡»ç”³æ˜ @Modifying æ³¨è§£, ä¸ç„¶æŠ¥é”™ , åŒæ—¶å®ƒçš„å±æ€§ clearAutomatically å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ¸…ç©ºç¼“å­˜, æœ€å¥½è®¾ç½®ä¸ºtrue.
     * è¿™å°±æ˜¯ç”³æ˜è¿™ä¿©çš„åŸå› . 
     */
    @Transactional
    @Modifying
    @Query(&quot;delete from UserDo u where u.userId=:userId&quot;)
    int deleteByUserId(Long userId);

    @Transactional
    @Modifying
    @Query(&quot;update UserDo u set u.password=:password where u.userId=:userId&quot;)
    int updateByUserId(Long userId, String password);
}
</code></pre>
<p>æµ‹è¯•ä»£ç  :</p>
<pre><code class="language-java">@FixMethodOrder(value = MethodSorters.DEFAULT)
@RunWith(SpringRunner.class)
@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.NONE)
public class UserMapperTest {

    @Autowired
    private UserMapper mapper;

    @Before
    public void init() {
        mapper.save(UserDo.builder().username(&quot;tom&quot;).password(&quot;123456&quot;).build());
        mapper.save(UserDo.builder().username(&quot;tony&quot;).password(&quot;123456&quot;).build());
    }

    @After
    public void drop() {
        mapper.deleteAll();
    }


    @Test
    public void findByUserId() {
        // æ‰§è¡Œä¸¤æ¬¡çš„ç›®çš„æ˜¯çœ‹çœ‹æ˜¯å¦ä½¿ç”¨äº†ç¼“å­˜
        mapper.findByUserId(1L);
        mapper.findByUserId(1L);
    }

    @Test
    public void deleteByUserId() {
        mapper.deleteByUserId(2L);
    }

    @Test
    public void updateByUserId() {
        int i = mapper.updateByUserId(1L, &quot;987654321&quot;);
        System.out.println(i);
        UserDo user = mapper.findByUserId(1L);
        System.out.println(user);
    }
}
</code></pre>
<p>æˆ‘æŠŠç»“æœå¤§è‡´æ”¾è¿™é‡Œ.</p>
<pre><code class="language-java">// åˆå§‹åŒ–æµç¨‹ , åˆ›å»ºè¡¨
Hibernate: create table user_do (user_id bigint not null auto_increment, password varchar(255), username varchar(255), primary key (user_id)) engine=InnoDB


// æ’å…¥è¯­å¥çš„æµç¨‹
Hibernate: insert into user_do (password, username) values (?, ?)
Hibernate: insert into user_do (password, username) values (?, ?)
    
// åˆ é™¤
Hibernate: delete from user_do where user_id=?
    
//æŸ¥è¯¢
Hibernate: select userdo0_.user_id as user_id1_0_, userdo0_.password as password2_0_, userdo0_.username as username3_0_ from user_do userdo0_ where userdo0_.user_id=?
//æŸ¥è¯¢
Hibernate: select userdo0_.user_id as user_id1_0_, userdo0_.password as password2_0_, userdo0_.username as username3_0_ from user_do userdo0_ where userdo0_.user_id=?


// æ›´æ–°    
Hibernate: update user_do set password=? where user_id=?    
</code></pre>
<h3 id="2-é—®é¢˜">2. é—®é¢˜</h3>
<ul>
<li>æ²¡æœ‰ä½¿ç”¨ç¼“å­˜,</li>
<li>æ’å…¥çš„æµç¨‹æ˜¯ ,å…ˆå»sequenceè¡¨ä¸­, è¡Œé”æŸ¥è¯¢IDå­—æ®µ. ç„¶åæ ¹æ®IDå»æ’å…¥ , æ²¡æœ‰ä½¿ç”¨æ•°æ®åº“è‡ªå¸¦çš„è‡ªå¢ç­–ç•¥.</li>
<li>å…³äºå¦‚ä½•å¼€å¯ç¼“å­˜ , è‡ªè¡Œç™¾åº¦. æˆ‘è§‰å¾—, æœ€å¥½åˆ«ä» daoå±‚é¢å¼€å¯ç¼“å­˜, åº”è¯¥è®©æˆ‘ä»¬ä»æœåŠ¡å±‚æ‰‹åŠ¨å†™ä»£ç å¼€å¯. é˜²æ­¢å‡ºç°è„æ•°æ®.</li>
<li>å…³äº ä¸ºä½•åŠ  <code>@Transactional</code> æ­¤æ³¨è§£çš„åŸå›  , ä»¥åŠ <code>@Modifying</code> çš„åŸå› .  ä¸Šè¯‰ä»‹ç»äº†</li>
<li>å…³äº <code>@Entity</code> æ³¨è§£çš„é—®é¢˜ä»¥åŠ JSQLçš„é—®é¢˜. ä¸ºä½•ä»‹æ„åªä½¿ç”¨ <code>@Entity</code> æ³¨è§£, ä¸ä½¿ç”¨å¤šä½™ä½¿ç”¨<code>@Table</code>æ³¨è§£å‘¢,</li>
</ul>
<p>å› ä¸ºåœ¨æˆ‘ä»¬å†™ jsqlçš„æ—¶å€™, æ˜¯æ ¹æ®entity æ³¨è§£çš„æ ‡è®°èµ°çš„.  æ‰€ä»¥, å¦‚æœä½ è¦å†™. tableå’Œentityçš„nameå€¼å¿…é¡»ç›¸åŒ, è€Œä¸”è¡¨åé»˜è®¤å°±æ˜¯ entityçš„name, ä¹Ÿå°±æ˜¯ç±»å.</p>
<p>æ‰€ä»¥å¯¹äºæˆ‘ä¸Šé¢çš„userå¯¹è±¡</p>
<pre><code class="language-java">@Entity(name = &quot;user&quot;)
public class UserDo {}
</code></pre>
<p>è¿™ä¸ªæŸ¥è¯¢è¯­å¥</p>
<pre><code class="language-sql">@Query(value = &quot;select u from user u where u.userId=:userId&quot;)
UserDo findByUserId(Long userId);
</code></pre>
<p>æ­¤æ—¶å°±æ˜¯, ä½¿ç”¨äº†<code>user</code> ä½œä¸ºè¡¨çš„æ˜ å°„å­—æ®µ.</p>
<p>å¦‚æœæˆ‘ä»¬å°†entityçš„nameå–æ¶ˆæ‰. å¦‚ä½•å†™sqlå‘¢</p>
<pre><code class="language-java">@Query(value = &quot;select u from UserDo u where u.userId=:userId&quot;)
UserDo findByUserId(Long userId);
</code></pre>
<p>å°±æ˜¯ä¸Šè¯‰è¿™ç§äº†, ç»“åˆè¿™ç‚¹. æ‰€ä»¥æœ€å¥½åˆ«å°†UserDo åå­—è®¾ç½®ä¸ºè¿™ä¸ª, æœ€å¥½ç›´æ¥æ˜¯è¡¨åç§°æœ€å¥½.</p>
<p>ä¸ºäº†å†™èµ·æ¥æ–¹ä¾¿, å› æ­¤æˆ‘å°† <code>@Entity(name = &quot;user&quot;)</code> æ”¹ä¸ºäº† <code>@Entity</code> ç›´æ¥.</p>
<h3 id="3-å…³äºå­—æ®µå±æ€§">3. å…³äºå­—æ®µå±æ€§</h3>
<p>å‘ç°äº†ä»€ä¹ˆ , intç±»å‹,é»˜è®¤å¯¹åº”çš„å­—æ®µæ—¶int(11) , è€Œlongç±»å‹å¯¹åº”çš„æ˜¯ bigint(20)  ,ç„¶åstringå¯¹åº”çš„æ˜¯ varchar(255) ,</p>
<p>å¾ˆä¸å‹å¥½</p>
<p>æˆ‘ä»¬ä¿®æ”¹å‡ ä¸ªå±æ€§å† ,ä¸»è¦æ˜¯ <code>@Column</code> æ³¨è§£çš„å±æ€§</p>
<pre><code class="language-java">public @interface Column {
	
    // å­—æ®µå
    String name() default &quot;&quot;;

    // æ˜¯å¦å”¯ä¸€
    boolean unique() default false;

    // æ˜¯å¦å¯ä»¥ä¸ºç©º
    boolean nullable() default true;

    // æ˜¯å¦å¯æ’å…¥
    boolean insertable() default true;

    // æ˜¯å¦å¯æ›´æ–°
    boolean updatable() default true;

    // å­—æ®µå®šä¹‰ , è¿™ä¸ªå¾ˆå¥½ç”¨
    String columnDefinition() default &quot;&quot;;

    // table
    String table() default &quot;&quot;;

    // è¿™ä¸ªåªèƒ½ä½œç”¨äºStringç±»å‹, 
    int length() default 255;

    int precision() default 0;

    int scale() default 0;
}
</code></pre>
<p>æ‰€ä»¥æˆ‘ä»¬åº”è¯¥è¿™ä¹ˆå»ºè¡¨</p>
<pre><code class="language-java">@ToString
@Setter
@Getter
@Entity
@Table(name = &quot;jpa_user&quot;) // é»˜è®¤æ˜¯ user_do , çœ‹è‡ªå·±ä¸šåŠ¡éœ€æ±‚,éœ€ä¸éœ€è¦è®¾ç½®,æ„Ÿè§‰é»˜è®¤æœ€å¥½,ä¸å‡ºäº‹
public class UserDo {

    public UserDo() {

    }

    /**
     * ç”¨æˆ·ID
     */
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = &quot;user_id&quot;)
    private int id;

    /**
     * ç”¨æˆ·å
     */
    @Column(name = &quot;user_name&quot;, nullable = false, length = 10)
    private String name;

    /**
     * ç”¨æˆ·æ€§åˆ« , 0 none 1 female ,2 male  åªå±•ç¤ºä¸€ä½æ•°
     */
    @Column(name = &quot;user_gender&quot;, nullable = false, columnDefinition = &quot;tinyint (1) zerofill&quot;)
    private int gender;


    /**
     * æœ€é•¿6ä½æ•° ä¹Ÿå°±æ˜¯æœ€å¤§æ˜¯ 999999.99
     */
    @Column(name = &quot;user_salary&quot;, nullable = true, columnDefinition = &quot;decimal(8,2)&quot;)
    private double salary;
}
</code></pre>
<h3 id="4-å…³äºä¸»é”®ç”Ÿæˆç­–ç•¥">4. å…³äºä¸»é”®ç”Ÿæˆç­–ç•¥</h3>
<p>æˆ‘è¿™é‡Œç•™ä¸€ç¯‡æ–‡ç«  ,  <a href="https://www.cnblogs.com/SummerinShire/p/7544897.html">https://www.cnblogs.com/SummerinShire/p/7544897.html</a>  , å¤§å®¶è‡ªè¡Œå»çœ‹, å¾ˆè¯¦ç»†çš„.</p>
<p>å…¶ä¸­å¾ˆå¤šç§æ–¹å¼, æ¯”å¦‚ <code>org.hibernate.id.factory.internal.DefaultIdentifierGeneratorFactory#DefaultIdentifierGeneratorFactory</code> è¿™ä¸ªå®šä¹‰äº†å¾ˆå¤šç§ .</p>
<h2 id="3-åŸºæœ¬ä½¿ç”¨">3. åŸºæœ¬ä½¿ç”¨</h2>
<h4 id="æ’å…¥">æ’å…¥</h4>
<pre><code class="language-java">UserDo userDo = new UserDo();
userDo.setName(&quot;tom&quot;);
userDo.setSalary(1000.1);
repository.save(userDo);
</code></pre>
<h4 id="æ’åºæŸ¥æ‰¾">æ’åºæŸ¥æ‰¾</h4>
<pre><code class="language-java">// è¿™é‡Œçš„å­—æ®µåæ˜¯å’ŒJavaå­—æ®µåç›¸åŒ  , ä¸æ˜¯MYSQLçš„, è¿˜æœ‰å°±æ˜¯æ³¨æ„å®ä¾‹åŒ–æ”¾åˆ°å¤–é¢, ä¸ç„¶æ¯æ¬¡æ‰ç”¨å®ä¾‹åŒ–æµªè´¹å†…å­˜
final Sort sort = new Sort(Sort.Direction.DESC, &quot;salary&quot;);
List&lt;UserDo&gt; salary = repository.findAll(sort);
salary.forEach(System.out::println);
</code></pre>
<h4 id="æ¡ä»¶æŸ¥è¯¢">æ¡ä»¶æŸ¥è¯¢</h4>
<pre><code class="language-java">Optional&lt;UserDo&gt; tom = repository.findOne(new Example&lt;UserDo&gt;() {
    @Override
    public UserDo getProbe() {
        UserDo aDo = new UserDo();
        aDo.setName(&quot;tom&quot;);
        aDo.setSalary(1000.1);
        aDo.setId(1);
        return aDo;
    }

    @Override
    public ExampleMatcher getMatcher() {
        return ExampleMatcher.matchingAll();
    }
});


Optional&lt;UserDo&gt; one = repository.findOne(Example.of(userDo)); è¿™ä¸ª
</code></pre>
<p>è¿™é‡Œæ¯”è¾ƒå‘ , æœ‰ä¸¤ç§æ¨¡å¼ MatchMode ä¸­æœ‰ALL å’Œ ANY , all å°±æ˜¯å…¨éƒ¨æ˜¯andè¿æ¥, anyå…¨éƒ¨æ˜¯or</p>
<h4 id="åˆ†é¡µæŸ¥æ‰¾">åˆ†é¡µæŸ¥æ‰¾</h4>
<pre><code class="language-java">Page&lt;UserDo&gt; all = repository.findAll(new PageRequest(0, 2));
all.forEach(System.out::println);
</code></pre>
<pre><code class="language-java">Page&lt;UserDo&gt; list = repository.findAll(PageRequest.of(1, 2));
list.forEach(System.out::println);
</code></pre>
<p><code>Pageable</code> æ˜¯ä¸€ä¸ªæ¥å£ç±»  , æ˜¾ç„¶æˆ‘ä»¬ä¸å›å»ç›´æ¥ä½¿ç”¨ , ä¸€èˆ¬ä½¿ç”¨ <code>PageRequest</code> å¯¹è±¡ , ä»–æ˜¯ä¸€ä¸ªç°æˆçš„æ–¹æ³• , è¿˜æœ‰å°±æ˜¯å¯¹äºå…¶ä½¿ç”¨ , å¯ä»¥ç›´æ¥newæ–¹æ³•æ„é€  å’Œ ofè¿›è¡Œ, ç¬¬ä¸€ç§æ–¹æ³•è¢«æŠ›å¼ƒäº† , æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ç¬¬äºŒç§ , ä»–éœ€è¦ä¸‰ä¸ªå‚æ•° , page(ä»0å¼€å§‹) , size(é¡µé¢å¤§å°)  , sort(æ’åº) , ä»–ä¸åŒäºmysqlçš„limit m n, æ˜¯é€šè¿‡è®¡ç®—å¾—åˆ°çš„, åœ¨mysqlä¸­ mæŒ‡çš„æ˜¯ä»ç¬¬å‡ è¡Œå¼€å§‹(ä¸åŒ…å«æ”¹è¡Œ) , næŒ‡çš„æ˜¯å¤šå°‘ä¸ª ,</p>
<h4 id="åˆ é™¤">åˆ é™¤</h4>
<pre><code class="language-java">userRepository.deleteAllInBatch();  //åˆ åº“è·‘è·¯ , go go go ,delete from jpa_user

userRepository.deleteById(10); // æ‰¾ä¸åˆ°æŠ›å‡ºå¼‚å¸¸

userRepository.delete(userDo);  // ä¹Ÿæ˜¯ç”¨çš„ åˆ é™¤IDçš„æ–¹æ³• , éœ€è¦æä¾›ID ,å…ˆæŸ¥å†åˆ 


userRepository.deleteAll(); // æ…¢æ…¢å…¨éƒ¨åˆ é™¤
</code></pre>
<p>è¿˜æœ‰å…¶ä»–</p>
<h2 id="4-jpa-çš„-jql">4. JPA çš„ JQL</h2>
<h3 id="1-è®¤è¯†jql">1. è®¤è¯†JQL</h3>
<p>å…¶å®è·ŸSQL ä¹ˆå¤šå¤§åŒºåˆ«  ,è¿™é‡Œæ³¨æ„ä¸‹ , æˆ‘ä»¬çš„å®ä½“ç±»ä¸Šçš„ <code>@Entity</code> æ³¨è§£, åˆ«ä¹±å†™åŸºæœ¬ä¹ˆé—®é¢˜,é»˜è®¤å°±è¡Œäº†</p>
<pre><code class="language-java">@Query(value = &quot;select u from UserDo u where u.name= :name&quot;)
UserDo selectByJQL(@Param(&quot;name&quot;) String name);
</code></pre>
<p>æµ‹è¯•</p>
<pre><code class="language-java">UserDo tom3 = userRepository.selectByJQL(&quot;tom3&quot;);
System.out.println(&quot;tom3 = &quot; + tom3);
</code></pre>
<p>è¾“å‡ºç»“æœ :</p>
<pre><code class="language-java">Hibernate: select userdo0_.user_id as user_id1_0_, userdo0_.user_gender as user_gen2_0_, userdo0_.user_name as user_nam3_0_, userdo0_.user_salary as user_sal4_0_ from jap_user userdo0_ where userdo0_.user_name=?
tom3 = UserDo(id=3, name=tom3, gender=1, salary=1003.0)
</code></pre>
<p>åŸºæœ¬ä¹ˆé—®é¢˜ , å…¶ä¸­ ? index ä¹Ÿå¯ä»¥ä½¿ç”¨ , çœ‹ä½ è‡ªå·±å’‹ç”¨,ä¸‹é¢å°±ä»‹ç»äº†</p>
<h3 id="2-é«˜çº§ç‚¹çš„ç”¨æ³•">2. é«˜çº§ç‚¹çš„ç”¨æ³•</h3>
<p>é¦–å…ˆå®šä¹‰ä¸€ä¸ªæ„é€ æ–¹æ³•</p>
<pre><code class="language-java">public UserDo(String name, int gender) {
    this.name = name;
    this.gender = gender;
}
</code></pre>
<p>å…¶æ¬¡è¿›è¡Œæ”¹é€ </p>
<pre><code class="language-java">//select new com.example.springdatajpastart01.pojo.UserDo(name,gender) from UserDo where name=?1
// æˆ–è€…è¿™ä¸ªéƒ½è¡Œ,ä¹Ÿå¯ä»¥æ˜¯å…¶ä»–
@Query(value = &quot;select new UserDo (name,gender) from UserDo where name=?1&quot;)
UserDo selectByJQLConstructor(String name);
</code></pre>
<p>è¾“å‡º :</p>
<pre><code class="language-java">Hibernate: select userdo0_.user_name as col_0_0_, userdo0_.user_gender as col_1_0_ from jpa_user userdo0_ where userdo0_.user_name=?
tom3 = UserDo(id=0, name=tom3, gender=1, salary=0.0)
</code></pre>
<p>å‘ç°æ˜¯ä¸æ˜¯æŸ¥åˆ°äº†, è¿˜æ˜¯å¾ˆå¼ºå¤§çš„,</p>
<p>å†æ¥ä¸ªå¼ºå¤§çš„</p>
<pre><code class="language-java">@Query(&quot;select new map(name as myname,gender as myaddress) from UserDo where name = :name&quot;)
List&lt;Map&lt;String, Object&gt;&gt; selectByJQLMap(@Param(&quot;name&quot;) String name);
</code></pre>
<p>è¾“å‡º</p>
<pre><code class="language-java">Hibernate: select userdo0_.user_name as col_0_0_, userdo0_.user_gender as col_1_0_ from jpa_user userdo0_ where userdo0_.user_name=?
[{myaddress=1, myname=tom3}]
</code></pre>
<h2 id="4-jpa-å¯¹åŸç”Ÿsqlçš„æ”¯æŒ">4.  JPA å¯¹åŸç”ŸSQLçš„æ”¯æŒ</h2>
<p>ä¸»è¦å°±æ˜¯ä¸€ä¸ª <code>@Query</code>  å¯¹åŸç”Ÿæ”¯æŒéœ€è¦å¼€å¯é‡Œé¢çš„å±æ€§ <code>nativeQuery</code> æ”¹æˆtrue å°±å¯ä»¥äº†,</p>
<h3 id="1-index-ä½¿ç”¨">1. ? index ä½¿ç”¨</h3>
<blockquote>
<p>â€‹	è¿™é‡Œçš„index æ˜¯æˆ‘ä»¬å‚æ•°çš„ä½ç½®, ä»0 å¼€å§‹</p>
</blockquote>
<pre><code class="language-java">@Query(nativeQuery = true, value = &quot;SELECT * FROM jap_user WHERE user_id=?1&quot;)
List&lt;UserDo&gt; selectById(String id);
</code></pre>
<p>æµ‹è¯•ä¸€ä¸‹</p>
<pre><code class="language-java">// æ’å…¥è¯­å¥
UserDo userDo = new UserDo();
for (int x = 1; x &lt; 8; x++) {
    userDo.setId(0);
    userDo.setGender(x % 2);
    userDo.setName(&quot;tom&quot; + x);
    userDo.setSalary(1000 + x);
    userRepository.save(userDo);
}

List&lt;UserDo&gt; dos = userRepository.selectById(&quot;2 or 1=1&quot;); //çœ‹çœ‹æ˜¯ä¸æ˜¯é¢„ç¼–è¯‘
dos.forEach(System.out::println);
</code></pre>
<p>è¾“å‡º :</p>
<pre><code class="language-java">Hibernate: SELECT * FROM jap_user WHERE user_id=?
UserDo(id=2, name=tom2, gender=0, salary=1002.0)
</code></pre>
<p>å¯ä»¥é˜²æ­¢SQL æ³¨å…¥çš„é—®é¢˜</p>
<h3 id="2-param">2.  @Param</h3>
<pre><code class="language-java">@Query(nativeQuery = true, value = &quot;SELECT * FROM jap_user WHERE user_name = :user_name&quot;)
List&lt;UserDo&gt; selectByUserName(@Param(&quot;user_name&quot;) String userName);
</code></pre>
<p>æˆ‘ä»¬è¿˜æ˜¯æµ‹è¯•æ˜¯ä¸æ˜¯é¢„ç¼–è¯‘, é˜²æ­¢SQLæ³¨å…¥å‘¢</p>
<pre><code class="language-java">List&lt;UserDo&gt; dos = userRepository.selectByUserName(&quot;tom3&quot;);
dos.forEach(System.out::println);
List&lt;UserDo&gt; sql = userRepository.selectByUserName(&quot;tom3 or 1=1&quot;);
sql.forEach(System.out::println);
</code></pre>
<p>è¾“å‡º</p>
<pre><code class="language-java">Hibernate: SELECT * FROM jap_user WHERE user_name = ?
UserDo(id=3, name=tom3, gender=1, salary=1003.0)
Hibernate: SELECT * FROM jap_user WHERE user_name = ?
</code></pre>
<p>å¾ˆæ˜¾ç„¶æ˜¯å¯ä»¥é˜²æ­¢çš„</p>
<h3 id="3-like-æ¨¡ç³ŠæŸ¥è¯¢">3. Like æ¨¡ç³ŠæŸ¥è¯¢</h3>
<blockquote>
<p>ç™¾åˆ†æ¯”(<code>%</code>)é€šé…ç¬¦å…è®¸åŒ¹é…ä»»ä½•å­—ç¬¦ä¸²çš„é›¶ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ã€‚</p>
<p>ä¸‹åˆ’çº¿(<code>_</code>)é€šé…ç¬¦å…è®¸åŒ¹é…ä»»ä½•å•ä¸ªå­—ç¬¦ã€‚</p>
</blockquote>
<pre><code class="language-java">@Query(nativeQuery = true, value = &quot;SELECT * FROM jap_user WHERE user_name like :user_name&quot;)
List&lt;UserDo&gt; selectByUserNames(@Param(&quot;user_name&quot;)String username);
</code></pre>
<p>æµ‹è¯•</p>
<pre><code class="language-java">List&lt;UserDo&gt; tom_ = userRepository.selectByUserNames(&quot;tom_&quot;);
tom_.forEach(System.out::println); // tom1 - tom9

System.out.println(&quot;================================&quot;);

List&lt;UserDo&gt; toms = userRepository.selectByUserNames(&quot;tom%&quot;);
toms.forEach(System.out::println); // tom1 - tom18
</code></pre>
<p>å‘ç°è¿™é‡Œåªæ˜¯ä¸€ä¸ªæ¨¡å¼åŒ¹é… , éšä¾¿è¾“å…¥å°±è¡Œäº†</p>
<h3 id="4-spel-è¡¨è¾¾å¼">4. SPEL è¡¨è¾¾å¼</h3>
<pre><code class="language-java">@Query(nativeQuery = true, value = &quot;SELECT * FROM #{#entityName} WHERE user_name = :user_name&quot;)
UserDo selectBySPEL(@Param(&quot;user_name&quot;)String username);
</code></pre>
<p><code>#{#entityName}</code> è¿™ä¸ªå¯¹åº”çš„æ˜¯å®ä½“ç±»çš„ <code>@Entity(name = &quot;jap_user&quot;)</code> è¿™é‡Œå†™çš„å­—æ®µå</p>
<p>æµ‹è¯•</p>
<pre><code class="language-java">UserDo userDos = userRepository.selectBySPEL(&quot;tom1&quot;);
System.out.println(&quot;userDo = &quot; + userDos);
</code></pre>
<pre><code class="language-java">Hibernate: SELECT * FROM jap_user WHERE user_name = ?
userDo = UserDo(id=1, name=tom1, gender=1, salary=1001.0)
</code></pre>
<h2 id="5-åˆ†é¡µ">5. åˆ†é¡µ</h2>
<p>æµ‹è¯• :</p>
<pre><code class="language-java">@Query(value = &quot;SELECT * FROM jap_user WHERE user_salary &gt; ?1&quot;, countQuery = &quot;SELECT count(*) FROM jap_user WHERE user_salary &gt; ?1&quot;, nativeQuery = true)
Page&lt;UserDo&gt; selectBySalary(Double salary, Pageable pageable);
</code></pre>
<p>è¿™é‡Œæ³¨æ„ éœ€è¦å†™ä¸€ä¸ª <code>countQuery</code>  æ˜¯ä½ æŸ¥è¯¢çš„æ€»æ¡æ•°è¦å‘Šè¯‰ä»–  , å¯¹äºSQLæŸ¥è¯¢ä»–ä¼šè‡ªåŠ¨ç»™ä½ æ•´åˆ</p>
<pre><code class="language-java">Page&lt;UserDo&gt; salary = userRepository.selectBySalary(1000.0, PageRequest.of(0, 10, new Sort(Sort.Direction.ASC, &quot;user_salary&quot;)));
System.out.println(&quot;salary.getTotalPages() = &quot; + salary.getTotalPages());


List&lt;UserDo&gt; content = salary.getContent();
content.forEach(System.out::println);
</code></pre>
<p><strong>è¿™é‡Œæ³¨æ„ä¸€ç‚¹å°±æ˜¯ , Sortå­—æ®µçš„é‚£ä¸ªproperties, é‡Œé¢å†™çš„æ˜¯è¡¨çš„å­—æ®µå , è¿™ä¸ªéœ€è¦æ³¨æ„</strong></p>
<p>å¯¹æ¯”ä¸€ä¸‹ç›´æ¥æ’åº ,åŒºåˆ«å°±åœ¨è¿™é‡Œ</p>
<pre><code class="language-java">List&lt;UserDo&gt; all = userRepository.findAll(new Sort(Sort.Direction.DESC, &quot;salary&quot;));
all.forEach(System.out::println);
</code></pre>
<h2 id="6-ddl-ç­–ç•¥">6. DDL ç­–ç•¥</h2>
<blockquote>
<p>â€‹	DDL mode. This is actually a shortcut for the &quot;hibernate.hbm2ddl.auto&quot; property. Defaults to &quot;<strong>create-drop</strong>&quot; when using an embedded database and no schema manager was detected. Otherwise, defaults to &quot;none&quot;.</p>
</blockquote>
<p>create---- æ¯æ¬¡è¿è¡Œè¯¥ç¨‹åºï¼Œä¼šå…ˆåˆ é™¤è¡¨æ ¼ï¼Œç„¶åå»ºè¡¨</p>
<p>create-drop---- åœ¨createæ¨¡å¼ä¸­, åŠ å…¥äº†æ¯æ¬¡ç¨‹åºè¿è¡Œç»“æŸåˆ é™¤è¡¨ (åˆ‡å…¥å¼æ•°æ®åº“é»˜è®¤ä¸ºè¿™ä¸ª)</p>
<p>update---   æ¯æ¬¡è¿è¡Œç¨‹åºï¼Œæ²¡æœ‰è¡¨æ ¼ä¼šæ–°å»ºè¡¨æ ¼ï¼Œå¦‚æœè¡¨æ ¼ä»¥åŠå­˜åœ¨äº† , å•¥äº‹æƒ…ä¹Ÿä¸åš , (æ„Ÿè§‰æœ€åˆç†)</p>
<p>validate---- å¯åŠ¨çš„æ—¶å€™ä¼šæ ¡éªŒ ,å¦‚æœæ•°æ®åº“ä¸­æ²¡æœ‰è¡¨, ä¼šç›´æ¥æŠ¥é”™ , å¦‚æœè¡¨å­˜åœ¨ä¼šæ ¡éªŒæ•°æ®</p>
<p>none --- é»˜è®¤ä¸ºè¿™ä¸ª,å°±æ˜¯å•¥äº‹ä¹Ÿä¸åš (å’Œ Mybatisä¸€æ · , éœ€è¦æˆ‘ä»¬äººå·¥å»ºè¡¨,ä¹Ÿä¸æ ¡éªŒ)</p>

								<span id="footnote"></span>
								<div id="warn"></div>
							</div>
							<div class="toc-container"><ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#1-springboot-%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B">1. springboot - å¿«é€Ÿå¼€å§‹</a></li>
<li><a href="#2-%E6%B5%8B%E8%AF%95">2. æµ‹è¯•</a>
<ul>
<li><a href="#1-crud%E6%93%8D%E4%BD%9C">1. CRUDæ“ä½œ</a></li>
<li><a href="#2-%E9%97%AE%E9%A2%98">2. é—®é¢˜</a></li>
<li><a href="#3-%E5%85%B3%E4%BA%8E%E5%AD%97%E6%AE%B5%E5%B1%9E%E6%80%A7">3. å…³äºå­—æ®µå±æ€§</a></li>
<li><a href="#4-%E5%85%B3%E4%BA%8E%E4%B8%BB%E9%94%AE%E7%94%9F%E6%88%90%E7%AD%96%E7%95%A5">4. å…³äºä¸»é”®ç”Ÿæˆç­–ç•¥</a></li>
</ul>
</li>
<li><a href="#3-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8">3. åŸºæœ¬ä½¿ç”¨</a><br>
*
<ul>
<li><a href="#%E6%8F%92%E5%85%A5">æ’å…¥</a></li>
<li><a href="#%E6%8E%92%E5%BA%8F%E6%9F%A5%E6%89%BE">æ’åºæŸ¥æ‰¾</a></li>
<li><a href="#%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2">æ¡ä»¶æŸ¥è¯¢</a></li>
<li><a href="#%E5%88%86%E9%A1%B5%E6%9F%A5%E6%89%BE">åˆ†é¡µæŸ¥æ‰¾</a></li>
<li><a href="#%E5%88%A0%E9%99%A4">åˆ é™¤</a></li>
</ul>
</li>
<li><a href="#4-jpa-%E7%9A%84-jql">4. JPA çš„ JQL</a>
<ul>
<li><a href="#1-%E8%AE%A4%E8%AF%86jql">1. è®¤è¯†JQL</a></li>
<li><a href="#2-%E9%AB%98%E7%BA%A7%E7%82%B9%E7%9A%84%E7%94%A8%E6%B3%95">2. é«˜çº§ç‚¹çš„ç”¨æ³•</a></li>
</ul>
</li>
<li><a href="#4-jpa-%E5%AF%B9%E5%8E%9F%E7%94%9Fsql%E7%9A%84%E6%94%AF%E6%8C%81">4.  JPA å¯¹åŸç”ŸSQLçš„æ”¯æŒ</a>
<ul>
<li><a href="#1-index-%E4%BD%BF%E7%94%A8">1. ? index ä½¿ç”¨</a></li>
<li><a href="#2-param">2.  @Param</a></li>
<li><a href="#3-like-%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2">3. Like æ¨¡ç³ŠæŸ¥è¯¢</a></li>
<li><a href="#4-spel-%E8%A1%A8%E8%BE%BE%E5%BC%8F">4. SPEL è¡¨è¾¾å¼</a></li>
</ul>
</li>
<li><a href="#5-%E5%88%86%E9%A1%B5">5. åˆ†é¡µ</a></li>
<li><a href="#6-ddl-%E7%AD%96%E7%95%A5">6. DDL ç­–ç•¥</a></li>
</ul>
</li>
</ul>
</div>
						</div>
						<div id="fullPage"><canvas id="canvas"></canvas></div>
				</article>
				<div id="eof"><span>EOF</span></div>
				<div class="round-shape-one"></div>
				<section>
					<div class="doc_comments">
							<div id="valine-container"></div>
					</div>
				</section>
			</div>
		</div>
	</div>
	<script>
		"use strict";
		! function () {
			for (var n = document.getElementsByTagName("pre"), e = n.length, s = 0; s < e; s++) {
				n[s].innerHTML = '<span class="line-number"></span>' + n[s].innerHTML + '<span class="cl"></span>';
				for (var a = n[s].innerHTML.split(/\n/).length, r = 0; r < a - 1; r++) {
					n[s].getElementsByTagName("span")[0].innerHTML += "<span>" + (r + 1) + "</span>"
				}
			}
		}();
		let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");
		window.addEventListener("scroll", event => {
			let fromTop = window.scrollY;
			mainNavLinks.forEach((link, index) => {
				let section = document.getElementById(decodeURI(link.hash).substring(1));
				let nextSection = null
				if (mainNavLinks[index + 1]) {
					nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(
						1));
				}
				if (section.offsetTop <= fromTop) {
					if (nextSection) {
						if (nextSection.offsetTop > fromTop) {
							link.classList.add("currentToc");
						} else {
							link.classList.remove("currentToc");
						}
					} else {
						link.classList.add("currentToc");
					}
				} else {
					link.classList.remove("currentToc");
				}
			});
		});
		var list = document.querySelectorAll(".katex");
		for (var i = 0; i < list.length; i++) {
			list[i].style.display = "unset"
		};
		var h = document.documentElement,
			b = document.body,
			st = "scrollTop",
			sh = "scrollHeight",
			progress = document.querySelector(".progress"),
			scroll;
		document.addEventListener("scroll", function () {
			scroll = (h[st] || b[st]) / ((h[sh] || b[sh]) - h.clientHeight) * 100;
			progress.style.setProperty("--scroll", scroll + "%")
		});
		var wxScale = new WxScale({
			fullPage: document.querySelector("#fullPage"),
			canvas: document.querySelector("#canvas")
		});
		var imgBox = document.querySelectorAll("#md_block img");
		for (var i = 0; i < imgBox.length; i++) {
			imgBox[i].onclick = function (e) {
				wxScale.start(this)
			}
		};
	</script>
	<style>
		#magnifyImg {
			position: fixed;
			left: 0;
			top: 0;
			text-align: center;
			width: 100%;
			display: none;
			z-index: 9999
		}

		#magnifyImg img {
			object-fit: contain;
			background: #eaecef;
			padding: 15px;
			border-radius: 10px;
			height: auto;
			width: auto;
			vertical-align: middle
		}
	</style>
	<a id="scrollUp"href="#top"style="position: fixed; z-index: 2147483647; display: block;"></a><div class="footer animated fadeInDown"><div class="site_footer"><div class="mysocials"><div class="my_socials"><a href="https://github.com/Anthony-Dong"title="github"><i class="iconfont icon-github"></i></a><a href="fanhaodong516@gmail.com"title="envelope"><i class="iconfont icon-envelope"></i></a></div></div><div class="copyright"id="copyright">You Are My Everything. <a href="mailto:574986060@qq.com" target="blank">Send Email</a>CopyrightÂ©2018-2020<a href="https://anthony-dong.github.io"style="margin:0;">Serence</a>.</div><span style="display: inline;margin-right:15px;">ğŸ‘<strong><span id="count-page">168271</span></strong></span><span id="busuanzi_container_page_pv"style="display: inline;"><span>ğŸ“š<strong>186</strong>posts</span></div></div><script>console.log("\n %c \u26a1Anthony-Dong's Blog:https://anthony-dong.gitee.io ,Github:https://github.com/Anthony-Dong ,Email:574986060@qq.com ,æœ‰äº‹æƒ…æ¬¢è¿è”ç³». \n\n","color: #ffffff; background: rgba(49, 49, 49, 0.85); padding:5px 0;border-radius:5px;",);</script>
	<script type="text/javascript" async src="https://anthony-dong.github.io/media/js/prism.js"></script>
</body>
</html>